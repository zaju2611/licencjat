"use strict";var prevMouseX,prevMouseY,snapshot,colorDiv=document.querySelector(".setColor"),colorPicker=document.getElementById("color-picker"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),toolsBtns=document.querySelectorAll(".tool"),fillColor=document.querySelector("#fill-color"),sizeSlider=document.querySelector("#size-slider"),colorsBtns=document.querySelectorAll(".colors .option"),clearCanvas=document.querySelector(".clear-canvas"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),checkBtn=document.querySelector(".check-answer"),answerBtns=document.querySelectorAll(".button-answer"),isDrawing=!1,brushWidth=5,selectedTool="brush",selectedColor="#000000",data=0,setColor=(window.addEventListener("load",function(){canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight}),function(){colorDiv.style.backgroundColor=colorPicker.value,selectedColor=colorPicker.value}),startDraw=function(e){isDrawing=!0,prevMouseX=e.offsetX,prevMouseY=e.offsetY,ctx.beginPath(),ctx.lineWidth=brushWidth,ctx.strokeStyle=selectedColor,ctx.fillStyle=selectedColor,snapshot=ctx.getImageData(0,0,canvas.width,canvas.height)},stopDraw=function(){isDrawing=!1},drawRect=function(e){if(!fillColor.checked)return ctx.strokeRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY);ctx.fillRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY)},drawCircle=function(e){ctx.beginPath();e=Math.sqrt(Math.pow(prevMouseX-e.offsetX,2)+Math.pow(prevMouseY-e.offsetY,2));if(ctx.arc(prevMouseX,prevMouseY,e,0,2*Math.PI),fillColor.checked)return ctx.fill();ctx.stroke()},drawTriangle=function(e){if(ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.lineTo(2*prevMouseX-e.offsetX,e.offsetY),ctx.closePath(),fillColor.checked)return ctx.fill();ctx.stroke()},drawLine=function(e){ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke()},addTextInput=function(t){var o=document.createElement("input");o.type="text",o.style.position="absolute",o.style.left=t.pageX+"px",o.style.top=t.pageY+"px",o.style.zIndex="10000000",o.id="text-input",document.body.appendChild(o),o.focus(),o.addEventListener("keydown",function(e){13===e.keyCode&&(ctx.fillStyle=selectedColor,ctx.font="15px sans-serif",ctx.fillText(o.value,t.offsetX,t.offsetY+20),o.remove())}),t.preventDefault()},drawing=function(e){if(isDrawing)switch(ctx.putImageData(snapshot,0,0),selectedTool){case"brush":ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke();break;case"rectangle":drawRect(e);break;case"circle":drawCircle(e);break;case"triangle":drawTriangle(e);break;case"line":drawLine(e)}},registerEvents=function(){"text"===selectedTool?canvas.addEventListener("click",addTextInput):(canvas.removeEventListener("click",addTextInput),canvas.addEventListener("mousemove",drawing))};toolsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .active").classList.remove("active"),e.classList.add("active"),selectedTool=e.id,registerEvents()})}),colorDiv.addEventListener("input",setColor),sizeSlider.addEventListener("change",function(){brushWidth=sizeSlider.value}),colorsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .selected").classList.remove("selected"),e.classList.add("selected"),selectedColor=window.getComputedStyle(e).getPropertyValue("background-color")})}),clearCanvas.addEventListener("click",function(){ctx.clearRect(0,0,canvas.width,canvas.height)}),checkBtn.addEventListener("click",function(){answerCard.classList.toggle("a-active"),drawingCard.classList.toggle("d-active"),answerBtns.forEach(function(e){e.classList.toggle("b-active")})}),canvas.addEventListener("mousedown",startDraw),canvas.addEventListener("mouseup",stopDraw),canvas.addEventListener("mouseleave",stopDraw),registerEvents();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYXcuanMiXSwibmFtZXMiOlsicHJldk1vdXNlWCIsInByZXZNb3VzZVkiLCJzbmFwc2hvdCIsImNvbG9yRGl2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29sb3JQaWNrZXIiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJ3aWxsUmVhZEZyZXF1ZW50bHkiLCJjb2xvcnNCdG5zIiwicXVlcnlTZWxlY3RvckFsbCIsInRvb2xzQnRucyIsImZpbGxDb2xvciIsImNsZWFyQ2FudmFzIiwiY2hlY2tCdG4iLCJhbnN3ZXJCdG5zIiwiaXNEcmF3aW5nIiwiYnJ1c2hXaWR0aCIsInNlbGVjdGVkVG9vbCIsInNlbGVjdGVkQ29sb3IiLCJkYXRhIiwid2luZG93Iiwib2Zmc2V0V2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwidmFsdWUiLCJzdGFydERyYXciLCJvZmZzZXRZIiwiYmVnaW5QYXRoIiwibGluZVdpZHRoIiwib2Zmc2V0WCIsInN0cm9rZVN0eWxlIiwiZmlsbFN0eWxlIiwiZ2V0SW1hZ2VEYXRhIiwic3RvcERyYXciLCJjaGVja2VkIiwiZHJhd1JlY3QiLCJlIiwiZHJhd0NpcmNsZSIsImZpbGwiLCJmaWxsUmVjdCIsImRyYXdUcmlhbmdsZSIsInJhZGl1cyIsIk1hdGgiLCJzcXJ0IiwicG93IiwiYXJjIiwiUEkiLCJsaW5lVG8iLCJzdHJva2UiLCJ0ZXh0SW5wdXQiLCJmb2N1cyIsImV2ZW50IiwiZmlsbFRleHQiLCJtb3ZlVG8iLCJwcmV2ZW50RGVmYXVsdCIsImFkZFRleHRJbnB1dCIsInB1dEltYWdlRGF0YSIsImNyZWF0ZUVsZW1lbnQiLCJwb3NpdGlvbiIsInBhZ2VYIiwidG9wIiwicGFnZVkiLCJ6SW5kZXgiLCJpZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImtleUNvZGUiLCJkcmF3TGluZSIsInJlZ2lzdGVyRXZlbnRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJ0biIsInNpemVTbGlkZXIiLCJjbGVhclJlY3QiLCJhbnN3ZXJDYXJkIiwidG9nZ2xlIiwiZHJhd2luZyIsImZvckVhY2giLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJzZXRDb2xvciIsImFkZCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZHJhd2luZ0NhcmQiLCJlbGVtZW50Il0sIm1hcHBpbmdzIjoiYUFBQSxJQW9CSUEsV0FBWUMsV0FBWUMsU0FwQnRCQyxTQUFXQyxTQUFTQyxjQUFjLFdBQVcsRUFDN0NDLFlBQWNGLFNBQVNHLGVBQWUsY0FBYyxFQURwREosT0FBV0MsU0FBU0MsY0FBYyxTQUFBLEVBQ2xDQyxJQUFBQSxPQUFjRixXQUFTRyxLQUFBQSxDQUFBQSxtQkFBOEIsQ0FBQSxDQUFBLENBQUEsRUFDckRDLFVBQVNKLFNBQVNDLGlCQUFjLE9BQVUsRUFDMUNJLFVBQWFDLFNBQVVMLGNBQU8sYUFBQSxFQUFFTSxXQUFBQSxTQUFvQk4sY0FBQSxjQUFBLEVBQU9PLFdBQUFSLFNBQUFTLGlCQUFBLGlCQUFBLEVBQzNEQyxZQUFZVixTQUFTUyxjQUFpQixlQUFRLEVBQzlDRSxXQUFZWCxTQUFTQyxjQUMzQixrREFBMEMsRUFFcENXLFlBQWNaLFNBQVNDLGNBQzdCLG1EQUNDLEVBS0tZLFNBQVdiLFNBQVNDLGNBQWMsZUFBZ0IsRUFDbERhLFdBQWFkLFNBQVNTLGlCQUFpQixnQkFBaUIsRUFDMURNLFVBQVksQ0FBQSxFQUNaQyxXQUFhLEVBQ2JDLGFBQWUsUUFFZkMsY0FBZ0IsVUFDaEJDLEtBQU8sRUFTVkQsVUFQREUsT0FDQ2hCLGlCQUFzQmlCLE9BQUFBLFdBQXRCakIsT0FDTWtCLE1BQU9sQixPQUFHQSxZQUNoQkEsT0FBQ21CLE9BQUFuQixPQUFBb0IsWUFFRixDQUFBLEVBRWMsV0FDYnpCLFNBQUEwQixNQUFBQyxnQkFBQXhCLFlBQUF5QixNQUVEVCxjQUFrQmhCLFlBQVowQixLQUZOLEdBS0MvQixVQUFlZ0MsU0FBQUEsR0FG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Q0FBQyxFQUVEVixTQUFTMkQsaUJBQWlCLFFBQVMsV0FDbENJLFdBQVdLLFVBQVVKLE9BQU8sVUFBVSxFQUN0Q1MsWUFBWUwsVUFBVUosT0FBTyxVQUFVLEVBQ3ZDL0QsV0FBV2lFLFFBQVEsU0FBQ1EsR0FDbkJBLEVBQVFOLFVBQVVKLE9BQU8sVUFBVSxDQUNwQyxDQUFDLENBQ0YsQ0FBQyxFQUVEekUsT0FBT29FLGlCQUFpQixZQUFhNUMsU0FBUyxFQUM5Q3hCLE9BQU9vRSxpQkFBaUIsVUFBV3BDLFFBQVEsRUFDM0NoQyxPQUFPb0UsaUJBQWlCLGFBQWNwQyxRQUFRLEVBRTlDbUMsZUFBYyIsImZpbGUiOiJkcmF3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29sb3JEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldENvbG9yXCIpO1xyXG5jb25zdCBjb2xvclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3ItcGlja2VyXCIpO1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbnZhc1wiKTtcclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcclxuY29uc3QgdG9vbHNCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b29sXCIpO1xyXG5jb25zdCBmaWxsQ29sb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpbGwtY29sb3JcIik7XHJcbmNvbnN0IHNpemVTbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NpemUtc2xpZGVyXCIpO1xyXG5jb25zdCBjb2xvcnNCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb2xvcnMgLm9wdGlvblwiKTtcclxuY29uc3QgY2xlYXJDYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsZWFyLWNhbnZhc1wiKTtcclxuY29uc3QgYW5zd2VyQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1hbnN3ZXItYm9hcmRcIlxyXG4pO1xyXG5jb25zdCBkcmF3aW5nQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1kcmF3aW5nLWJvYXJkXCJcclxuKTtcclxuY29uc3QgY2hlY2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrLWFuc3dlclwiKTtcclxuY29uc3QgYW5zd2VyQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnV0dG9uLWFuc3dlclwiKTtcclxubGV0IGlzRHJhd2luZyA9IGZhbHNlO1xyXG5sZXQgYnJ1c2hXaWR0aCA9IDU7XHJcbmxldCBzZWxlY3RlZFRvb2wgPSBcImJydXNoXCI7XHJcbmxldCBwcmV2TW91c2VYLCBwcmV2TW91c2VZLCBzbmFwc2hvdDtcclxubGV0IHNlbGVjdGVkQ29sb3IgPSBcIiMwMDAwMDBcIjtcclxubGV0IGRhdGEgPSAwO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuXHRjYW52YXMud2lkdGggPSBjYW52YXMub2Zmc2V0V2lkdGg7XHJcblx0Y2FudmFzLmhlaWdodCA9IGNhbnZhcy5vZmZzZXRIZWlnaHQ7XHJcbn0pO1xyXG5cclxuY29uc3Qgc2V0Q29sb3IgPSAoKSA9PiB7XHJcblx0Y29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcblx0c2VsZWN0ZWRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnREcmF3ID0gKGUpID0+IHtcclxuXHRpc0RyYXdpbmcgPSB0cnVlO1xyXG5cdHByZXZNb3VzZVggPSBlLm9mZnNldFg7XHJcblx0cHJldk1vdXNlWSA9IGUub2Zmc2V0WTtcclxuXHRjdHguYmVnaW5QYXRoKCk7XHJcblx0Y3R4LmxpbmVXaWR0aCA9IGJydXNoV2lkdGg7XHJcblx0Y3R4LnN0cm9rZVN0eWxlID0gc2VsZWN0ZWRDb2xvcjtcclxuXHRjdHguZmlsbFN0eWxlID0gc2VsZWN0ZWRDb2xvcjtcclxuXHRzbmFwc2hvdCA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxufTtcclxuXHJcbmNvbnN0IHN0b3BEcmF3ID0gKCkgPT4ge1xyXG5cdGlzRHJhd2luZyA9IGZhbHNlO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd1JlY3QgPSAoZSkgPT4ge1xyXG5cdGlmICghZmlsbENvbG9yLmNoZWNrZWQpIHtcclxuXHRcdHJldHVybiBjdHguc3Ryb2tlUmVjdChcclxuXHRcdFx0ZS5vZmZzZXRYLFxyXG5cdFx0XHRlLm9mZnNldFksXHJcblx0XHRcdHByZXZNb3VzZVggLSBlLm9mZnNldFgsXHJcblx0XHRcdHByZXZNb3VzZVkgLSBlLm9mZnNldFlcclxuXHRcdCk7XHJcblx0fVxyXG5cdGN0eC5maWxsUmVjdChcclxuXHRcdGUub2Zmc2V0WCxcclxuXHRcdGUub2Zmc2V0WSxcclxuXHRcdHByZXZNb3VzZVggLSBlLm9mZnNldFgsXHJcblx0XHRwcmV2TW91c2VZIC0gZS5vZmZzZXRZXHJcblx0KTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdDaXJjbGUgPSAoZSkgPT4ge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KFxyXG5cdFx0TWF0aC5wb3cocHJldk1vdXNlWCAtIGUub2Zmc2V0WCwgMikgKyBNYXRoLnBvdyhwcmV2TW91c2VZIC0gZS5vZmZzZXRZLCAyKVxyXG5cdCk7XHJcblx0Y3R4LmFyYyhwcmV2TW91c2VYLCBwcmV2TW91c2VZLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHRpZiAoZmlsbENvbG9yLmNoZWNrZWQpIHtcclxuXHRcdHJldHVybiBjdHguZmlsbCgpO1xyXG5cdH1cclxuXHRjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3VHJpYW5nbGUgPSAoZSkgPT4ge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHgubW92ZVRvKHByZXZNb3VzZVgsIHByZXZNb3VzZVkpO1xyXG5cdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdGN0eC5saW5lVG8ocHJldk1vdXNlWCAqIDIgLSBlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcblx0Y3R4LmNsb3NlUGF0aCgpO1xyXG5cdGlmIChmaWxsQ29sb3IuY2hlY2tlZCkge1xyXG5cdFx0cmV0dXJuIGN0eC5maWxsKCk7XHJcblx0fVxyXG5cdGN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdMaW5lID0gKGUpID0+IHtcclxuXHRjdHguYmVnaW5QYXRoKCk7XHJcblx0Y3R4Lm1vdmVUbyhwcmV2TW91c2VYLCBwcmV2TW91c2VZKTtcclxuXHRjdHgubGluZVRvKGUub2Zmc2V0WCwgZS5vZmZzZXRZKTtcclxuXHRjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRUZXh0SW5wdXQgPSAoZSkgPT4ge1xyXG5cdGNvbnN0IHRleHRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuXHR0ZXh0SW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG5cdHRleHRJbnB1dC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHR0ZXh0SW5wdXQuc3R5bGUubGVmdCA9IGUucGFnZVggKyBcInB4XCI7XHJcblx0dGV4dElucHV0LnN0eWxlLnRvcCA9IGUucGFnZVkgKyBcInB4XCI7XHJcblx0dGV4dElucHV0LnN0eWxlLnpJbmRleCA9IFwiMTAwMDAwMDBcIjtcclxuXHR0ZXh0SW5wdXQuaWQgPSBcInRleHQtaW5wdXRcIjtcclxuXHJcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0SW5wdXQpO1xyXG5cdHRleHRJbnB1dC5mb2N1cygpO1xyXG5cdHRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG5cdFx0XHRjdHguZmlsbFN0eWxlID0gc2VsZWN0ZWRDb2xvcjtcclxuXHRcdFx0Y3R4LmZvbnQgPSBcIjE1cHggc2Fucy1zZXJpZlwiO1xyXG5cclxuXHRcdFx0Y3R4LmZpbGxUZXh0KHRleHRJbnB1dC52YWx1ZSwgZS5vZmZzZXRYLCBlLm9mZnNldFkgKyAyMCk7XHJcblx0XHRcdHRleHRJbnB1dC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3aW5nID0gKGUpID0+IHtcclxuXHRpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xyXG5cdGN0eC5wdXRJbWFnZURhdGEoc25hcHNob3QsIDAsIDApO1xyXG5cclxuXHRzd2l0Y2ggKHNlbGVjdGVkVG9vbCkge1xyXG5cdFx0Y2FzZSBcImJydXNoXCI6XHJcblx0XHRcdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdFx0XHRjdHguc3Ryb2tlKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcInJlY3RhbmdsZVwiOlxyXG5cdFx0XHRkcmF3UmVjdChlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiY2lyY2xlXCI6XHJcblx0XHRcdGRyYXdDaXJjbGUoZSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcInRyaWFuZ2xlXCI6XHJcblx0XHRcdGRyYXdUcmlhbmdsZShlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwibGluZVwiOlxyXG5cdFx0XHRkcmF3TGluZShlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHRicmVhaztcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCByZWdpc3RlckV2ZW50cyA9ICgpID0+IHtcclxuXHRpZiAoc2VsZWN0ZWRUb29sID09PSBcInRleHRcIikge1xyXG5cdFx0Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRUZXh0SW5wdXQpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZFRleHRJbnB1dCk7XHJcblx0XHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBkcmF3aW5nKTtcclxuXHR9XHJcbn07XHJcblxyXG50b29sc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wdGlvbnMgLmFjdGl2ZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG5cdFx0YnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0XHRzZWxlY3RlZFRvb2wgPSBidG4uaWQ7XHJcblx0XHRyZWdpc3RlckV2ZW50cygpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbmNvbG9yRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzZXRDb2xvcik7XHJcblxyXG5zaXplU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdGJydXNoV2lkdGggPSBzaXplU2xpZGVyLnZhbHVlO1xyXG59KTtcclxuXHJcbmNvbG9yc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wdGlvbnMgLnNlbGVjdGVkXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuXHRcdGJ0bi5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcblx0XHRzZWxlY3RlZENvbG9yID0gd2luZG93XHJcblx0XHRcdC5nZXRDb21wdXRlZFN0eWxlKGJ0bilcclxuXHRcdFx0LmdldFByb3BlcnR5VmFsdWUoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbmNsZWFyQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0Y3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG59KTtcclxuXHJcbmNoZWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0YW5zd2VyQ2FyZC5jbGFzc0xpc3QudG9nZ2xlKFwiYS1hY3RpdmVcIik7XHJcblx0ZHJhd2luZ0NhcmQuY2xhc3NMaXN0LnRvZ2dsZShcImQtYWN0aXZlXCIpO1xyXG5cdGFuc3dlckJ0bnMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0ZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYi1hY3RpdmVcIik7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgc3RhcnREcmF3KTtcclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHN0b3BEcmF3KTtcclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHN0b3BEcmF3KTtcclxuXHJcbnJlZ2lzdGVyRXZlbnRzKCk7XHJcbiJdfQ==
