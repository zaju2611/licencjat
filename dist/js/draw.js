"use strict";var prevMouseX,prevMouseY,snapshot,colorDiv=document.querySelector(".setColor"),colorPicker=document.getElementById("color-picker"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),toolsBtns=document.querySelectorAll(".tool"),fillColor=document.querySelector("#fill-color"),sizeSlider=document.querySelector("#size-slider"),colorsBtns=document.querySelectorAll(".colors .option"),clearCanvas=document.querySelector(".clear-canvas"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),checkBtn=document.querySelector(".check-answer"),answerBtns=document.querySelectorAll(".button-answer"),isDrawing=!1,brushWidth=5,selectedTool="brush",selectedColor="#000000",data=0,setColor=(window.addEventListener("load",function(){canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight}),function(){colorDiv.style.backgroundColor=colorPicker.value,selectedColor=colorPicker.value}),startDraw=function(e){isDrawing=!0,prevMouseX=e.offsetX,prevMouseY=e.offsetY,ctx.beginPath(),ctx.lineWidth=brushWidth,ctx.strokeStyle=selectedColor,ctx.fillStyle=selectedColor,snapshot=ctx.getImageData(0,0,canvas.width,canvas.height)},stopDraw=function(){isDrawing=!1},drawRect=function(e){if(!fillColor.checked)return ctx.strokeRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY);ctx.fillRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY)},drawCircle=function(e){ctx.beginPath();e=Math.sqrt(Math.pow(prevMouseX-e.offsetX,2)+Math.pow(prevMouseY-e.offsetY,2));if(ctx.arc(prevMouseX,prevMouseY,e,0,2*Math.PI),fillColor.checked)return ctx.fill();ctx.stroke()},drawTriangle=function(e){if(ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.lineTo(2*prevMouseX-e.offsetX,e.offsetY),ctx.closePath(),fillColor.checked)return ctx.fill();ctx.stroke()},drawLine=function(e){ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke()},removeDrawing=function(e){ctx.strokeStyle="#fff",ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke()},drawing=function(e){if(isDrawing)switch(ctx.putImageData(snapshot,0,0),selectedTool){case"brush":ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke();break;case"rectangle":drawRect(e);break;case"circle":drawCircle(e);break;case"triangle":drawTriangle(e);break;case"line":drawLine(e);break;case"eraser":removeDrawing(e)}};toolsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .active").classList.remove("active"),e.classList.add("active"),selectedTool=e.id})}),colorDiv.addEventListener("input",setColor),sizeSlider.addEventListener("change",function(){brushWidth=sizeSlider.value}),colorsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .selected").classList.remove("selected"),e.classList.add("selected"),selectedColor=window.getComputedStyle(e).getPropertyValue("background-color")})}),clearCanvas.addEventListener("click",function(){ctx.clearRect(0,0,canvas.width,canvas.height)}),checkBtn.addEventListener("click",function(){answerCard.classList.toggle("a-active"),drawingCard.classList.toggle("d-active"),answerBtns.forEach(function(e){e.classList.toggle("b-active")})}),canvas.addEventListener("mousedown",startDraw),canvas.addEventListener("mouseup",stopDraw),canvas.addEventListener("mousemove",drawing);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYXcuanMiXSwibmFtZXMiOlsicHJldk1vdXNlWCIsInByZXZNb3VzZVkiLCJzbmFwc2hvdCIsImNvbG9yRGl2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29sb3JQaWNrZXIiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJ3aWxsUmVhZEZyZXF1ZW50bHkiLCJjb2xvcnNCdG5zIiwicXVlcnlTZWxlY3RvckFsbCIsInRvb2xzQnRucyIsImZpbGxDb2xvciIsImNsZWFyQ2FudmFzIiwiY2hlY2tCdG4iLCJhbnN3ZXJCdG5zIiwiaXNEcmF3aW5nIiwiYnJ1c2hXaWR0aCIsInNlbGVjdGVkVG9vbCIsInNlbGVjdGVkQ29sb3IiLCJkYXRhIiwid2luZG93Iiwib2Zmc2V0V2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwidmFsdWUiLCJzdGFydERyYXciLCJvZmZzZXRZIiwiYmVnaW5QYXRoIiwibGluZVdpZHRoIiwib2Zmc2V0WCIsInN0cm9rZVN0eWxlIiwiZmlsbFN0eWxlIiwiZ2V0SW1hZ2VEYXRhIiwic3RvcERyYXciLCJjaGVja2VkIiwiZHJhd1JlY3QiLCJlIiwiZHJhd0NpcmNsZSIsImZpbGwiLCJmaWxsUmVjdCIsImRyYXdUcmlhbmdsZSIsInJhZGl1cyIsIk1hdGgiLCJzcXJ0IiwicG93IiwiYXJjIiwiUEkiLCJsaW5lVG8iLCJzdHJva2UiLCJtb3ZlVG8iLCJkcmF3aW5nIiwiY2xvc2VQYXRoIiwicHV0SW1hZ2VEYXRhIiwicmVtb3ZlRHJhd2luZyIsImRyYXdMaW5lIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNpemVTbGlkZXIiLCJmb3JFYWNoIiwiY2xhc3NMaXN0IiwiZWxlbWVudCIsInRvZ2dsZSIsInJlbW92ZSIsImFkZCIsInNldENvbG9yIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJjbGVhclJlY3QiLCJhbnN3ZXJDYXJkIiwiZHJhd2luZ0NhcmQiXSwibWFwcGluZ3MiOiJhQUFBLElBb0JJQSxXQUFZQyxXQUFZQyxTQXBCdEJDLFNBQVdDLFNBQVNDLGNBQWMsV0FBVyxFQUM3Q0MsWUFBY0YsU0FBU0csZUFBZSxjQUFjLEVBRHBESixPQUFXQyxTQUFTQyxjQUFjLFNBQUEsRUFDbENDLElBQUFBLE9BQWNGLFdBQVNHLEtBQUFBLENBQUFBLG1CQUE4QixDQUFBLENBQUEsQ0FBQSxFQUNyREMsVUFBU0osU0FBU0MsaUJBQWMsT0FBVSxFQUMxQ0ksVUFBYUMsU0FBVUwsY0FBTyxhQUFBLEVBQUVNLFdBQUFBLFNBQW9CTixjQUFBLGNBQUEsRUFBT08sV0FBQVIsU0FBQVMsaUJBQUEsaUJBQUEsRUFDM0RDLFlBQVlWLFNBQVNTLGNBQWlCLGVBQVEsRUFDOUNFLFdBQVlYLFNBQVNDLGNBQzNCLGtEQUEwQyxFQUVwQ1csWUFBY1osU0FBU0MsY0FDN0IsbURBQ0MsRUFLS1ksU0FBV2IsU0FBU0MsY0FBYyxlQUFnQixFQUNsRGEsV0FBYWQsU0FBU1MsaUJBQWlCLGdCQUFpQixFQUMxRE0sVUFBWSxDQUFBLEVBQ1pDLFdBQWEsRUFDYkMsYUFBZSxRQUVmQyxjQUFnQixVQUNoQkMsS0FBTyxFQVNWRCxVQVBERSxPQUNDaEIsaUJBQXNCaUIsT0FBQUEsV0FBdEJqQixPQUNNa0IsTUFBT2xCLE9BQUdBLFlBQ2hCQSxPQUFDbUIsT0FBQW5CLE9BQUFvQixZQUVGLENBQUEsRUFFYyxXQUNiekIsU0FBQTBCLE1BQUFDLGdCQUFBeEIsWUFBQXlCLE1BRURULGNBQWtCaEIsWUFBWjBCLEtBRk4sR0FLQy9CLFVBQWVnQyxTQUFBQSxHQUZmZCxVQUdJZSxDQUFBQSxFQUZKbEMsV0FHSW1DLEVBQVNDLFFBRmJuQyxXQUdJb0MsRUFBQUEsUUFGSjVCLElBR0d5QixVQUFDSSxFQUZKN0IsSUFHQVAsVUFBZXFDLFdBQ2Y5QixJQUFBNEIsWUFBQWYsY0FFRGIsSUFBTStCLFVBQVdsQixjQUhoQnBCLFNBSVNPLElBQUc4QixhQUFLLEVBQUEsRUFBQS9CLE9BQUFrQixNQUFBbEIsT0FBQW1CLE1BQUEsQ0FDbEIsRUFHS2EsU0FBV0MsV0FKZnRCLFVBS1FWLENBQUFBLENBSlQsRUFpQkNpQyxTQUFBLFNBQUFDLEdBRUQsR0FBTUMsQ0FBQUEsVUFBVUgsUUFDZmhDLE9BQUl5QixJQUFBQSxXQUNKUyxFQUFBUCxRQUdBM0IsRUFBR3dCLFFBQ0hqQyxXQUFjeUMsRUFBQUEsUUFqQlp4QyxXQWtCVTRDLEVBQUFBLE9BQU0sRUFHbEJwQyxJQUFBcUMsU0FFREgsRUFBTUksUUFDTHRDLEVBQUFBLFFBQ0FBLFdBQVdULEVBQUFBLFFBQ1hTLFdBQWEyQixFQUFBQSxPQUFTTyxDQWpCdkIsRUFxQkVDLFdBQWUsU0FBQUQsR0FsQmhCbEMsSUFtQkF5QixVQUFBLEVBQ0djLEVBQVNDLEtBQUFDLEtBQ1pELEtBQUFFLElBQUFuRCxXQUFBMkMsRUFBQVAsUUFBQSxDQUFBLEVBQUFhLEtBQUFFLElBQUFsRCxXQUFBMEMsRUFBQVYsUUFBQSxDQUFBLENBQUEsRUFoQkEsR0FEQXhCLElBb0JHMkMsSUFBQ2xCLFdBQVdqQyxXQUFBK0MsRUFBQSxFQUFBLEVBQUFDLEtBQUFJLEVBQUEsRUFDWnRDLFVBQVFmLFFBQ1hTLE9BQUk2QyxJQUFPWCxLQUFFUCxFQUViM0IsSUFBQThDLE9BQUEsQ0FFRCxFQUVLRCxhQUFTbEIsU0FBT08sR0FmcEIsR0FMQWxDLElBcUJHeUIsVUFBUyxFQUNaekIsSUFBQStDLE9BQUF4RCxXQUFBQyxVQUFBLEVBRURRLElBQU1nRCxPQUFPZCxFQUFHUCxRQUFWcUIsRUFBQUEsT0FBWSxFQXJCakJoRCxJQXNCQTZDLE9BQWdCLEVBQVhuQyxXQUFXd0IsRUFBQVAsUUFBQU8sRUFBQVYsT0FBQSxFQXJCaEJ4QixJQXNCR2lELFVBQUNDLEVBRUo1QyxVQUFRTSxRQXRCUCxPQXVCS1osSUFBQW9DLEtBQU8sRUFyQmJwQyxJQUFJOEMsT0F1QkVBLENBdEJQLEVBeUJHYixTQUFXLFNBQUFDLEdBdEJibEMsSUFBSXlCLFVBdUJGLEVBdEJGekIsSUF1QkMrQyxPQUFLeEQsV0FBUUMsVUFBQSxFQXRCZFEsSUFBSTZDLE9BdUJGVixFQUFBQSxRQUFhRCxFQUFBVixPQUFBLEVBdEJmeEIsSUFBSThDLE9BdUJGLENBdEJILEVBeUJHSyxjQUFBLFNBQUFqQixHQXRCRmxDLElBdUJDNEIsWUFBVyxPQXRCWjVCLElBQUk2QyxPQXVCRk8sRUFBUXpCLFFBQUdPLEVBQUFWLE9BQUEsRUF0QmJ4QixJQUFJOEMsT0F1QkYsQ0F0QkgsRUF5QkdFLFFBQUEsU0FBQWQsR0F0QkYsR0F1QkN4QixVQUdELE9BekJBVixJQUFJa0QsYUF1QkZ6RCxTQUFBLEVBQUEsQ0FBQSxFQUVGbUIsY0FFRFAsSUFBQUEsUUFDQ2dELElBQUlDLE9BQUFBLEVBQUFBLFFBQWlCcEIsRUFBQVYsT0FBUyxFQXZCNUJ4QixJQXdCREwsT0FBU0MsRUF2QlIsTUFDRCxJQXdCQWdCLFlBQ0FxQixTQUFDQyxDQUFBLEVBQ0QsTUFFRnhDLElBQUFBLFNBRUE2RCxXQUFXRCxDQUFBQSxFQUNWM0MsTUFDQyxJQUFBLFdBRUZSLGFBQVdxRCxDQUFBQSxFQUNWSCxNQTFCQyxJQTJCQTFELE9BMUJDeUQsU0EyQkdLLENBQUFBLEVBMUJILE1BOEJGLElBQUUsU0FDRE4sY0FBQWpCLENBQUEsQ0FJQSxDQTVCRixFQUVBN0IsVUErQkNJLFFBQVcrQyxTQUFBQSxHQTlCWEgsRUErQkNLLGlCQUFrQkMsUUFBTyxXQUMxQmhFLFNBQUVDLGNBQUEsa0JBQUEsRUFBQTZELFVBQUFHLE9BQUEsUUFBQSxFQUNEUCxFQUFBSSxVQUFBSSxJQUFBLFFBQUEsRUFFRjlELGFBQU91RCxFQUFBQSxFQUNQdkQsQ0FBQUEsQ0FDQUEsQ0FBQUEsRUE5QkFMLFNBQVM0RCxpQkFBaUIsUUFBU1EsUUFBUSxFQUUzQ1AsV0FBV0QsaUJBQWlCLFNBQVUsV0FDckMzQyxXQUFhNEMsV0FBV2pDLEtBQ3pCLENBQUMsRUFFRG5CLFdBQVdxRCxRQUFRLFNBQUNILEdBQ25CQSxFQUFJQyxpQkFBaUIsUUFBUyxXQUM3QjNELFNBQVNDLGNBQWMsb0JBQW9CLEVBQUU2RCxVQUFVRyxPQUFPLFVBQVUsRUFDeEVQLEVBQUlJLFVBQVVJLElBQUksVUFBVSxFQUM1QmhELGNBQWdCRSxPQUNkZ0QsaUJBQWlCVixDQUFHLEVBQ3BCVyxpQkFBaUIsa0JBQWtCLENBQ3RDLENBQUMsQ0FDRixDQUFDLEVBRUR6RCxZQUFZK0MsaUJBQWlCLFFBQVMsV0FDckN0RCxJQUFJaUUsVUFBVSxFQUFHLEVBQUdsRSxPQUFPa0IsTUFBT2xCLE9BQU9tQixNQUFNLENBQ2hELENBQUMsRUFFRFYsU0FBUzhDLGlCQUFpQixRQUFTLFdBQ2xDWSxXQUFXVCxVQUFVRSxPQUFPLFVBQVUsRUFDdENRLFlBQVlWLFVBQVVFLE9BQU8sVUFBVSxFQUN2Q2xELFdBQVcrQyxRQUFRLFNBQUNFLEdBQ25CQSxFQUFRRCxVQUFVRSxPQUFPLFVBQVUsQ0FDcEMsQ0FBQyxDQUNGLENBQUMsRUFFRDVELE9BQU91RCxpQkFBaUIsWUFBYS9CLFNBQVMsRUFDOUN4QixPQUFPdUQsaUJBQWlCLFVBQVd2QixRQUFRLEVBQzNDaEMsT0FBT3VELGlCQUFpQixZQUFhTixPQUFPIiwiZmlsZSI6ImRyYXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb2xvckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0Q29sb3JcIik7XHJcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvci1waWNrZXJcIik7XHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG5jb25zdCB0b29sc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvb2xcIik7XHJcbmNvbnN0IGZpbGxDb2xvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsbC1jb2xvclwiKTtcclxuY29uc3Qgc2l6ZVNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2l6ZS1zbGlkZXJcIik7XHJcbmNvbnN0IGNvbG9yc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbG9ycyAub3B0aW9uXCIpO1xyXG5jb25zdCBjbGVhckNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXItY2FudmFzXCIpO1xyXG5jb25zdCBhbnN3ZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWFuc3dlci1ib2FyZFwiXHJcbik7XHJcbmNvbnN0IGRyYXdpbmdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWRyYXdpbmctYm9hcmRcIlxyXG4pO1xyXG5jb25zdCBjaGVja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2stYW5zd2VyXCIpO1xyXG5jb25zdCBhbnN3ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tYW5zd2VyXCIpO1xyXG5sZXQgaXNEcmF3aW5nID0gZmFsc2U7XHJcbmxldCBicnVzaFdpZHRoID0gNTtcclxubGV0IHNlbGVjdGVkVG9vbCA9IFwiYnJ1c2hcIjtcclxubGV0IHByZXZNb3VzZVgsIHByZXZNb3VzZVksIHNuYXBzaG90O1xyXG5sZXQgc2VsZWN0ZWRDb2xvciA9IFwiIzAwMDAwMFwiO1xyXG5sZXQgZGF0YSA9IDA7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG5cdGNhbnZhcy53aWR0aCA9IGNhbnZhcy5vZmZzZXRXaWR0aDtcclxuXHRjYW52YXMuaGVpZ2h0ID0gY2FudmFzLm9mZnNldEhlaWdodDtcclxufSk7XHJcblxyXG5jb25zdCBzZXRDb2xvciA9ICgpID0+IHtcclxuXHRjb2xvckRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclBpY2tlci52YWx1ZTtcclxuXHRzZWxlY3RlZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcbn07XHJcblxyXG5jb25zdCBzdGFydERyYXcgPSAoZSkgPT4ge1xyXG5cdGlzRHJhd2luZyA9IHRydWU7XHJcblx0cHJldk1vdXNlWCA9IGUub2Zmc2V0WDtcclxuXHRwcmV2TW91c2VZID0gZS5vZmZzZXRZO1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHgubGluZVdpZHRoID0gYnJ1c2hXaWR0aDtcclxuXHRjdHguc3Ryb2tlU3R5bGUgPSBzZWxlY3RlZENvbG9yO1xyXG5cdGN0eC5maWxsU3R5bGUgPSBzZWxlY3RlZENvbG9yO1xyXG5cdHNuYXBzaG90ID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG59O1xyXG5cclxuY29uc3Qgc3RvcERyYXcgPSAoKSA9PiB7XHJcblx0aXNEcmF3aW5nID0gZmFsc2U7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3UmVjdCA9IChlKSA9PiB7XHJcblx0aWYgKCFmaWxsQ29sb3IuY2hlY2tlZCkge1xyXG5cdFx0cmV0dXJuIGN0eC5zdHJva2VSZWN0KFxyXG5cdFx0XHRlLm9mZnNldFgsXHJcblx0XHRcdGUub2Zmc2V0WSxcclxuXHRcdFx0cHJldk1vdXNlWCAtIGUub2Zmc2V0WCxcclxuXHRcdFx0cHJldk1vdXNlWSAtIGUub2Zmc2V0WVxyXG5cdFx0KTtcclxuXHR9XHJcblx0Y3R4LmZpbGxSZWN0KFxyXG5cdFx0ZS5vZmZzZXRYLFxyXG5cdFx0ZS5vZmZzZXRZLFxyXG5cdFx0cHJldk1vdXNlWCAtIGUub2Zmc2V0WCxcclxuXHRcdHByZXZNb3VzZVkgLSBlLm9mZnNldFlcclxuXHQpO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd0NpcmNsZSA9IChlKSA9PiB7XHJcblx0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdGxldCByYWRpdXMgPSBNYXRoLnNxcnQoXHJcblx0XHRNYXRoLnBvdyhwcmV2TW91c2VYIC0gZS5vZmZzZXRYLCAyKSArIE1hdGgucG93KHByZXZNb3VzZVkgLSBlLm9mZnNldFksIDIpXHJcblx0KTtcclxuXHRjdHguYXJjKHByZXZNb3VzZVgsIHByZXZNb3VzZVksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG5cdGlmIChmaWxsQ29sb3IuY2hlY2tlZCkge1xyXG5cdFx0cmV0dXJuIGN0eC5maWxsKCk7XHJcblx0fVxyXG5cdGN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdUcmlhbmdsZSA9IChlKSA9PiB7XHJcblx0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdGN0eC5tb3ZlVG8ocHJldk1vdXNlWCwgcHJldk1vdXNlWSk7XHJcblx0Y3R4LmxpbmVUbyhlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcblx0Y3R4LmxpbmVUbyhwcmV2TW91c2VYICogMiAtIGUub2Zmc2V0WCwgZS5vZmZzZXRZKTtcclxuXHRjdHguY2xvc2VQYXRoKCk7XHJcblx0aWYgKGZpbGxDb2xvci5jaGVja2VkKSB7XHJcblx0XHRyZXR1cm4gY3R4LmZpbGwoKTtcclxuXHR9XHJcblx0Y3R4LnN0cm9rZSgpO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd0xpbmUgPSAoZSkgPT4ge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHgubW92ZVRvKHByZXZNb3VzZVgsIHByZXZNb3VzZVkpO1xyXG5cdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdGN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZURyYXdpbmcgPSAoZSkgPT4ge1xyXG5cdGN0eC5zdHJva2VTdHlsZSA9IFwiI2ZmZlwiO1xyXG5cdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdGN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdpbmcgPSAoZSkgPT4ge1xyXG5cdGlmICghaXNEcmF3aW5nKSByZXR1cm47XHJcblx0Y3R4LnB1dEltYWdlRGF0YShzbmFwc2hvdCwgMCwgMCk7XHJcblxyXG5cdHN3aXRjaCAoc2VsZWN0ZWRUb29sKSB7XHJcblx0XHRjYXNlIFwiYnJ1c2hcIjpcclxuXHRcdFx0Y3R4LmxpbmVUbyhlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcblx0XHRcdGN0eC5zdHJva2UoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwicmVjdGFuZ2xlXCI6XHJcblx0XHRcdGRyYXdSZWN0KGUpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCJjaXJjbGVcIjpcclxuXHRcdFx0ZHJhd0NpcmNsZShlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwidHJpYW5nbGVcIjpcclxuXHRcdFx0ZHJhd1RyaWFuZ2xlKGUpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCJsaW5lXCI6XHJcblx0XHRcdGRyYXdMaW5lKGUpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgXCJlcmFzZXJcIjpcclxuXHRcdFx0cmVtb3ZlRHJhd2luZyhlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHRicmVhaztcclxuXHR9XHJcbn07XHJcblxyXG50b29sc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wdGlvbnMgLmFjdGl2ZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG5cdFx0YnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0XHRzZWxlY3RlZFRvb2wgPSBidG4uaWQ7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuY29sb3JEaXYuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHNldENvbG9yKTtcclxuXHJcbnNpemVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcblx0YnJ1c2hXaWR0aCA9IHNpemVTbGlkZXIudmFsdWU7XHJcbn0pO1xyXG5cclxuY29sb3JzQnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuXHRidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3B0aW9ucyAuc2VsZWN0ZWRcIikuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xyXG5cdFx0YnRuLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuXHRcdHNlbGVjdGVkQ29sb3IgPSB3aW5kb3dcclxuXHRcdFx0LmdldENvbXB1dGVkU3R5bGUoYnRuKVxyXG5cdFx0XHQuZ2V0UHJvcGVydHlWYWx1ZShcImJhY2tncm91bmQtY29sb3JcIik7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuY2xlYXJDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbn0pO1xyXG5cclxuY2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRhbnN3ZXJDYXJkLmNsYXNzTGlzdC50b2dnbGUoXCJhLWFjdGl2ZVwiKTtcclxuXHRkcmF3aW5nQ2FyZC5jbGFzc0xpc3QudG9nZ2xlKFwiZC1hY3RpdmVcIik7XHJcblx0YW5zd2VyQnRucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJiLWFjdGl2ZVwiKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBzdGFydERyYXcpO1xyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYXcpO1xyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBkcmF3aW5nKTtcclxuIl19
