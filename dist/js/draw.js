"use strict";var prevMouseX,prevMouseY,snapshot,colorDiv=document.querySelector(".setColor"),colorPicker=document.getElementById("color-picker"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),toolsBtns=document.querySelectorAll(".tool"),fillColor=document.querySelector("#fill-color"),sizeSlider=document.querySelector("#size-slider"),colorsBtns=document.querySelectorAll(".colors .option"),clearCanvas=document.querySelector(".clear-canvas"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),checkBtn=document.querySelector(".check-answer"),answerBtns=document.querySelectorAll(".button-answer"),isDrawing=!1,brushWidth=5,selectedTool="brush",selectedColor="#000000",setColor=(window.addEventListener("load",function(){canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight}),function(){colorDiv.style.backgroundColor=colorPicker.value,selectedColor=colorPicker.value}),startDraw=function(e){isDrawing=!0,prevMouseX=e.offsetX,prevMouseY=e.offsetY,ctx.beginPath(),ctx.lineWidth=brushWidth,ctx.strokeStyle=selectedColor,ctx.fillStyle=selectedColor,snapshot=ctx.getImageData(0,0,canvas.width,canvas.height)},stopDraw=function(){isDrawing=!1},drawRect=function(e){if(!fillColor.checked)return ctx.strokeRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY);ctx.fillRect(e.offsetX,e.offsetY,prevMouseX-e.offsetX,prevMouseY-e.offsetY)},drawCircle=function(e){ctx.beginPath();e=Math.sqrt(Math.pow(prevMouseX-e.offsetX,2)+Math.pow(prevMouseY-e.offsetY,2));if(ctx.arc(prevMouseX,prevMouseY,e,0,2*Math.PI),fillColor.checked)return ctx.fill();ctx.stroke()},drawTriangle=function(e){if(ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.lineTo(2*prevMouseX-e.offsetX,e.offsetY),ctx.closePath(),fillColor.checked)return ctx.fill();ctx.stroke()},drawLine=function(e){ctx.beginPath(),ctx.moveTo(prevMouseX,prevMouseY),ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke()},removeDrawing=function(e){ctx.strokeStyle="#fff",ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke()},drawing=function(e){if(isDrawing)switch(ctx.putImageData(snapshot,0,0),selectedTool){case"brush":ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke();break;case"rectangle":drawRect(e);break;case"circle":drawCircle(e);break;case"triangle":drawTriangle(e);break;case"line":drawLine(e);break;case"eraser":removeDrawing(e)}};toolsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .active").classList.remove("active"),e.classList.add("active"),selectedTool=e.id,console.log(selectedTool)})}),colorDiv.addEventListener("input",setColor),sizeSlider.addEventListener("change",function(){brushWidth=sizeSlider.value}),colorsBtns.forEach(function(e){e.addEventListener("click",function(){document.querySelector(".options .selected").classList.remove("selected"),e.classList.add("selected"),selectedColor=window.getComputedStyle(e).getPropertyValue("background-color")})}),clearCanvas.addEventListener("click",function(){ctx.clearRect(0,0,canvas.width,canvas.height)}),checkBtn.addEventListener("click",function(){answerCard.classList.toggle("a-active"),drawingCard.classList.toggle("d-active"),answerBtns.forEach(function(e){e.classList.toggle("b-active")})}),canvas.addEventListener("mousedown",startDraw),canvas.addEventListener("mouseup",stopDraw),canvas.addEventListener("mousemove",drawing);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyYXcuanMiXSwibmFtZXMiOlsicHJldk1vdXNlWCIsInByZXZNb3VzZVkiLCJzbmFwc2hvdCIsImNvbG9yRGl2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29sb3JQaWNrZXIiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJ3aWxsUmVhZEZyZXF1ZW50bHkiLCJjb2xvcnNCdG5zIiwicXVlcnlTZWxlY3RvckFsbCIsInRvb2xzQnRucyIsImZpbGxDb2xvciIsImNsZWFyQ2FudmFzIiwiY2hlY2tCdG4iLCJhbnN3ZXJCdG5zIiwiaXNEcmF3aW5nIiwiYnJ1c2hXaWR0aCIsInNlbGVjdGVkVG9vbCIsInNlbGVjdGVkQ29sb3IiLCJ3aW5kb3ciLCJvZmZzZXRXaWR0aCIsIndpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ2YWx1ZSIsInN0YXJ0RHJhdyIsIm9mZnNldFkiLCJiZWdpblBhdGgiLCJsaW5lV2lkdGgiLCJvZmZzZXRYIiwic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJnZXRJbWFnZURhdGEiLCJzdG9wRHJhdyIsImNoZWNrZWQiLCJkcmF3UmVjdCIsImUiLCJkcmF3Q2lyY2xlIiwiZmlsbCIsImZpbGxSZWN0IiwiZHJhd1RyaWFuZ2xlIiwicmFkaXVzIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJhcmMiLCJQSSIsImxpbmVUbyIsInN0cm9rZSIsIm1vdmVUbyIsImRyYXdpbmciLCJjbG9zZVBhdGgiLCJwdXRJbWFnZURhdGEiLCJyZW1vdmVEcmF3aW5nIiwiZHJhd0xpbmUiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwibG9nIiwic2l6ZVNsaWRlciIsImNsZWFyUmVjdCIsImRyYXdpbmdDYXJkIiwiY2xhc3NMaXN0IiwiZWxlbWVudCIsInRvZ2dsZSIsInJlbW92ZSIsImFkZCIsImlkIiwic2V0Q29sb3IiLCJmb3JFYWNoIiwiZ2V0Q29tcHV0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Q25CQSxFQUFJQyxpQkFBaUIsUUFBUyxXQUM3QjFELFNBQVNDLGNBQWMsb0JBQW9CLEVBQUU4RCxVQUFVRyxPQUFPLFVBQVUsRUFDeEVULEVBQUlNLFVBQVVJLElBQUksVUFBVSxFQUM1QmpELGNBQWdCQyxPQUNkb0QsaUJBQWlCZCxDQUFHLEVBQ3BCZSxpQkFBaUIsa0JBQWtCLENBQ3RDLENBQUMsQ0FDRixDQUFDLEVBRUQ1RCxZQUFZOEMsaUJBQWlCLFFBQVMsV0FDckNyRCxJQUFJd0QsVUFBVSxFQUFHLEVBQUd6RCxPQUFPaUIsTUFBT2pCLE9BQU9rQixNQUFNLENBQ2hELENBQUMsRUFFRFQsU0FBUzZDLGlCQUFpQixRQUFTLFdBQ2xDZSxXQUFXVixVQUFVRSxPQUFPLFVBQVUsRUFDdENILFlBQVlDLFVBQVVFLE9BQU8sVUFBVSxFQUN2Q25ELFdBQVd3RCxRQUFRLFNBQUNOLEdBQ25CQSxFQUFRRCxVQUFVRSxPQUFPLFVBQVUsQ0FDcEMsQ0FBQyxDQUNGLENBQUMsRUFFRDdELE9BQU9zRCxpQkFBaUIsWUFBYS9CLFNBQVMsRUFDOUN2QixPQUFPc0QsaUJBQWlCLFVBQVd2QixRQUFRLEVBQzNDL0IsT0FBT3NELGlCQUFpQixZQUFhTixPQUFPIiwiZmlsZSI6ImRyYXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb2xvckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0Q29sb3JcIik7XHJcbmNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvci1waWNrZXJcIik7XHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG5jb25zdCB0b29sc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvb2xcIik7XHJcbmNvbnN0IGZpbGxDb2xvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmlsbC1jb2xvclwiKTtcclxuY29uc3Qgc2l6ZVNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2l6ZS1zbGlkZXJcIik7XHJcbmNvbnN0IGNvbG9yc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbG9ycyAub3B0aW9uXCIpO1xyXG5jb25zdCBjbGVhckNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXItY2FudmFzXCIpO1xyXG5jb25zdCBhbnN3ZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWFuc3dlci1ib2FyZFwiXHJcbik7XHJcbmNvbnN0IGRyYXdpbmdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWRyYXdpbmctYm9hcmRcIlxyXG4pO1xyXG5jb25zdCBjaGVja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2stYW5zd2VyXCIpO1xyXG5jb25zdCBhbnN3ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tYW5zd2VyXCIpO1xyXG5sZXQgaXNEcmF3aW5nID0gZmFsc2U7XHJcbmxldCBicnVzaFdpZHRoID0gNTtcclxubGV0IHNlbGVjdGVkVG9vbCA9IFwiYnJ1c2hcIjtcclxubGV0IHByZXZNb3VzZVgsIHByZXZNb3VzZVksIHNuYXBzaG90O1xyXG5sZXQgc2VsZWN0ZWRDb2xvciA9IFwiIzAwMDAwMFwiO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuXHRjYW52YXMud2lkdGggPSBjYW52YXMub2Zmc2V0V2lkdGg7XHJcblx0Y2FudmFzLmhlaWdodCA9IGNhbnZhcy5vZmZzZXRIZWlnaHQ7XHJcbn0pO1xyXG5cclxuY29uc3Qgc2V0Q29sb3IgPSAoKSA9PiB7XHJcblx0Y29sb3JEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JQaWNrZXIudmFsdWU7XHJcblx0c2VsZWN0ZWRDb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnREcmF3ID0gKGUpID0+IHtcclxuXHRpc0RyYXdpbmcgPSB0cnVlO1xyXG5cdHByZXZNb3VzZVggPSBlLm9mZnNldFg7XHJcblx0cHJldk1vdXNlWSA9IGUub2Zmc2V0WTtcclxuXHRjdHguYmVnaW5QYXRoKCk7XHJcblx0Y3R4LmxpbmVXaWR0aCA9IGJydXNoV2lkdGg7XHJcblx0Y3R4LnN0cm9rZVN0eWxlID0gc2VsZWN0ZWRDb2xvcjtcclxuXHRjdHguZmlsbFN0eWxlID0gc2VsZWN0ZWRDb2xvcjtcclxuXHRzbmFwc2hvdCA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxufTtcclxuXHJcbmNvbnN0IHN0b3BEcmF3ID0gKCkgPT4ge1xyXG5cdGlzRHJhd2luZyA9IGZhbHNlO1xyXG59O1xyXG5cclxuY29uc3QgZHJhd1JlY3QgPSAoZSkgPT4ge1xyXG5cdGlmICghZmlsbENvbG9yLmNoZWNrZWQpIHtcclxuXHRcdHJldHVybiBjdHguc3Ryb2tlUmVjdChcclxuXHRcdFx0ZS5vZmZzZXRYLFxyXG5cdFx0XHRlLm9mZnNldFksXHJcblx0XHRcdHByZXZNb3VzZVggLSBlLm9mZnNldFgsXHJcblx0XHRcdHByZXZNb3VzZVkgLSBlLm9mZnNldFlcclxuXHRcdCk7XHJcblx0fVxyXG5cdGN0eC5maWxsUmVjdChcclxuXHRcdGUub2Zmc2V0WCxcclxuXHRcdGUub2Zmc2V0WSxcclxuXHRcdHByZXZNb3VzZVggLSBlLm9mZnNldFgsXHJcblx0XHRwcmV2TW91c2VZIC0gZS5vZmZzZXRZXHJcblx0KTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdDaXJjbGUgPSAoZSkgPT4ge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KFxyXG5cdFx0TWF0aC5wb3cocHJldk1vdXNlWCAtIGUub2Zmc2V0WCwgMikgKyBNYXRoLnBvdyhwcmV2TW91c2VZIC0gZS5vZmZzZXRZLCAyKVxyXG5cdCk7XHJcblx0Y3R4LmFyYyhwcmV2TW91c2VYLCBwcmV2TW91c2VZLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHRpZiAoZmlsbENvbG9yLmNoZWNrZWQpIHtcclxuXHRcdHJldHVybiBjdHguZmlsbCgpO1xyXG5cdH1cclxuXHRjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3VHJpYW5nbGUgPSAoZSkgPT4ge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHgubW92ZVRvKHByZXZNb3VzZVgsIHByZXZNb3VzZVkpO1xyXG5cdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdGN0eC5saW5lVG8ocHJldk1vdXNlWCAqIDIgLSBlLm9mZnNldFgsIGUub2Zmc2V0WSk7XHJcblx0Y3R4LmNsb3NlUGF0aCgpO1xyXG5cdGlmIChmaWxsQ29sb3IuY2hlY2tlZCkge1xyXG5cdFx0cmV0dXJuIGN0eC5maWxsKCk7XHJcblx0fVxyXG5cdGN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbmNvbnN0IGRyYXdMaW5lID0gKGUpID0+IHtcclxuXHRjdHguYmVnaW5QYXRoKCk7XHJcblx0Y3R4Lm1vdmVUbyhwcmV2TW91c2VYLCBwcmV2TW91c2VZKTtcclxuXHRjdHgubGluZVRvKGUub2Zmc2V0WCwgZS5vZmZzZXRZKTtcclxuXHRjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVEcmF3aW5nID0gKGUpID0+IHtcclxuXHRjdHguc3Ryb2tlU3R5bGUgPSBcIiNmZmZcIjtcclxuXHRjdHgubGluZVRvKGUub2Zmc2V0WCwgZS5vZmZzZXRZKTtcclxuXHRjdHguc3Ryb2tlKCk7XHJcbn07XHJcblxyXG5jb25zdCBkcmF3aW5nID0gKGUpID0+IHtcclxuXHRpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xyXG5cdGN0eC5wdXRJbWFnZURhdGEoc25hcHNob3QsIDAsIDApO1xyXG5cclxuXHRzd2l0Y2ggKHNlbGVjdGVkVG9vbCkge1xyXG5cdFx0Y2FzZSBcImJydXNoXCI6XHJcblx0XHRcdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xyXG5cdFx0XHRjdHguc3Ryb2tlKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcInJlY3RhbmdsZVwiOlxyXG5cdFx0XHRkcmF3UmVjdChlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiY2lyY2xlXCI6XHJcblx0XHRcdGRyYXdDaXJjbGUoZSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSBcInRyaWFuZ2xlXCI6XHJcblx0XHRcdGRyYXdUcmlhbmdsZShlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwibGluZVwiOlxyXG5cdFx0XHRkcmF3TGluZShlKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIFwiZXJhc2VyXCI6XHJcblx0XHRcdHJlbW92ZURyYXdpbmcoZSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0ZGVmYXVsdDpcclxuXHRcdFx0YnJlYWs7XHJcblx0fVxyXG59O1xyXG5cclxudG9vbHNCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcHRpb25zIC5hY3RpdmVcIikuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHRcdGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdFx0c2VsZWN0ZWRUb29sID0gYnRuLmlkO1xyXG5cdFx0Y29uc29sZS5sb2coc2VsZWN0ZWRUb29sKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5jb2xvckRpdi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgc2V0Q29sb3IpO1xyXG5cclxuc2l6ZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuXHRicnVzaFdpZHRoID0gc2l6ZVNsaWRlci52YWx1ZTtcclxufSk7XHJcblxyXG5jb2xvcnNCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG5cdGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcHRpb25zIC5zZWxlY3RlZFwiKS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcblx0XHRidG4uY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG5cdFx0c2VsZWN0ZWRDb2xvciA9IHdpbmRvd1xyXG5cdFx0XHQuZ2V0Q29tcHV0ZWRTdHlsZShidG4pXHJcblx0XHRcdC5nZXRQcm9wZXJ0eVZhbHVlKFwiYmFja2dyb3VuZC1jb2xvclwiKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5jbGVhckNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxufSk7XHJcblxyXG5jaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdGFuc3dlckNhcmQuY2xhc3NMaXN0LnRvZ2dsZShcImEtYWN0aXZlXCIpO1xyXG5cdGRyYXdpbmdDYXJkLmNsYXNzTGlzdC50b2dnbGUoXCJkLWFjdGl2ZVwiKTtcclxuXHRhbnN3ZXJCdG5zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImItYWN0aXZlXCIpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHN0YXJ0RHJhdyk7XHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzdG9wRHJhdyk7XHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYXdpbmcpO1xyXG4iXX0=
