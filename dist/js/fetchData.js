"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),taskContent=document.querySelector(".content"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),result=document.querySelector(".result"),goodBtn=document.querySelector(".good-answer"),badBtn=document.querySelector(".wrong-answer"),startBtn=document.querySelector(".start-play"),answerBtns=document.querySelectorAll(".button-answer"),clearCanvas=document.querySelector(".clear-canvas"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),arr=[],points=0,index=Math.floor(7*Math.random())+1,firebaseConfig=(arr.push(index),{apiKey:"AIzaSyAhj6kkaS_fMvLOwL-J4SXJ_DWSwejBmlo",authDomain:"licencjat-2a013.firebaseapp.com",databaseURL:"https://licencjat-2a013-default-rtdb.firebaseio.com",projectId:"licencjat-2a013",storageBucket:"licencjat-2a013.appspot.com",messagingSenderId:"676690164407",appId:"1:676690164407:web:b234c74f6f771f59a1ab32"}),app=(0,_firebaseApp.initializeApp)(firebaseConfig),database=(0,_firebaseDatabase.getDatabase)(app);function setBackground(e){var a=new Image,t=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(t,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),a.src=e.z):console.log("no data available")}).catch(function(e){console.error(e)}),a.addEventListener("load",function(){ctx.drawImage(a,0,0,canvas.width,canvas.height)})}function setTaskContent(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),taskContent.textContent=e.t):console.log("no data available")}).catch(function(e){console.error(e)})}function setAnswer(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),answerCard.style.backgroundImage="url('".concat(e.o,"')"),answerCard.style.backgroundSize="contain"):console.log("no data available")}).catch(function(e){console.error(e)})}function addPoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points+=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("addPoint"),setTimeout(function(){result.classList.remove("addPoint")},1e3)}function removePoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points-=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("removePoint"),setTimeout(function(){result.classList.remove("removePoint")},1e3)}function setData(e){setBackground(e),setTaskContent(e),setAnswer(e)}function removeAnswerCards(){answerCard.classList.remove("a-active"),drawingCard.classList.remove("d-active"),answerBtns.forEach(function(e){e.classList.remove("b-active")})}function getRandomUniqueNumber(e,a,t){for(var n=Math.floor(Math.random()*(a-e+1))+e;t.includes(n);)n=Math.floor(Math.random()*(a-e+1))+e;return t.push(n),n}clearCanvas.addEventListener("click",function(){setData(index)}),startBtn.addEventListener("click",function(){setData(index)}),goodBtn.addEventListener("click",function(){addPoint(index),index=getRandomUniqueNumber(1,7,arr),console.log(index),setData(index),removeAnswerCards()}),badBtn.addEventListener("click",function(){removePoint(index),index=getRandomUniqueNumber(1,7,arr),console.log(index),setData(index),removeAnswerCards()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoRGF0YS5qcyJdLCJuYW1lcyI6WyJfZmlyZWJhc2VBcHAiLCJyZXF1aXJlIiwiYXJyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpbGxSZWFkRnJlcXVlbnRseSIsInRhc2tDb250ZW50IiwiYW5zd2VyQ2FyZCIsImdvb2RCdG4iLCJyZXN1bHQiLCJiYWRCdG4iLCJjbGVhckNhbnZhcyIsImRyYXdpbmdDYXJkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibWVzc2FnaW5nU2VuZGVySWQiLCJwb2ludHMiLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJpbml0aWFsaXplQXBwIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsInNldEJhY2tncm91bmQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhcHBJZCIsImRhdGFSZWYiLCJhcHAiLCJkYXRhIiwidmFsIiwiZGF0YWJhc2UiLCJnZXREYXRhYmFzZSIsImluZGV4IiwiZXJyb3IiLCJJbWFnZSIsImNvbnNvbGUiLCJyZWYiLCJnZXQiLCJjaGlsZCIsImNvbmNhdCIsInNuYXBzaG90IiwiZHJhd0ltYWdlIiwic3JjIiwieiIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0QW5zd2VyIiwidGhlbiIsImV4aXN0cyIsInN0eWxlIiwiYmFja2dyb3VuZFNpemUiLCJsb2ciLCJvIiwic2V0VGltZW91dCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInAiLCJhZGQiLCJzZXREYXRhIiwic2V0VGFza0NvbnRlbnQiLCJyZW1vdmVBbnN3ZXJDYXJkcyIsImFuc3dlckJ0bnMiLCJlbGVtZW50IiwiZ2V0UmFuZG9tVW5pcXVlTnVtYmVyIiwiaW5jbHVkZXMiLCJwdXNoIiwicmFuZG9tTnVtYmVyIiwic3RhcnRCdG4iLCJhZGRQb2ludCIsInJlbW92ZVBvaW50IiwibWluIiwibWF4Il0sIm1h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QixRQUFTLFdBQ2hDMEIsWUFBWXZDLEtBQUssRUFDakJBLE1BQVFpQyxzQkFBc0IsRUFBRyxFQUFHbkUsR0FBRyxFQUN2Q3FDLFFBQVFrQixJQUFJckIsS0FBSyxFQUNqQjRCLFFBQVE1QixLQUFLLEVBQ2I4QixrQkFBaUIsQ0FDbEIsQ0FBQyIsImZpbGUiOiJmZXRjaERhdGEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbnZhc1wiKTtcclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcclxuY29uc3QgdGFza0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XHJcbmNvbnN0IGFuc3dlckNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLm1haW5EcmF3X2NvbnRhaW5lci1jYXJkcy1jb250YWluZXItYW5zd2VyLWJvYXJkXCJcclxuKTtcclxuY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRcIik7XHJcbmNvbnN0IGdvb2RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdvb2QtYW5zd2VyXCIpO1xyXG5jb25zdCBiYWRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyb25nLWFuc3dlclwiKTtcclxuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0LXBsYXlcIik7XHJcbmNvbnN0IGFuc3dlckJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1dHRvbi1hbnN3ZXJcIik7XHJcbmNvbnN0IGNsZWFyQ2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbGVhci1jYW52YXNcIik7XHJcbmNvbnN0IGRyYXdpbmdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWRyYXdpbmctYm9hcmRcIlxyXG4pO1xyXG5jb25zdCBhcnIgPSBbXTtcclxubGV0IHBvaW50cyA9IDA7XHJcbmxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpICsgMTtcclxuYXJyLnB1c2goaW5kZXgpO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWFwcC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldERhdGFiYXNlLFxyXG5cdHJlZixcclxuXHRjaGlsZCxcclxuXHRnZXQsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWRhdGFiYXNlLmpzXCI7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuXHRhcGlLZXk6IFwiQUl6YVN5QWhqNmtrYVNfZk12TE93TC1KNFNYSl9EV1N3ZWpCbWxvXCIsXHJcblx0YXV0aERvbWFpbjogXCJsaWNlbmNqYXQtMmEwMTMuZmlyZWJhc2VhcHAuY29tXCIsXHJcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9saWNlbmNqYXQtMmEwMTMtZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tXCIsXHJcblx0cHJvamVjdElkOiBcImxpY2VuY2phdC0yYTAxM1wiLFxyXG5cdHN0b3JhZ2VCdWNrZXQ6IFwibGljZW5jamF0LTJhMDEzLmFwcHNwb3QuY29tXCIsXHJcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiNjc2NjkwMTY0NDA3XCIsXHJcblx0YXBwSWQ6IFwiMTo2NzY2OTAxNjQ0MDc6d2ViOmIyMzRjNzRmNmY3NzFmNTlhMWFiMzJcIixcclxufTtcclxuXHJcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuY29uc3QgZGF0YWJhc2UgPSBnZXREYXRhYmFzZShhcHApO1xyXG5cclxuZnVuY3Rpb24gc2V0QmFja2dyb3VuZChpbmRleCkge1xyXG5cdGNvbnN0IGJhY2tncm91bmRJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kSW1hZ2Uuc3JjID0gZGF0YS56O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdGJhY2tncm91bmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcblx0XHRjdHguZHJhd0ltYWdlKGJhY2tncm91bmRJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VGFza0NvbnRlbnQoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0dGFza0NvbnRlbnQudGV4dENvbnRlbnQgPSBkYXRhLnQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QW5zd2VyKGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdGFuc3dlckNhcmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHtkYXRhLm99JylgO1xyXG5cdFx0XHRcdGFuc3dlckNhcmQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImNvbnRhaW5cIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQb2ludChpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRwb2ludHMgKz0gZGF0YS5wO1xyXG5cdFx0XHRcdHJlc3VsdC50ZXh0Q29udGVudCA9IHBvaW50cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG5cclxuXHRyZXN1bHQuY2xhc3NMaXN0LmFkZChcImFkZFBvaW50XCIpO1xyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0cmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRQb2ludFwiKTtcclxuXHR9LCAxMDAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlUG9pbnQoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0cG9pbnRzIC09IGRhdGEucDtcclxuXHRcdFx0XHRyZXN1bHQudGV4dENvbnRlbnQgPSBwb2ludHM7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0cmVzdWx0LmNsYXNzTGlzdC5hZGQoXCJyZW1vdmVQb2ludFwiKTtcclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKFwicmVtb3ZlUG9pbnRcIik7XHJcblx0fSwgMTAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERhdGEoaW5kZXgpIHtcclxuXHRzZXRCYWNrZ3JvdW5kKGluZGV4KTtcclxuXHRzZXRUYXNrQ29udGVudChpbmRleCk7XHJcblx0c2V0QW5zd2VyKGluZGV4KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQW5zd2VyQ2FyZHMoKSB7XHJcblx0YW5zd2VyQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiYS1hY3RpdmVcIik7XHJcblx0ZHJhd2luZ0NhcmQuY2xhc3NMaXN0LnJlbW92ZShcImQtYWN0aXZlXCIpO1xyXG5cdGFuc3dlckJ0bnMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYi1hY3RpdmVcIik7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJhbmRvbVVuaXF1ZU51bWJlcihtaW4sIG1heCwgYXJyKSB7XHJcblx0bGV0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcblx0d2hpbGUgKGFyci5pbmNsdWRlcyhyYW5kb21OdW1iZXIpKSB7XHJcblx0XHRyYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG5cdH1cclxuXHRhcnIucHVzaChyYW5kb21OdW1iZXIpO1xyXG5cdHJldHVybiByYW5kb21OdW1iZXI7XHJcbn1cclxuXHJcbmNsZWFyQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0c2V0RGF0YShpbmRleCk7XHJcbn0pO1xyXG5cclxuc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRzZXREYXRhKGluZGV4KTtcclxufSk7XHJcblxyXG5nb29kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkUG9pbnQoaW5kZXgpO1xyXG5cdGluZGV4ID0gZ2V0UmFuZG9tVW5pcXVlTnVtYmVyKDEsIDcsIGFycik7XHJcblx0Y29uc29sZS5sb2coaW5kZXgpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcbn0pO1xyXG5cclxuYmFkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0cmVtb3ZlUG9pbnQoaW5kZXgpO1xyXG5cdGluZGV4ID0gZ2V0UmFuZG9tVW5pcXVlTnVtYmVyKDEsIDcsIGFycik7XHJcblx0Y29uc29sZS5sb2coaW5kZXgpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcbn0pO1xyXG4iXX0=
