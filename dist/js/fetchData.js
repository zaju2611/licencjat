"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),taskContent=document.querySelector(".content"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),result=document.querySelector(".result"),goodBtn=document.querySelector(".good-answer"),badBtn=document.querySelector(".wrong-answer"),checkBtn=document.querySelector(".check-answer"),answerBtns=document.querySelectorAll(".button-answer"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),points=0,index=Math.floor(7*Math.random())+1,firebaseConfig={apiKey:"AIzaSyAhj6kkaS_fMvLOwL-J4SXJ_DWSwejBmlo",authDomain:"licencjat-2a013.firebaseapp.com",databaseURL:"https://licencjat-2a013-default-rtdb.firebaseio.com",projectId:"licencjat-2a013",storageBucket:"licencjat-2a013.appspot.com",messagingSenderId:"676690164407",appId:"1:676690164407:web:b234c74f6f771f59a1ab32"},app=(0,_firebaseApp.initializeApp)(firebaseConfig),database=(0,_firebaseDatabase.getDatabase)(app);function setBackground(e){var a=new Image,t=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(t,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),a.src=e.z):console.log("no data available")}).catch(function(e){console.error(e)}),a.addEventListener("load",function(){ctx.drawImage(a,0,0,canvas.width,canvas.height)})}function setTaskContent(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),taskContent.textContent=e.t):console.log("no data available")}).catch(function(e){console.error(e)})}function setAnswer(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),answerCard.style.backgroundImage="url('".concat(e.o,"')"),answerCard.style.backgroundSize="contain"):console.log("no data available")}).catch(function(e){console.error(e)})}function addPoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points+=e.p):console.log("no data available")}).catch(function(e){console.error(e)}),result.textContent=points,result.classList.add("addPoint"),setTimeout(function(){result.classList.remove("addPoint")},1e3)}function removePoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points-=e.p):console.log("no data available")}).catch(function(e){console.error(e)}),result.textContent=points,result.classList.add("removePoint"),setTimeout(function(){result.classList.remove("removePoint")},1e3)}function setData(e){setBackground(e),setTaskContent(e),setAnswer(e)}function removeAnswerCards(){answerCard.classList.remove("a-active"),drawingCard.classList.remove("d-active"),answerBtns.forEach(function(e){e.classList.remove("b-active")})}window.addEventListener("load",function(){setData(index)}),goodBtn.addEventListener("click",function(){addPoint(index),setData(index=Math.floor(7*Math.random())+1),removeAnswerCards()}),badBtn.addEventListener("click",function(){removePoint(index),setData(index=Math.floor(7*Math.random())+1),removeAnswerCards()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoRGF0YS5qcyJdLCJuYW1lcyI6WyJfZmlyZWJhc2VBcHAiLCJyZXF1aXJlIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdHgiLCJnZXRDb250ZXh0Iiwid2lsbFJlYWRGcmVxdWVudGx5IiwidGFza0NvbnRlbnQiLCJhbnN3ZXJDYXJkIiwiZ29vZEJ0biIsInJlc3VsdCIsImFuc3dlckJ0bnMiLCJkcmF3aW5nQ2FyZCIsImZsb29yIiwiYXBwSWQiLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzZXRCYWNrZ3JvdW5kIiwic3RvcmFnZUJ1Y2tldCIsImJhY2tncm91bmRJbWFnZSIsIm1lc3NhZ2luZ1NlbmRlcklkIiwicmVmIiwiZ2V0IiwiZmlyZWJhc2VDb25maWciLCJjb25zb2xlIiwiZ2V0RGF0YWJhc2UiLCJhcHAiLCJpbmRleCIsIkltYWdlIiwiZGF0YVJlZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiZHJhd0ltYWdlIiwic25hcHNob3QiLCJleGlzdHMiLCJkYXRhIiwidmFsIiwic2V0VGFza0NvbnRlbnQiLCJ6IiwiY2hpbGQiLCJlcnJvciIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kU2l6ZSIsInRleHRDb250ZW50IiwidCIsImxvZyIsInBvaW50cyIsImNvbmNhdCIsIm8iLCJzZXRUaW1lb3V0IiwicCIsImNsYXNzTGlzdCIsInNldEFuc3dlciIsImZvckVhY2giLCJlbGVtZW50Iiwid2luZG93IiwiYWRkUG9pbnQiLCJNYXRoIiwic2V0RGF0YSIsInJlbW92ZUFuc3dlckNhcmRzIiwiYmFkQnRuIiwicmVtb3ZlUG9pbnQiLCJyZW1vdmUiLCJyYW5kb20iXSwibWFwcGluZ3MiOiJhQWVBLElBQUFBLGFBQUFDLFFBQUEsMkRBQUEsRUFVQUMsa0JBQUFELFFBQUEsZ0VBQUEsRUF6Qk1FLE9BQVNDLFNBQVND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UWpDLEdBQ2hCVixjQUFjVSxDQUFLLEVBQ25CVSxlQUFlVixDQUFLLEVBQ3BCMkIsVUFBVTNCLENBQUssQ0FDaEIsQ0FFQSxTQUFTa0Msb0JBQ1J2RCxXQUFXK0MsVUFBVVcsT0FBTyxVQUFVLEVBQ3RDdEQsWUFBWTJDLFVBQVVXLE9BQU8sVUFBVSxFQUN2Q3ZELFdBQVc4QyxRQUFRLFNBQUNDLEdBQ25CQSxFQUFRSCxVQUFVVyxPQUFPLFVBQVUsQ0FDcEMsQ0FBQyxDQUNGLENBRUFQLE9BQU8zQixpQkFBaUIsT0FBUSxXQUMvQjhCLFFBQVFqQyxLQUFLLENBQ2QsQ0FBQyxFQUVEcEIsUUFBUXVCLGlCQUFpQixRQUFTLFdBQ2pDNEIsU0FBUy9CLEtBQUssRUFFZGlDLFFBREFqQyxNQUFRZ0MsS0FBS2hELE1BQXNCLEVBQWhCZ0QsS0FBS00sT0FBTSxDQUFNLEVBQUksQ0FDM0IsRUFDYkosa0JBQWlCLENBQ2xCLENBQUMsRUFFREMsT0FBT2hDLGlCQUFpQixRQUFTLFdBQ2hDaUMsWUFBWXBDLEtBQUssRUFFakJpQyxRQURBakMsTUFBUWdDLEtBQUtoRCxNQUFzQixFQUFoQmdELEtBQUtNLE9BQU0sQ0FBTSxFQUFJLENBQzNCLEVBQ2JKLGtCQUFpQixDQUNsQixDQUFDIiwiZmlsZSI6ImZldGNoRGF0YS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG5jb25zdCB0YXNrQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKTtcclxuY29uc3QgYW5zd2VyQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1hbnN3ZXItYm9hcmRcIlxyXG4pO1xyXG5jb25zdCByZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdFwiKTtcclxuY29uc3QgZ29vZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ29vZC1hbnN3ZXJcIik7XHJcbmNvbnN0IGJhZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JvbmctYW5zd2VyXCIpO1xyXG5jb25zdCBjaGVja0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hlY2stYW5zd2VyXCIpO1xyXG5jb25zdCBhbnN3ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tYW5zd2VyXCIpO1xyXG5jb25zdCBkcmF3aW5nQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1kcmF3aW5nLWJvYXJkXCJcclxuKTtcclxubGV0IHBvaW50cyA9IDA7XHJcbmxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpICsgMTtcclxuXHJcbmltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXBwLmpzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0RGF0YWJhc2UsXHJcblx0cmVmLFxyXG5cdGNoaWxkLFxyXG5cdGdldCxcclxufSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtZGF0YWJhc2UuanNcIjtcclxuXHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG5cdGFwaUtleTogXCJBSXphU3lBaGo2a2thU19mTXZMT3dMLUo0U1hKX0RXU3dlakJtbG9cIixcclxuXHRhdXRoRG9tYWluOiBcImxpY2VuY2phdC0yYTAxMy5maXJlYmFzZWFwcC5jb21cIixcclxuXHRkYXRhYmFzZVVSTDogXCJodHRwczovL2xpY2VuY2phdC0yYTAxMy1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcclxuXHRwcm9qZWN0SWQ6IFwibGljZW5jamF0LTJhMDEzXCIsXHJcblx0c3RvcmFnZUJ1Y2tldDogXCJsaWNlbmNqYXQtMmEwMTMuYXBwc3BvdC5jb21cIixcclxuXHRtZXNzYWdpbmdTZW5kZXJJZDogXCI2NzY2OTAxNjQ0MDdcIixcclxuXHRhcHBJZDogXCIxOjY3NjY5MDE2NDQwNzp3ZWI6YjIzNGM3NGY2Zjc3MWY1OWExYWIzMlwiLFxyXG59O1xyXG5cclxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblxyXG5jb25zdCBkYXRhYmFzZSA9IGdldERhdGFiYXNlKGFwcCk7XHJcblxyXG5mdW5jdGlvbiBzZXRCYWNrZ3JvdW5kKGluZGV4KSB7XHJcblx0Y29uc3QgYmFja2dyb3VuZEltYWdlID0gbmV3IEltYWdlKCk7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdGJhY2tncm91bmRJbWFnZS5zcmMgPSBkYXRhLno7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0YmFja2dyb3VuZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuXHRcdGN0eC5kcmF3SW1hZ2UoYmFja2dyb3VuZEltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRUYXNrQ29udGVudChpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHR0YXNrQ29udGVudC50ZXh0Q29udGVudCA9IGRhdGEudDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBbnN3ZXIoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0YW5zd2VyQ2FyZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke2RhdGEub30nKWA7XHJcblx0XHRcdFx0YW5zd2VyQ2FyZC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IFwiY29udGFpblwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFBvaW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHBvaW50cyArPSBkYXRhLnA7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0cmVzdWx0LnRleHRDb250ZW50ID0gcG9pbnRzO1xyXG5cdHJlc3VsdC5jbGFzc0xpc3QuYWRkKFwiYWRkUG9pbnRcIik7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRyZXN1bHQuY2xhc3NMaXN0LnJlbW92ZShcImFkZFBvaW50XCIpO1xyXG5cdH0sIDEwMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQb2ludChpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRwb2ludHMgLT0gZGF0YS5wO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdHJlc3VsdC50ZXh0Q29udGVudCA9IHBvaW50cztcclxuXHRyZXN1bHQuY2xhc3NMaXN0LmFkZChcInJlbW92ZVBvaW50XCIpO1xyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0cmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoXCJyZW1vdmVQb2ludFwiKTtcclxuXHR9LCAxMDAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGF0YShpbmRleCkge1xyXG5cdHNldEJhY2tncm91bmQoaW5kZXgpO1xyXG5cdHNldFRhc2tDb250ZW50KGluZGV4KTtcclxuXHRzZXRBbnN3ZXIoaW5kZXgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVBbnN3ZXJDYXJkcygpIHtcclxuXHRhbnN3ZXJDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJhLWFjdGl2ZVwiKTtcclxuXHRkcmF3aW5nQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiZC1hY3RpdmVcIik7XHJcblx0YW5zd2VyQnRucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiLWFjdGl2ZVwiKTtcclxuXHR9KTtcclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRzZXREYXRhKGluZGV4KTtcclxufSk7XHJcblxyXG5nb29kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkUG9pbnQoaW5kZXgpO1xyXG5cdGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNykgKyAxO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcbn0pO1xyXG5cclxuYmFkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0cmVtb3ZlUG9pbnQoaW5kZXgpO1xyXG5cdGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNykgKyAxO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcbn0pO1xyXG4iXX0=
