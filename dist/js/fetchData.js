"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),taskContent=document.querySelector(".content"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),checkAnswer=document.querySelector(".check-answer"),result=document.querySelector(".result"),goodBtn=document.querySelector(".good-answer"),badBtn=document.querySelector(".wrong-answer"),startBtn=document.querySelector(".start-play"),answerBtns=document.querySelectorAll(".button-answer"),clearCanvas=document.querySelector(".clear-canvas"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),userPoints=document.querySelector(".points"),nextBtn=document.querySelector(".next"),resultPopup=document.querySelector(".resultPopup"),urlParams=new URLSearchParams(window.location.search),gameType=urlParams.get("game"),arr=[],points=0,index=0,app=(0,_firebaseApp.initializeApp)(firebaseConfig),database=(0,_firebaseDatabase.getDatabase)(app);function setBackground(e){var a=new Image,t=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(t,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),a.src=e.z):console.log("no data available")}).catch(function(e){console.error(e)}),a.addEventListener("load",function(){ctx.drawImage(a,0,0,canvas.width,canvas.height)})}function setTaskContent(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),taskContent.textContent=e.t):console.log("no data available")}).catch(function(e){console.error(e)})}function setAnswer(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),answerCard.style.backgroundImage="url('".concat(e.o,"')"),answerCard.style.backgroundSize="contain",answerCard.style.backgroundPosition="center"):console.log("no data available")}).catch(function(e){console.error(e)})}function addPoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points+=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("addPoint"),setTimeout(function(){result.classList.remove("addPoint")},1e3)}function removePoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points-=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("removePoint"),setTimeout(function(){result.classList.remove("removePoint")},1e3)}function setData(e){setBackground(e),setTaskContent(e),setAnswer(e)}function removeAnswerCards(){answerCard.classList.remove("a-active"),drawingCard.classList.remove("d-active"),answerBtns.forEach(function(e){e.classList.remove("b-active")})}var randUniqueNumber=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},fetchData=function(e){"flat"===e||"teacher"===e?index=randUniqueNumber(1,16):"spatial"===e?index=randUniqueNumber(22,160):"mix"===e&&(index=randUniqueNumber(100,160)),console.log(index)};function getRandomUniqueNumber(e){for(fetchData(gameType);e.includes(index);)fetchData(gameType);return e.push(index),index}"teacher"===gameType&&(nextBtn.style.display="block",checkAnswer.style.display="none",goodBtn.style.display="none",badBtn.style.display="none",userPoints.style.display="none",resultPopup.style.display="none",document.querySelector(".downloadFile").style.display="block",document.querySelector(".textPopup").textContent="Pobierz plik z odpowiedziami"),nextBtn.addEventListener("click",function(){setData(index=getRandomUniqueNumber(arr))}),clearCanvas.addEventListener("click",function(){setData(index)}),startBtn.addEventListener("click",function(){fetchData(gameType),setData(index),arr.push(index),clearCanvas.disabled=!1,checkAnswer.disabled=!1,nextBtn.disabled=!1,startBtn.disabled=!0}),goodBtn.addEventListener("click",function(){addPoint(index),index=getRandomUniqueNumber(arr),console.log(index),setData(index),removeAnswerCards(),window.scrollTo(0,0)}),badBtn.addEventListener("click",function(){removePoint(index),setData(index=getRandomUniqueNumber(arr)),removeAnswerCards(),window.scrollTo(0,0)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoRGF0YS5qcyJdLCJuYW1lcyI6WyJfZmlyZWJhc2VBcHAiLCJyZXF1aXJlIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdHgiLCJnZXRDb250ZXh0Iiwid2lsbFJlYWRGcmVxdWVudGx5IiwidGFza0NvbnRlbnQiLCJhbnN3ZXJDYXJkIiwicmVzdWx0IiwiY2hlY2tBbnN3ZXIiLCJnb29kQnRuIiwiYmFkQnRuIiwiY2xlYXJDYW52YXMiLCJkcmF3aW5nQ2FyZCIsInVzZXJQb2ludHMiLCJuZXh0QnRuIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJyZXN1bHRQb3B1cCIsInVybFBhcmFtcyIsImdhbWVUeXBlIiwiYXJyIiwicG9pbnRzIiwiYmFja2dyb3VuZEltYWdlIiwiZmlyZWJhc2VDb25maWciLCJjb25zb2xlIiwiZ2V0RGF0YWJhc2UiLCJhcHAiLCJzZXRCYWNrZ3JvdW5kIiwiaW5kZXgiLCJJbWFnZSIsImRhdGFSZWYiLCJyZWYiLCJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwidGhlbiIsImRyYXdJbWFnZSIsInNuYXBzaG90IiwiZXhpc3RzIiwiZGF0YSIsInZhbCIsInNldFRhc2tDb250ZW50IiwieiIsImNoaWxkIiwiZXJyb3IiLCJ3aWR0aCIsImhlaWdodCIsInN0eWxlIiwiYmFja2dyb3VuZFNpemUiLCJ0ZXh0Q29udGVudCIsImJhY2tncm91bmRQb3NpdGlvbiIsImxvZyIsImNvbmNhdCIsIm8iLCJzZXRUaW1lb3V0IiwicCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNldEFuc3dlciIsImFuc3dlckJ0bnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJhbmRVbmlxdWVOdW1iZXIiLCJNYXRoIiwiaW5jbHVkZXMiLCJkaXNwbGF5IiwibWluIiwibWF4IiwiZmxvb3IiLCJyYW5kb20iLCJmZXRjaERhdGEiLCJzZXREYXRhIiwic3RhcnRCdG4iLCJkaXNhYmxlZCIsImFkZFBvaW50IiwiZ2V0UmFuZG9tVW5pcXVlTnVtYmVyIiwicmVtb3ZlQW5zd2VyQ2FyZHMiLCJzY3JvbGxUbyIsInB1c2giLCJyZW1vdmVQb2ludCJdLCJtYXBwaW5ncyI6ImFBa0NBLElBQUFBLGFBQUFDLFFBQUEsMkRBQUEsRUFFQUMsa0JBQUFELFFBQUEsZ0VBQUEsRUFwQ01FLE9BQVNDLFNBQVNDLGNBQWMsU0FBUyxFQUN6Q0MsSUFBTUgsT0FBT0ksV0FBVyxLQUFNLENBQUVDLG1CQUFvQixDQUFBLENBQUssQ0FBQyxFQXlCaEVDLFlBQUFMLFNBQUFDLGNBQUEsVUFBQSxFQUNBSyxXQUFBTixTQUFBQyxjQTNCQSxrREFBZ0QsRUFDVkcsWUFBa0JKLFNBQUVDLGNBQUEsZUFBQSxFQUFPTSxPQUFBUCxTQUFBQyxjQUFBLFNBQUEsRUFDM0RJLFFBQVdMLFNBQUdBLGNBQVNDLGNBQXlCLEVBQ2hESyxPQUFVTixTQUFHQSxjQUFTQyxlQUMzQixFQUVLTyxTQUFXUixTQUFXQyxjQUFjLGFBQUMsRUFDckNNLFdBQVNQLFNBQVNDLGlCQUF1QixnQkFBQyxFQUMxQ1EsWUFBVVQsU0FBU0MsY0FBYyxlQUFlLEVBQ2hEUyxZQUFTVixTQUFTQyxjQUN4QixtREFBc0QsRUFFaERVLFdBQWNYLFNBQVNDLGNBQWMsU0FBQSxFQUNyQ1csUUFBV1osU0FBR0EsY0FBU0MsT0FDNUIsRUFFS1ksWUFBYWIsU0FBU0MsY0FBYyxjQUFVLEVBQzlDYSxVQUFVZCxJQUFRZSxnQkFBZUMsT0FBUUMsU0FBQUMsTUFBQSxFQUN6Q0MsU0FBV0MsVUFBWW5CLElBQUFBLE1BQUFBLEVBRXZCb0IsSUFBUSxHQUVSQyxPQUFRLEVBQ1ZDLE1BQU0sRUFzQk5DLEtBQUFBLEVBQUFBLGFBQUFBLGVBQW1CQyxjQUFTLEVBRTVCQyxVQUFXLEVBQUFDLGtCQUFBQSxhQUFDQyxHQUFBLEVBVGhCLFNBV0lDLGNBQ0tDLEdBWFIsSUFZRUosRUFBb0IsSUFBQUssTUFDbkJDLEdBQUEsRUFBQUMsa0JBQUFBLE1BQUEsRUFB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QyxzQkFBc0J0RCxHQUFHLENBQ3BCLEVBQ2J1RCxrQkFBaUIsRUFDakI3RCxPQUFPOEQsU0FBUyxFQUFHLENBQUMsQ0FDckIsQ0FBQyIsImZpbGUiOiJmZXRjaERhdGEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbnZhc1wiKTtcclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcclxuY29uc3QgdGFza0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XHJcbmNvbnN0IGFuc3dlckNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLm1haW5EcmF3X2NvbnRhaW5lci1jYXJkcy1jb250YWluZXItYW5zd2VyLWJvYXJkXCJcclxuKTtcclxuY29uc3QgY2hlY2tBbnN3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoZWNrLWFuc3dlclwiKTtcclxuY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRcIik7XHJcbmNvbnN0IGdvb2RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdvb2QtYW5zd2VyXCIpO1xyXG5jb25zdCBiYWRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyb25nLWFuc3dlclwiKTtcclxuY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0LXBsYXlcIik7XHJcbmNvbnN0IGFuc3dlckJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1dHRvbi1hbnN3ZXJcIik7XHJcbmNvbnN0IGNsZWFyQ2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbGVhci1jYW52YXNcIik7XHJcbmNvbnN0IGRyYXdpbmdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWRyYXdpbmctYm9hcmRcIlxyXG4pO1xyXG5jb25zdCB1c2VyUG9pbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb2ludHNcIik7XHJcbmNvbnN0IG5leHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5leHRcIik7XHJcbmNvbnN0IHJlc3VsdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRQb3B1cFwiKTtcclxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuY29uc3QgZ2FtZVR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwiZ2FtZVwiKTtcclxuXHJcbmNvbnN0IGFyciA9IFtdO1xyXG5sZXQgcG9pbnRzID0gMDtcclxubGV0IGluZGV4ID0gMDtcclxuXHJcbmltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXBwLmpzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0RGF0YWJhc2UsXHJcblx0cmVmLFxyXG5cdGNoaWxkLFxyXG5cdGdldCxcclxufSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtZGF0YWJhc2UuanNcIjtcclxuXHJcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cclxuY29uc3QgZGF0YWJhc2UgPSBnZXREYXRhYmFzZShhcHApO1xyXG5cclxuZnVuY3Rpb24gc2V0QmFja2dyb3VuZChpbmRleCkge1xyXG5cdGNvbnN0IGJhY2tncm91bmRJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kSW1hZ2Uuc3JjID0gZGF0YS56O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdGJhY2tncm91bmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcblx0XHRjdHguZHJhd0ltYWdlKGJhY2tncm91bmRJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VGFza0NvbnRlbnQoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0dGFza0NvbnRlbnQudGV4dENvbnRlbnQgPSBkYXRhLnQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QW5zd2VyKGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdGFuc3dlckNhcmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHtkYXRhLm99JylgO1xyXG5cdFx0XHRcdGFuc3dlckNhcmQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImNvbnRhaW5cIjtcclxuXHRcdFx0XHRhbnN3ZXJDYXJkLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiY2VudGVyXCI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUG9pbnQoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0cG9pbnRzICs9IGRhdGEucDtcclxuXHRcdFx0XHRyZXN1bHQudGV4dENvbnRlbnQgPSBwb2ludHM7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0cmVzdWx0LmNsYXNzTGlzdC5hZGQoXCJhZGRQb2ludFwiKTtcclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkUG9pbnRcIik7XHJcblx0fSwgMTAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVBvaW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHBvaW50cyAtPSBkYXRhLnA7XHJcblx0XHRcdFx0cmVzdWx0LnRleHRDb250ZW50ID0gcG9pbnRzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdHJlc3VsdC5jbGFzc0xpc3QuYWRkKFwicmVtb3ZlUG9pbnRcIik7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRyZXN1bHQuY2xhc3NMaXN0LnJlbW92ZShcInJlbW92ZVBvaW50XCIpO1xyXG5cdH0sIDEwMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREYXRhKGluZGV4KSB7XHJcblx0c2V0QmFja2dyb3VuZChpbmRleCk7XHJcblx0c2V0VGFza0NvbnRlbnQoaW5kZXgpO1xyXG5cdHNldEFuc3dlcihpbmRleCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUFuc3dlckNhcmRzKCkge1xyXG5cdGFuc3dlckNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImEtYWN0aXZlXCIpO1xyXG5cdGRyYXdpbmdDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJkLWFjdGl2ZVwiKTtcclxuXHRhbnN3ZXJCdG5zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImItYWN0aXZlXCIpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5jb25zdCByYW5kVW5pcXVlTnVtYmVyID0gKG1pbiwgbWF4KSA9PiB7XHJcblx0Y29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG5cdHJldHVybiBpbmRleDtcclxufTtcclxuXHJcbmNvbnN0IGZldGNoRGF0YSA9IChnYW1lVHlwZSkgPT4ge1xyXG5cdGlmIChnYW1lVHlwZSA9PT0gXCJmbGF0XCIgfHwgZ2FtZVR5cGUgPT09IFwidGVhY2hlclwiKSB7XHJcblx0XHRpbmRleCA9IHJhbmRVbmlxdWVOdW1iZXIoMSwgMTYpO1xyXG5cdH0gZWxzZSBpZiAoZ2FtZVR5cGUgPT09IFwic3BhdGlhbFwiKSB7XHJcblx0XHRpbmRleCA9IHJhbmRVbmlxdWVOdW1iZXIoMjIsIDE2MCk7XHJcblx0fSBlbHNlIGlmIChnYW1lVHlwZSA9PT0gXCJtaXhcIikge1xyXG5cdFx0aW5kZXggPSByYW5kVW5pcXVlTnVtYmVyKDEwMCwgMTYwKTtcclxuXHR9XHJcblx0Y29uc29sZS5sb2coaW5kZXgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0UmFuZG9tVW5pcXVlTnVtYmVyKGFycikge1xyXG5cdGZldGNoRGF0YShnYW1lVHlwZSk7XHJcblx0d2hpbGUgKGFyci5pbmNsdWRlcyhpbmRleCkpIHtcclxuXHRcdGZldGNoRGF0YShnYW1lVHlwZSk7XHJcblx0fVxyXG5cdGFyci5wdXNoKGluZGV4KTtcclxuXHRyZXR1cm4gaW5kZXg7XHJcbn1cclxuXHJcbmlmIChnYW1lVHlwZSA9PT0gXCJ0ZWFjaGVyXCIpIHtcclxuXHRuZXh0QnRuLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0Y2hlY2tBbnN3ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdGdvb2RCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdGJhZEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0dXNlclBvaW50cy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0cmVzdWx0UG9wdXAuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG93bmxvYWRGaWxlXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZXh0UG9wdXBcIikudGV4dENvbnRlbnQgPVxyXG5cdFx0XCJQb2JpZXJ6IHBsaWsgeiBvZHBvd2llZHppYW1pXCI7XHJcbn1cclxuXHJcbm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcihhcnIpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG59KTtcclxuXHJcbmNsZWFyQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0c2V0RGF0YShpbmRleCk7XHJcbn0pO1xyXG5cclxuc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRmZXRjaERhdGEoZ2FtZVR5cGUpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdGFyci5wdXNoKGluZGV4KTtcclxuXHRjbGVhckNhbnZhcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdGNoZWNrQW5zd2VyLmRpc2FibGVkID0gZmFsc2U7XHJcblx0bmV4dEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdHN0YXJ0QnRuLmRpc2FibGVkID0gdHJ1ZTtcclxufSk7XHJcblxyXG5nb29kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0YWRkUG9pbnQoaW5kZXgpO1xyXG5cdGluZGV4ID0gZ2V0UmFuZG9tVW5pcXVlTnVtYmVyKGFycik7XHJcblx0Y29uc29sZS5sb2coaW5kZXgpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcblx0d2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG59KTtcclxuXHJcbmJhZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdHJlbW92ZVBvaW50KGluZGV4KTtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcihhcnIpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcblx0d2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG59KTtcclxuIl19
