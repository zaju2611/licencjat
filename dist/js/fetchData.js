"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),taskContent=document.querySelector(".content"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),result=document.querySelector(".result"),goodBtn=document.querySelector(".good-answer"),badBtn=document.querySelector(".wrong-answer"),startBtn=document.querySelector(".start-play"),answerBtns=document.querySelectorAll(".button-answer"),clearCanvas=document.querySelector(".clear-canvas"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),resultPopup=document.querySelector(".resultPopup"),arr=[],points=0,index=Math.floor(7*Math.random())+1,firebaseConfig=(arr.push(index),{apiKey:"AIzaSyAhj6kkaS_fMvLOwL-J4SXJ_DWSwejBmlo",authDomain:"licencjat-2a013.firebaseapp.com",databaseURL:"https://licencjat-2a013-default-rtdb.firebaseio.com",projectId:"licencjat-2a013",storageBucket:"licencjat-2a013.appspot.com",messagingSenderId:"676690164407",appId:"1:676690164407:web:b234c74f6f771f59a1ab32"}),app=(0,_firebaseApp.initializeApp)(firebaseConfig),database=(0,_firebaseDatabase.getDatabase)(app);function setBackground(e){var a=new Image,t=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(t,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),a.src=e.z):console.log("no data available")}).catch(function(e){console.error(e)}),a.addEventListener("load",function(){ctx.drawImage(a,0,0,canvas.width,canvas.height)})}function setTaskContent(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),taskContent.textContent=e.t):console.log("no data available")}).catch(function(e){console.error(e)})}function setAnswer(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),answerCard.style.backgroundImage="url('".concat(e.o,"')"),answerCard.style.backgroundSize="contain"):console.log("no data available")}).catch(function(e){console.error(e)})}function addPoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points+=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("addPoint"),setTimeout(function(){result.classList.remove("addPoint")},1e3)}function removePoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points-=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("removePoint"),setTimeout(function(){result.classList.remove("removePoint")},1e3)}function setData(e){setBackground(e),setTaskContent(e),setAnswer(e)}function removeAnswerCards(){answerCard.classList.remove("a-active"),drawingCard.classList.remove("d-active"),answerBtns.forEach(function(e){e.classList.remove("b-active")})}function getRandomUniqueNumber(e,a,t){for(var n=Math.floor(Math.random()*(a-e+1))+e;t.includes(n);)n=Math.floor(Math.random()*(a-e+1))+e;return t.push(n),n}clearCanvas.addEventListener("click",function(){setData(index)}),startBtn.addEventListener("click",function(){setData(index)}),goodBtn.addEventListener("click",function(){addPoint(index),index=getRandomUniqueNumber(1,7,arr),console.log(index),setData(index),removeAnswerCards()}),badBtn.addEventListener("click",function(){removePoint(index),index=getRandomUniqueNumber(1,7,arr),console.log(index),setData(index),removeAnswerCards()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoRGF0YS5qcyJdLCJuYW1lcyI6WyJfZmlyZWJhc2VBcHAiLCJyZXF1aXJlIiwiYXJyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpbGxSZWFkRnJlcXVlbnRseSIsInRhc2tDb250ZW50IiwiYW5zd2VyQ2FyZCIsImdvb2RCdG4iLCJyZXN1bHQiLCJiYWRCdG4iLCJjbGVhckNhbnZhcyIsImRyYXdpbmdDYXJkIiwicmVzdWx0UG9wdXAiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJtZXNzYWdpbmdTZW5kZXJJZCIsInBvaW50cyIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsImluaXRpYWxpemVBcHAiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0Iiwic2V0QmFja2dyb3VuZCIsImJhY2tncm91bmRJbWFnZSIsImFwcElkIiwiZGF0YVJlZiIsImFwcCIsImRhdGEiLCJ2YWwiLCJkYXRhYmFzZSIsImdldERhdGFiYXNlIiwiaW5kZXgiLCJlcnJvciIsIkltYWdlIiwiY29uc29sZSIsInJlZiIsImdldCIsImNoaWxkIiwiY29uY2F0Iiwic25hcHNob3QiLCJkcmF3SW1hZ2UiLCJzcmMiLCJ6IiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwid2lkdGgiLCJoZWlnaHQiLCJzZXRBbnN3ZXIiLCJ0aGVuIiwiZXhpc3RzIiwic3R5bGUiLCJiYWNrZ3JvdW5kU2l6ZSIsImxvZyIsIm8iLCJzZXRUaW1lb3V0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicCIsImFkZCIsInNldERhdGEiLCJzZXRUYXNrQ29udGVudCIsInJlbW92ZUFuc3dlckNhcmRzIiwiYW5zd2VyQnRucyIsImVsZW1lbnQiLCJnZXRSYW5kb21VbmlxdWVOdW1iZXIiLCJpbmNsdWRlcyIsInB1c2giLCJyYW5kb21OdW1iZXIiLCJzdGFydEJ0biIsImFkZFBvaW50IiwicmVtb3ZlUG9pbnQiLCJt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RUFDYjhCLGtCQUFpQixDQUNsQixDQUFDLEVBRUR0RCxPQUFPcUMsaUJBQWlCLFFBQVMsV0FDaEMwQixZQUFZdkMsS0FBSyxFQUNqQkEsTUFBUWlDLHNCQUFzQixFQUFHLEVBQUdwRSxHQUFHLEVBQ3ZDc0MsUUFBUWtCLElBQUlyQixLQUFLLEVBQ2pCNEIsUUFBUTVCLEtBQUssRUFDYjhCLGtCQUFpQixDQUNsQixDQUFDIiwiZmlsZSI6ImZldGNoRGF0YS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FudmFzXCIpO1xyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG5jb25zdCB0YXNrQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKTtcclxuY29uc3QgYW5zd2VyQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1hbnN3ZXItYm9hcmRcIlxyXG4pO1xyXG5jb25zdCByZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJlc3VsdFwiKTtcclxuY29uc3QgZ29vZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ29vZC1hbnN3ZXJcIik7XHJcbmNvbnN0IGJhZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JvbmctYW5zd2VyXCIpO1xyXG5jb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RhcnQtcGxheVwiKTtcclxuY29uc3QgYW5zd2VyQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnV0dG9uLWFuc3dlclwiKTtcclxuY29uc3QgY2xlYXJDYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsZWFyLWNhbnZhc1wiKTtcclxuY29uc3QgZHJhd2luZ0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLm1haW5EcmF3X2NvbnRhaW5lci1jYXJkcy1jb250YWluZXItZHJhd2luZy1ib2FyZFwiXHJcbik7XHJcbmNvbnN0IHJlc3VsdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRQb3B1cFwiKTtcclxuY29uc3QgYXJyID0gW107XHJcbmxldCBwb2ludHMgPSAwO1xyXG5sZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KSArIDE7XHJcbmFyci5wdXNoKGluZGV4KTtcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1hcHAuanNcIjtcclxuaW1wb3J0IHtcclxuXHRnZXREYXRhYmFzZSxcclxuXHRyZWYsXHJcblx0Y2hpbGQsXHJcblx0Z2V0LFxyXG59IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1kYXRhYmFzZS5qc1wiO1xyXG5cclxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcblx0YXBpS2V5OiBcIkFJemFTeUFoajZra2FTX2ZNdkxPd0wtSjRTWEpfRFdTd2VqQm1sb1wiLFxyXG5cdGF1dGhEb21haW46IFwibGljZW5jamF0LTJhMDEzLmZpcmViYXNlYXBwLmNvbVwiLFxyXG5cdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vbGljZW5jamF0LTJhMDEzLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbVwiLFxyXG5cdHByb2plY3RJZDogXCJsaWNlbmNqYXQtMmEwMTNcIixcclxuXHRzdG9yYWdlQnVja2V0OiBcImxpY2VuY2phdC0yYTAxMy5hcHBzcG90LmNvbVwiLFxyXG5cdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjY3NjY5MDE2NDQwN1wiLFxyXG5cdGFwcElkOiBcIjE6Njc2NjkwMTY0NDA3OndlYjpiMjM0Yzc0ZjZmNzcxZjU5YTFhYjMyXCIsXHJcbn07XHJcblxyXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuXHJcbmNvbnN0IGRhdGFiYXNlID0gZ2V0RGF0YWJhc2UoYXBwKTtcclxuXHJcbmZ1bmN0aW9uIHNldEJhY2tncm91bmQoaW5kZXgpIHtcclxuXHRjb25zdCBiYWNrZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0YmFja2dyb3VuZEltYWdlLnNyYyA9IGRhdGEuejtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG5cclxuXHRiYWNrZ3JvdW5kSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShiYWNrZ3JvdW5kSW1hZ2UsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFRhc2tDb250ZW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHRhc2tDb250ZW50LnRleHRDb250ZW50ID0gZGF0YS50O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEFuc3dlcihpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRhbnN3ZXJDYXJkLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7ZGF0YS5vfScpYDtcclxuXHRcdFx0XHRhbnN3ZXJDYXJkLnN0eWxlLmJhY2tncm91bmRTaXplID0gXCJjb250YWluXCI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUG9pbnQoaW5kZXgpIHtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0cG9pbnRzICs9IGRhdGEucDtcclxuXHRcdFx0XHRyZXN1bHQudGV4dENvbnRlbnQgPSBwb2ludHM7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJubyBkYXRhIGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0XHR9KTtcclxuXHJcblx0cmVzdWx0LmNsYXNzTGlzdC5hZGQoXCJhZGRQb2ludFwiKTtcclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkUG9pbnRcIik7XHJcblx0fSwgMTAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVBvaW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHBvaW50cyAtPSBkYXRhLnA7XHJcblx0XHRcdFx0cmVzdWx0LnRleHRDb250ZW50ID0gcG9pbnRzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdHJlc3VsdC5jbGFzc0xpc3QuYWRkKFwicmVtb3ZlUG9pbnRcIik7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRyZXN1bHQuY2xhc3NMaXN0LnJlbW92ZShcInJlbW92ZVBvaW50XCIpO1xyXG5cdH0sIDEwMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREYXRhKGluZGV4KSB7XHJcblx0c2V0QmFja2dyb3VuZChpbmRleCk7XHJcblx0c2V0VGFza0NvbnRlbnQoaW5kZXgpO1xyXG5cdHNldEFuc3dlcihpbmRleCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUFuc3dlckNhcmRzKCkge1xyXG5cdGFuc3dlckNhcmQuY2xhc3NMaXN0LnJlbW92ZShcImEtYWN0aXZlXCIpO1xyXG5cdGRyYXdpbmdDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJkLWFjdGl2ZVwiKTtcclxuXHRhbnN3ZXJCdG5zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImItYWN0aXZlXCIpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSYW5kb21VbmlxdWVOdW1iZXIobWluLCBtYXgsIGFycikge1xyXG5cdGxldCByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG5cdHdoaWxlIChhcnIuaW5jbHVkZXMocmFuZG9tTnVtYmVyKSkge1xyXG5cdFx0cmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuXHR9XHJcblx0YXJyLnB1c2gocmFuZG9tTnVtYmVyKTtcclxuXHRyZXR1cm4gcmFuZG9tTnVtYmVyO1xyXG59XHJcblxyXG5jbGVhckNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG59KTtcclxuXHJcbnN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0c2V0RGF0YShpbmRleCk7XHJcbn0pO1xyXG5cclxuZ29vZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGFkZFBvaW50KGluZGV4KTtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcigxLCA3LCBhcnIpO1xyXG5cdGNvbnNvbGUubG9nKGluZGV4KTtcclxuXHRzZXREYXRhKGluZGV4KTtcclxuXHRyZW1vdmVBbnN3ZXJDYXJkcygpO1xyXG59KTtcclxuXHJcbmJhZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdHJlbW92ZVBvaW50KGluZGV4KTtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcigxLCA3LCBhcnIpO1xyXG5cdGNvbnNvbGUubG9nKGluZGV4KTtcclxuXHRzZXREYXRhKGluZGV4KTtcclxuXHRyZW1vdmVBbnN3ZXJDYXJkcygpO1xyXG59KTtcclxuIl19
