"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),canvas=document.querySelector(".canvas"),ctx=canvas.getContext("2d",{willReadFrequently:!0}),taskContent=document.querySelector(".content"),answerCard=document.querySelector(".mainDraw_container-cards-container-answer-board"),checkAnswer=document.querySelector(".check-answer"),result=document.querySelector(".result"),goodBtn=document.querySelector(".good-answer"),badBtn=document.querySelector(".wrong-answer"),startBtn=document.querySelector(".start-play"),answerBtns=document.querySelectorAll(".button-answer"),clearCanvas=document.querySelector(".clear-canvas"),drawingCard=document.querySelector(".mainDraw_container-cards-container-drawing-board"),userPoints=document.querySelector(".points"),nextBtn=document.querySelector(".next"),resultPopup=document.querySelector(".resultPopup"),urlParams=new URLSearchParams(window.location.search),gameType=urlParams.get("game"),arr=[],points=0,index=0,app=(0,_firebaseApp.initializeApp)(firebaseConfig),database=(0,_firebaseDatabase.getDatabase)(app);function setBackground(e){var a=new Image,t=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(t,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),a.src=e.z):console.log("no data available")}).catch(function(e){console.error(e)}),a.addEventListener("load",function(){ctx.drawImage(a,0,0,canvas.width,canvas.height)})}function setTaskContent(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),taskContent.textContent=e.t):console.log("no data available")}).catch(function(e){console.error(e)})}function setAnswer(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),answerCard.style.backgroundImage="url('".concat(e.o,"')"),answerCard.style.backgroundSize="contain",answerCard.style.backgroundPosition="center"):console.log("no data available")}).catch(function(e){console.error(e)})}function addPoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points+=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("addPoint"),setTimeout(function(){result.classList.remove("addPoint")},1e3)}function removePoint(e){var a=(0,_firebaseDatabase.ref)((0,_firebaseDatabase.getDatabase)());(0,_firebaseDatabase.get)((0,_firebaseDatabase.child)(a,"exercise/".concat(e))).then(function(e){e.exists()?(e=e.val(),points-=e.p,result.textContent=points):console.log("no data available")}).catch(function(e){console.error(e)}),result.classList.add("removePoint"),setTimeout(function(){result.classList.remove("removePoint")},1e3)}function setData(e){setBackground(e),setTaskContent(e),setAnswer(e)}function removeAnswerCards(){answerCard.classList.remove("a-active"),drawingCard.classList.remove("d-active"),answerBtns.forEach(function(e){e.classList.remove("b-active")})}var randUniqueNumber=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},fetchData=function(e){"flat"===e||"teacher"===e?index=randUniqueNumber(1,16):"spatial"===e?index=randUniqueNumber(22,160):"mix"===e&&(index=randUniqueNumber(100,160)),console.log(index)};function getRandomUniqueNumber(e){for(fetchData(gameType);e.includes(index);)fetchData(gameType);return e.push(index),index}"teacher"===gameType&&(nextBtn.style.display="block",checkAnswer.style.display="none",goodBtn.style.display="none",badBtn.style.display="none",userPoints.style.display="none",resultPopup.style.display="none",document.querySelector(".downloadFile").style.display="block",document.querySelector(".textPopup").textContent="Pobierz plik z odpowiedziami"),nextBtn.addEventListener("click",function(){setData(index=getRandomUniqueNumber(arr))}),clearCanvas.addEventListener("click",function(){setData(index)}),startBtn.addEventListener("click",function(){fetchData(gameType),setData(index),arr.push(index),clearCanvas.disabled=!1,checkAnswer.disabled=!1,nextBtn.disabled=!1,startBtn.disabled=!0}),goodBtn.addEventListener("click",function(){addPoint(index),index=getRandomUniqueNumber(arr),console.log(index),setData(index),removeAnswerCards()}),badBtn.addEventListener("click",function(){removePoint(index),setData(index=getRandomUniqueNumber(arr)),removeAnswerCards()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoRGF0YS5qcyJdLCJuYW1lcyI6WyJfZmlyZWJhc2VBcHAiLCJyZXF1aXJlIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjdHgiLCJnZXRDb250ZXh0Iiwid2lsbFJlYWRGcmVxdWVudGx5IiwidGFza0NvbnRlbnQiLCJhbnN3ZXJDYXJkIiwicmVzdWx0IiwiY2hlY2tBbnN3ZXIiLCJnb29kQnRuIiwiYmFkQnRuIiwiY2xlYXJDYW52YXMiLCJkcmF3aW5nQ2FyZCIsInVzZXJQb2ludHMiLCJuZXh0QnRuIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJyZXN1bHRQb3B1cCIsInVybFBhcmFtcyIsImdhbWVUeXBlIiwiYXJyIiwicG9pbnRzIiwiYmFja2dyb3VuZEltYWdlIiwiZmlyZWJhc2VDb25maWciLCJjb25zb2xlIiwiZ2V0RGF0YWJhc2UiLCJhcHAiLCJzZXRCYWNrZ3JvdW5kIiwiaW5kZXgiLCJJbWFnZSIsImRhdGFSZWYiLCJyZWYiLCJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwidGhlbiIsImRyYXdJbWFnZSIsInNuYXBzaG90IiwiZXhpc3RzIiwiZGF0YSIsInZhbCIsInNldFRhc2tDb250ZW50IiwieiIsImNoaWxkIiwiZXJyb3IiLCJ3aWR0aCIsImhlaWdodCIsInN0eWxlIiwiYmFja2dyb3VuZFNpemUiLCJ0ZXh0Q29udGVudCIsImJhY2tncm91bmRQb3NpdGlvbiIsImxvZyIsImNvbmNhdCIsIm8iLCJzZXRUaW1lb3V0IiwicCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNldEFuc3dlciIsImFuc3dlckJ0bnMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInJhbmRVbmlxdWVOdW1iZXIiLCJNYXRoIiwiaW5jbHVkZXMiLCJkaXNwbGF5IiwibWluIiwibWF4IiwiZmxvb3IiLCJyYW5kb20iLCJmZXRjaERhdGEiLCJzZXREYXRhIiwic3RhcnRCdG4iLCJkaXNhYmxlZCIsImFkZFBvaW50IiwicmVtb3ZlUG9pbnQiLCJnZXRSYW5kb21VbmlxdWVOdW1iZXIiLCJyZW1vdmVBbnN3ZXJDYXJkcyIsInB1c2giXSwibWFwcGluZ3MiOiJhQWtDQSxJQUFBQSxhQUFBQyxRQUFBLDJEQUFBLEVBRUFDLGtCQUFBRCxRQUFBLGdFQUFBLEVBcENNRSxPQUFTQyxTQUFTQyxjQUFjLFNBQVMsRUFDekNDLElBQU1ILE9BQU9JLFdBQVcsS0FBTSxDQUFFQyxtQkFBb0IsQ0FBQSxDQUFLLENBQUMsRUF5QmhFQyxZQUFBTCxTQUFBQyxjQUFBLFVBQUEsRUFDQUssV0FBQU4sU0FBQUMsY0EzQkEsa0RBQWdELEVBQ1ZHLFlBQWtCSixTQUFFQyxjQUFBLGVBQUEsRUFBT00sT0FBQVAsU0FBQUMsY0FBQSxTQUFBLEVBQzNESSxRQUFXTCxTQUFHQSxjQUFTQyxjQUF5QixFQUNoREssT0FBVU4sU0FBR0EsY0FBU0MsZUFDM0IsRUFFS08sU0FBV1IsU0FBV0MsY0FBYyxhQUFDLEVBQ3JDTSxXQUFTUCxTQUFTQyxpQkFBdUIsZ0JBQUMsRUFDMUNRLFlBQVVULFNBQVNDLGNBQWMsZUFBZSxFQUNoRFMsWUFBU1YsU0FBU0MsY0FDeEIsbURBQXNELEVBRWhEVSxXQUFjWCxTQUFTQyxjQUFjLFNBQUEsRUFDckNXLFFBQVdaLFNBQUdBLGNBQVNDLE9BQzVCLEVBRUtZLFlBQWFiLFNBQVNDLGNBQWMsY0FBVSxFQUM5Q2EsVUFBVWQsSUFBUWUsZ0JBQWVDLE9BQVFDLFNBQUFDLE1BQUEsRUFDekNDLFNBQVdDLFVBQVluQixJQUFBQSxNQUFBQSxFQUV2Qm9CLElBQVEsR0FFUkMsT0FBUSxFQUNWQyxNQUFNLEVBc0JOQyxLQUFBQSxFQUFBQSxhQUFBQSxlQUFtQkMsY0FBUyxFQUU1QkMsVUFBVyxFQUFBQyxrQkFBQUEsYUFBQ0MsR0FBQSxFQVRoQixTQVdJQyxjQUNLQyxHQVhSLElBWUVKLEVBQW9CLElBQUFLLE1BQ25CQyxHQUFBLEVBQUFDLGtCQUFBQSxNQUFBLEVBQUFOLGtCQUFBQSxh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LENBQUMiLCJmaWxlIjoiZmV0Y2hEYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW52YXNcIik7XHJcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwgeyB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUgfSk7XHJcbmNvbnN0IHRhc2tDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xyXG5jb25zdCBhbnN3ZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcIi5tYWluRHJhd19jb250YWluZXItY2FyZHMtY29udGFpbmVyLWFuc3dlci1ib2FyZFwiXHJcbik7XHJcbmNvbnN0IGNoZWNrQW5zd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGVjay1hbnN3ZXJcIik7XHJcbmNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0XCIpO1xyXG5jb25zdCBnb29kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nb29kLWFuc3dlclwiKTtcclxuY29uc3QgYmFkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cm9uZy1hbnN3ZXJcIik7XHJcbmNvbnN0IHN0YXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydC1wbGF5XCIpO1xyXG5jb25zdCBhbnN3ZXJCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b24tYW5zd2VyXCIpO1xyXG5jb25zdCBjbGVhckNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXItY2FudmFzXCIpO1xyXG5jb25zdCBkcmF3aW5nQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIubWFpbkRyYXdfY29udGFpbmVyLWNhcmRzLWNvbnRhaW5lci1kcmF3aW5nLWJvYXJkXCJcclxuKTtcclxuY29uc3QgdXNlclBvaW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9pbnRzXCIpO1xyXG5jb25zdCBuZXh0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXh0XCIpO1xyXG5jb25zdCByZXN1bHRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdWx0UG9wdXBcIik7XHJcbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbmNvbnN0IGdhbWVUeXBlID0gdXJsUGFyYW1zLmdldChcImdhbWVcIik7XHJcblxyXG5jb25zdCBhcnIgPSBbXTtcclxubGV0IHBvaW50cyA9IDA7XHJcbmxldCBpbmRleCA9IDA7XHJcblxyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWFwcC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldERhdGFiYXNlLFxyXG5cdHJlZixcclxuXHRjaGlsZCxcclxuXHRnZXQsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWRhdGFiYXNlLmpzXCI7XHJcblxyXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuXHJcbmNvbnN0IGRhdGFiYXNlID0gZ2V0RGF0YWJhc2UoYXBwKTtcclxuXHJcbmZ1bmN0aW9uIHNldEJhY2tncm91bmQoaW5kZXgpIHtcclxuXHRjb25zdCBiYWNrZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRjb25zdCBkYXRhUmVmID0gcmVmKGdldERhdGFiYXNlKCkpO1xyXG5cdGdldChjaGlsZChkYXRhUmVmLCBgZXhlcmNpc2UvJHtpbmRleH1gKSlcclxuXHRcdC50aGVuKChzbmFwc2hvdCkgPT4ge1xyXG5cdFx0XHRpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuXHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XHJcblx0XHRcdFx0YmFja2dyb3VuZEltYWdlLnNyYyA9IGRhdGEuejtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG5cclxuXHRiYWNrZ3JvdW5kSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShiYWNrZ3JvdW5kSW1hZ2UsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFRhc2tDb250ZW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHRhc2tDb250ZW50LnRleHRDb250ZW50ID0gZGF0YS50O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEFuc3dlcihpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRhbnN3ZXJDYXJkLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7ZGF0YS5vfScpYDtcclxuXHRcdFx0XHRhbnN3ZXJDYXJkLnN0eWxlLmJhY2tncm91bmRTaXplID0gXCJjb250YWluXCI7XHJcblx0XHRcdFx0YW5zd2VyQ2FyZC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcImNlbnRlclwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFBvaW50KGluZGV4KSB7XHJcblx0Y29uc3QgZGF0YVJlZiA9IHJlZihnZXREYXRhYmFzZSgpKTtcclxuXHRnZXQoY2hpbGQoZGF0YVJlZiwgYGV4ZXJjaXNlLyR7aW5kZXh9YCkpXHJcblx0XHQudGhlbigoc25hcHNob3QpID0+IHtcclxuXHRcdFx0aWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cdFx0XHRcdHBvaW50cyArPSBkYXRhLnA7XHJcblx0XHRcdFx0cmVzdWx0LnRleHRDb250ZW50ID0gcG9pbnRzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwibm8gZGF0YSBhdmFpbGFibGVcIik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSk7XHJcblxyXG5cdHJlc3VsdC5jbGFzc0xpc3QuYWRkKFwiYWRkUG9pbnRcIik7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRyZXN1bHQuY2xhc3NMaXN0LnJlbW92ZShcImFkZFBvaW50XCIpO1xyXG5cdH0sIDEwMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVQb2ludChpbmRleCkge1xyXG5cdGNvbnN0IGRhdGFSZWYgPSByZWYoZ2V0RGF0YWJhc2UoKSk7XHJcblx0Z2V0KGNoaWxkKGRhdGFSZWYsIGBleGVyY2lzZS8ke2luZGV4fWApKVxyXG5cdFx0LnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcblx0XHRcdGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcclxuXHRcdFx0XHRwb2ludHMgLT0gZGF0YS5wO1xyXG5cdFx0XHRcdHJlc3VsdC50ZXh0Q29udGVudCA9IHBvaW50cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm5vIGRhdGEgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0pO1xyXG5cclxuXHRyZXN1bHQuY2xhc3NMaXN0LmFkZChcInJlbW92ZVBvaW50XCIpO1xyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0cmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoXCJyZW1vdmVQb2ludFwiKTtcclxuXHR9LCAxMDAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGF0YShpbmRleCkge1xyXG5cdHNldEJhY2tncm91bmQoaW5kZXgpO1xyXG5cdHNldFRhc2tDb250ZW50KGluZGV4KTtcclxuXHRzZXRBbnN3ZXIoaW5kZXgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVBbnN3ZXJDYXJkcygpIHtcclxuXHRhbnN3ZXJDYXJkLmNsYXNzTGlzdC5yZW1vdmUoXCJhLWFjdGl2ZVwiKTtcclxuXHRkcmF3aW5nQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiZC1hY3RpdmVcIik7XHJcblx0YW5zd2VyQnRucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJiLWFjdGl2ZVwiKTtcclxuXHR9KTtcclxufVxyXG5cclxuY29uc3QgcmFuZFVuaXF1ZU51bWJlciA9IChtaW4sIG1heCkgPT4ge1xyXG5cdGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuXHRyZXR1cm4gaW5kZXg7XHJcbn07XHJcblxyXG5jb25zdCBmZXRjaERhdGEgPSAoZ2FtZVR5cGUpID0+IHtcclxuXHRpZiAoZ2FtZVR5cGUgPT09IFwiZmxhdFwiIHx8IGdhbWVUeXBlID09PSBcInRlYWNoZXJcIikge1xyXG5cdFx0aW5kZXggPSByYW5kVW5pcXVlTnVtYmVyKDEsIDE2KTtcclxuXHR9IGVsc2UgaWYgKGdhbWVUeXBlID09PSBcInNwYXRpYWxcIikge1xyXG5cdFx0aW5kZXggPSByYW5kVW5pcXVlTnVtYmVyKDIyLCAxNjApO1xyXG5cdH0gZWxzZSBpZiAoZ2FtZVR5cGUgPT09IFwibWl4XCIpIHtcclxuXHRcdGluZGV4ID0gcmFuZFVuaXF1ZU51bWJlcigxMDAsIDE2MCk7XHJcblx0fVxyXG5cdGNvbnNvbGUubG9nKGluZGV4KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldFJhbmRvbVVuaXF1ZU51bWJlcihhcnIpIHtcclxuXHRmZXRjaERhdGEoZ2FtZVR5cGUpO1xyXG5cdHdoaWxlIChhcnIuaW5jbHVkZXMoaW5kZXgpKSB7XHJcblx0XHRmZXRjaERhdGEoZ2FtZVR5cGUpO1xyXG5cdH1cclxuXHRhcnIucHVzaChpbmRleCk7XHJcblx0cmV0dXJuIGluZGV4O1xyXG59XHJcblxyXG5pZiAoZ2FtZVR5cGUgPT09IFwidGVhY2hlclwiKSB7XHJcblx0bmV4dEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdGNoZWNrQW5zd2VyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRnb29kQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRiYWRCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdHVzZXJQb2ludHMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdHJlc3VsdFBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvd25sb2FkRmlsZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGV4dFBvcHVwXCIpLnRleHRDb250ZW50ID1cclxuXHRcdFwiUG9iaWVyeiBwbGlrIHogb2Rwb3dpZWR6aWFtaVwiO1xyXG59XHJcblxyXG5uZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0aW5kZXggPSBnZXRSYW5kb21VbmlxdWVOdW1iZXIoYXJyKTtcclxuXHRzZXREYXRhKGluZGV4KTtcclxufSk7XHJcblxyXG5jbGVhckNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG59KTtcclxuXHJcbnN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0ZmV0Y2hEYXRhKGdhbWVUeXBlKTtcclxuXHRzZXREYXRhKGluZGV4KTtcclxuXHRhcnIucHVzaChpbmRleCk7XHJcblx0Y2xlYXJDYW52YXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRjaGVja0Fuc3dlci5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdG5leHRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRzdGFydEJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbn0pO1xyXG5cclxuZ29vZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGFkZFBvaW50KGluZGV4KTtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcihhcnIpO1xyXG5cdGNvbnNvbGUubG9nKGluZGV4KTtcclxuXHRzZXREYXRhKGluZGV4KTtcclxuXHRyZW1vdmVBbnN3ZXJDYXJkcygpO1xyXG59KTtcclxuXHJcbmJhZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdHJlbW92ZVBvaW50KGluZGV4KTtcclxuXHRpbmRleCA9IGdldFJhbmRvbVVuaXF1ZU51bWJlcihhcnIpO1xyXG5cdHNldERhdGEoaW5kZXgpO1xyXG5cdHJlbW92ZUFuc3dlckNhcmRzKCk7XHJcbn0pO1xyXG4iXX0=
