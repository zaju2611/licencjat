"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseAuth=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),app=(0,_firebaseApp.initializeApp)(firebaseConfig),auth=(0,_firebaseAuth.getAuth)(),db=(0,_firebaseDatabase.getDatabase)(app),username=document.querySelector("#username"),password=document.querySelector("#password"),confirmPassword=document.querySelector("#password2"),email=document.querySelector("#email"),sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeBtn=document.querySelector(".close"),popup=document.querySelector(".popup"),popupText=document.querySelector(".popup p");function registerUser(){(0,_firebaseAuth.createUserWithEmailAndPassword)(auth,email.value,password.value).then(function(e){e=e.user;(0,_firebaseDatabase.set)((0,_firebaseDatabase.ref)(db,"users/"+e.uid),{username:username.value,email:email.value,highScoreFlat:"",highScoreSpatial:"",highScoreMix:"",password:encPass()}).then(function(){popup.classList.add("show-popup"),username.value="",email.value="",password.value="",confirmPassword.value=""}).catch(function(e){alert("error "+e)})}).catch(function(e){popupText.textContent="Użytkownik o tym adresie email już istnieje",popup.classList.add("show-popup")})}var encPass=function(){return CryptoJS.AES.encrypt(password.value,password.value).toString()},showErr=function(e,r){var e=e.parentElement,a=e.querySelector(".error-text");e.classList.add("error"),a.textContent=r},clearErr=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value.trim()?showErr(e,e.placeholder.toLowerCase()+" !"):(clearErr(e),e===username?checkLenght(username,3):e===password?checkLenght(password,8):e===confirmPassword?checkPassword(password,confirmPassword):e===email&&checkEmail(email))})},checkLenght=function(e,r){e.value.length<r&&showErr(e,"".concat(e.previousElementSibling.innerText.slice(0,-1)," musi zawierać minimum ").concat(r," znaki"))},checkPassword=function(e,r){e.value!=r.value&&showErr(r,"Hasła są różne!")},checkErrors=function(){var e=document.querySelectorAll(".mainRegister_container-form-box"),r=0;e.forEach(function(e){e.classList.contains("error")&&r++}),0==r&&registerUser(),console.log(r)},checkEmail=function(e){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1-3}\.[0-9]{1-3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearErr(email):showErr(e,"Email jest niepoprawny")};clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,password,confirmPassword,email].forEach(function(e){e.value="",clearErr(e)})}),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,password,confirmPassword,email]),checkErrors()}),signout.addEventListener("click",function(e){e.preventDefault(),(0,_firebaseAuth.signOut)(auth).then(function(){sessionStorage.removeItem("user"),location.href="http://localhost:3000/index.html"}).catch(function(e){alert("błąd przy wylogowywaniu")})}),closeBtn.addEventListener("click",function(e){e.preventDefault(),location.href="http://localhost:3000/login.html"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIl9maXJlYmFzZUFwcCIsInJlcXVpcmUiLCJfZmlyZWJhc2VBdXRoIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJzZW5kQnRuIiwiaW5pdGlhbGl6ZUFwcCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGVhckJ0biIsImdldEF1dGgiLCJkb2N1bWVudCIsImNsb3NlQnRuIiwiYXBwIiwicG9wdXBUZXh0IiwicGFzc3dvcmQiLCJyZWdpc3RlclVzZXIiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJlbWFpbCIsInVzZXJDcmVkZW50aWFsIiwic2V0IiwicmVmIiwidXNlcm5hbWUiLCJ2YWx1ZSIsImhpZ2hTY29yZUZsYXQiLCJoaWdoU2NvcmVTcGF0aWFsIiwiYXV0aCIsInRoZW4iLCJwb3B1cCIsInVzZXIiLCJkYiIsInVpZCIsImNvbmZpcm1QYXNzd29yZCIsImhpZ2hTY29yZU1peCIsImVuY1Bhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJDcnlwdG9KUyIsIkFFUyIsInRvU3RyaW5nIiwiZXJyb3IiLCJhbGVydCIsImZvcm1Cb3giLCJwYXJlbnRFbGVtZW50IiwiZXJyb3JNc2ciLCJ0ZXh0Q29udGVudCIsImNsZWFyRXJyIiwiaW5wdXQiLCJjaGVja0Zvcm0iLCJmb3JFYWNoIiwiZWwiLCJtc2ciLCJjaGVja0xlbmdodCIsImNoZWNrRW1haWwiLCJyZW1vdmUiLCJsZW5ndGgiLCJzaG93RXJyIiwicGxhY2Vob2xkZXIiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2hlY2tQYXNzd29yZCIsImlucHV0MiIsImNoZWNrRXJyb3JzIiwiYWxsSW5wdXRzIiwiZXJyb3JDb3VudCIsIm1pbiIsImNvbnNvbGUiLCJpbm5lclRleHQiLCJzbGljZSIsInJlIiwiY29uY2F0IiwiaW5wdXQxIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWlucyIsInNpZ25PdXQiLCJzZXNzaW9uU3RvcmFnZSIsImxvZyIsImxvY2F0aW9uIiwiaHJlZiIsImVsZW1lbnQiLCJzaWdub3V0IiwicmVtb3ZlSXRlbSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBQUEsYUFBQUMsUUFBQSwyREFBQSxFQUNBQyxjQUFBRCxRQUFBLDREQUFBLEVBWUFFLGtCQUFBRixRQUFBLGdFQUFBLEVBT01HLEtBQU8sRUFBQUMsYUFBQUEsZUFBWUMsY0FBYyxFQUNqQ0MsTUFBUSxFQUFBQyxjQUFBQSxTQUFHQyxFQUNYQyxJQUFBQSxFQUFBQSxrQkFBQUEsYUFBbUJDLEdBQUNMLEVBRXBCTSxTQUFZSCxTQUFTSCxjQUFjLFdBQVcsRUFFcERPLFNBQVNDLFNBQWVSLGNBQUEsV0FBQSxFQUN2QlMsZ0JBQUFBLFNBQUFBLGNBQUFBLFlBQXFDQyxFQUVuQ0EsTUFBVVAsU0FBR1EsY0FBbUIsUUFBQSxFQUNoQ2IsUUFBQWMsU0FBQUEsY0FBSUMsT0FBQUEsRUFDSEMsU0FBVUEsU0FBU0MsY0FBSyxRQUFBLEVBQ3hCTCxTQUFPQSxTQUFXVixjQUFBLFFBQUEsRUFDbEJnQixNQUFBQSxTQUFpQmhCLGNBQUEsUUFBQSxFQUNqQmlCLFVBQUFBLFNBQW9CakIsY0FBQSxVQUFBLEVBUnhCLFNBVUlPLGdCQVRILEVBQUFFLGNBQUFBLGdDQVdlUyxLQUFBUixNQUFBSyxNQUFBUixTQUFBUSxLQUFBLEVBVmJJLEtBV0VDLFNBQUFBLEdBQ0FOLEVBQVNDLEVBQVVNLE1BVnJCLEVBQUFULGtCQUFBQSxNQVdFRixFQUFBQSxrQkFBQUEsS0FBS1ksR0FBQ1AsU0FBVU0sRUFBQUUsR0FBQSxFQUFBLENBVmpCVCxTQVdTQSxTQUFTQyxNQVZsQkwsTUFXQ2MsTUFBQUEsTUFDRFIsY0FDTyxHQVhQQyxpQkFZZSxHQUNmUSxhQUFFLEdBQ0ZsQixTQUNLbUIsUUFBQSxDQVpOLENBYUFwQixFQUNBYyxLQUFNTyxXQUNMUCxNQUFBTyxVQUFBQyxJQUFBLFlBQUEsRUFDSmQsU0FBQUMsTUFBQSxHQUVNVyxNQUFPWCxNQUFHLEdBQ2ZS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U0FBQ3hDLEdBQ1BDLE1BQU0seUJBQXlCLENBQ2hDLENBQUMsQ0FDSCxDQUFDLEVBQ0Q3QixTQUFTMkQsaUJBQWlCLFFBQVMsU0FBQ0MsR0FDbkNBLEVBQUVDLGVBQWMsRUFDaEJNLFNBQVNDLEtBQU8sa0NBQ2pCLENBQUMiLCJmaWxlIjoicmVnaXN0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWFwcC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldEF1dGgsXHJcblx0Y3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLFxyXG5cdHNpZ25PdXQsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWF1dGguanNcIjtcclxuaW1wb3J0IHtcclxuXHRnZXREYXRhYmFzZSxcclxuXHRzZXQsXHJcblx0cmVmLFxyXG59IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1kYXRhYmFzZS5qc1wiO1xyXG5cclxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcbmNvbnN0IGF1dGggPSBnZXRBdXRoKCk7XHJcbmNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoYXBwKTtcclxuXHJcbmNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VybmFtZVwiKTtcclxuY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bhc3N3b3JkXCIpO1xyXG5jb25zdCBjb25maXJtUGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bhc3N3b3JkMlwiKTtcclxuY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VtYWlsXCIpO1xyXG5jb25zdCBzZW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZW5kXCIpO1xyXG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXJcIik7XHJcbmNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpO1xyXG5jb25zdCBwb3B1cFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwIHBcIik7XHJcblxyXG5mdW5jdGlvbiByZWdpc3RlclVzZXIoKSB7XHJcblx0Y3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLnZhbHVlLCBwYXNzd29yZC52YWx1ZSlcclxuXHRcdC50aGVuKCh1c2VyQ3JlZGVudGlhbCkgPT4ge1xyXG5cdFx0XHRjb25zdCB1c2VyID0gdXNlckNyZWRlbnRpYWwudXNlcjtcclxuXHRcdFx0c2V0KHJlZihkYiwgXCJ1c2Vycy9cIiArIHVzZXIudWlkKSwge1xyXG5cdFx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZS52YWx1ZSxcclxuXHRcdFx0XHRlbWFpbDogZW1haWwudmFsdWUsXHJcblx0XHRcdFx0aGlnaFNjb3JlRmxhdDogXCJcIixcclxuXHRcdFx0XHRoaWdoU2NvcmVTcGF0aWFsOiBcIlwiLFxyXG5cdFx0XHRcdGhpZ2hTY29yZU1peDogXCJcIixcclxuXHRcdFx0XHRwYXNzd29yZDogZW5jUGFzcygpLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHRcdC50aGVuKCgpID0+IHtcclxuXHRcdFx0XHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJzaG93LXBvcHVwXCIpO1xyXG5cdFx0XHRcdFx0dXNlcm5hbWUudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0ZW1haWwudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0cGFzc3dvcmQudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0Y29uZmlybVBhc3N3b3JkLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdGFsZXJ0KFwiZXJyb3IgXCIgKyBlcnJvcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRwb3B1cFRleHQudGV4dENvbnRlbnQgPSBcIlXFvHl0a293bmlrIG8gdHltIGFkcmVzaWUgZW1haWwganXFvCBpc3RuaWVqZVwiO1xyXG5cdFx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKFwic2hvdy1wb3B1cFwiKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5jb25zdCBlbmNQYXNzID0gKCkgPT4ge1xyXG5cdGNvbnN0IHBhc3MgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChwYXNzd29yZC52YWx1ZSwgcGFzc3dvcmQudmFsdWUpO1xyXG5cdHJldHVybiBwYXNzLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyID0gKGlucHV0LCBtc2cpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBlcnJvck1zZyA9IGZvcm1Cb3gucXVlcnlTZWxlY3RvcihcIi5lcnJvci10ZXh0XCIpO1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG5cdGVycm9yTXNnLnRleHRDb250ZW50ID0gbXNnO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFcnIgPSAoaW5wdXQpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IChpbnB1dCkgPT4ge1xyXG5cdGlucHV0LmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRpZiAoZWwudmFsdWUudHJpbSgpID09PSBcIlwiKSB7XHJcblx0XHRcdHNob3dFcnIoZWwsIGVsLnBsYWNlaG9sZGVyLnRvTG93ZXJDYXNlKCkgKyBcIiAhXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnIoZWwpO1xyXG5cdFx0XHRpZiAoZWwgPT09IHVzZXJuYW1lKSB7XHJcblx0XHRcdFx0Y2hlY2tMZW5naHQodXNlcm5hbWUsIDMpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGVsID09PSBwYXNzd29yZCkge1xyXG5cdFx0XHRcdGNoZWNrTGVuZ2h0KHBhc3N3b3JkLCA4KTtcclxuXHRcdFx0fSBlbHNlIGlmIChlbCA9PT0gY29uZmlybVBhc3N3b3JkKSB7XHJcblx0XHRcdFx0Y2hlY2tQYXNzd29yZChwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkKTtcclxuXHRcdFx0fSBlbHNlIGlmIChlbCA9PT0gZW1haWwpIHtcclxuXHRcdFx0XHRjaGVja0VtYWlsKGVtYWlsKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tMZW5naHQgPSAoaW5wdXQsIG1pbikgPT4ge1xyXG5cdGlmIChpbnB1dC52YWx1ZS5sZW5ndGggPCBtaW4pIHtcclxuXHRcdHNob3dFcnIoXHJcblx0XHRcdGlucHV0LFxyXG5cdFx0XHRgJHtpbnB1dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5zbGljZShcclxuXHRcdFx0XHQwLFxyXG5cdFx0XHRcdC0xXHJcblx0XHRcdCl9IG11c2kgemF3aWVyYcSHIG1pbmltdW0gJHttaW59IHpuYWtpYFxyXG5cdFx0KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja1Bhc3N3b3JkID0gKGlucHV0MSwgaW5wdXQyKSA9PiB7XHJcblx0aWYgKGlucHV0MS52YWx1ZSAhPSBpbnB1dDIudmFsdWUpIHtcclxuXHRcdHNob3dFcnIoaW5wdXQyLCBcIkhhc8WCYSBzxIUgcsOzxbxuZSFcIik7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFcnJvcnMgPSAoKSA9PiB7XHJcblx0Y29uc3QgYWxsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFwiLm1haW5SZWdpc3Rlcl9jb250YWluZXItZm9ybS1ib3hcIlxyXG5cdCk7XHJcblx0bGV0IGVycm9yQ291bnQgPSAwO1xyXG5cdGFsbElucHV0cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJlcnJvclwiKSkge1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0aWYgKGVycm9yQ291bnQgPT0gMCkge1xyXG5cdFx0cmVnaXN0ZXJVc2VyKCk7XHJcblx0fVxyXG5cdGNvbnNvbGUubG9nKGVycm9yQ291bnQpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFbWFpbCA9IChpbnB1dCkgPT4ge1xyXG5cdGNvbnN0IHJlID1cclxuXHRcdC9eKChbXjw+KClbXFxdXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLTN9XFwuWzAtOV17MS0zfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsM30pKSQvO1xyXG5cdGlmIChyZS50ZXN0KGlucHV0LnZhbHVlKSkge1xyXG5cdFx0Y2xlYXJFcnIoZW1haWwpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyKGlucHV0LCBcIkVtYWlsIGplc3QgbmllcG9wcmF3bnlcIik7XHJcblx0fVxyXG59O1xyXG5cclxuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IGFyciA9IFt1c2VybmFtZSwgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCwgZW1haWxdO1xyXG5cdGFyci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuXHRcdGNsZWFyRXJyKGVsZW1lbnQpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbnNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNoZWNrRm9ybShbdXNlcm5hbWUsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGVtYWlsXSk7XHJcblx0Y2hlY2tFcnJvcnMoKTtcclxufSk7XHJcblxyXG5zaWdub3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRzaWduT3V0KGF1dGgpXHJcblx0XHQudGhlbigoKSA9PiB7XHJcblx0XHRcdHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJ1c2VyXCIpO1xyXG5cdFx0XHRsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvaW5kZXguaHRtbFwiO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0YWxlcnQoXCJixYLEhWQgcHJ6eSB3eWxvZ293eXdhbml1XCIpO1xyXG5cdFx0fSk7XHJcbn0pO1xyXG5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0bG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2xvZ2luLmh0bWxcIjtcclxufSk7XHJcbiJdfQ==
