"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseAuth=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),firebaseConfig={apiKey:"AIzaSyAhj6kkaS_fMvLOwL-J4SXJ_DWSwejBmlo",authDomain:"licencjat-2a013.firebaseapp.com",databaseURL:"https://licencjat-2a013-default-rtdb.firebaseio.com",projectId:"licencjat-2a013",storageBucket:"licencjat-2a013.appspot.com",messagingSenderId:"676690164407",appId:"1:676690164407:web:b234c74f6f771f59a1ab32"},app=(0,_firebaseApp.initializeApp)(firebaseConfig),auth=(0,_firebaseAuth.getAuth)(),db=(0,_firebaseDatabase.getDatabase)(app),username=document.querySelector("#username"),password=document.querySelector("#password"),confirmPassword=document.querySelector("#password2"),email=document.querySelector("#email"),sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeBtn=document.querySelector(".close"),popup=document.querySelector(".popup");function registerUser(){(0,_firebaseAuth.createUserWithEmailAndPassword)(auth,email.value,password.value).then(function(e){e=e.user;(0,_firebaseDatabase.set)((0,_firebaseDatabase.ref)(db,"users/"+e.uid),{username:username.value,email:email.value,highScore:0,password:encPass()}).then(function(){popup.classList.add("show-popup"),username.value="",email.value="",password.value="",confirmPassword.value=""}).catch(function(e){alert("error "+e)})}).catch(function(e){e.code;e=e.message;alert(e)})}var encPass=function(){return CryptoJS.AES.encrypt(password.value,password.value).toString()},showErr=function(e,a){var e=e.parentElement,r=e.querySelector(".error-text");e.classList.add("error"),r.textContent=a},clearErr=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showErr(e,e.placeholder+"!"):clearErr(e)})},checkLenght=function(e,a){e.value.length<a&&showErr(e,"".concat(e.previousElementSibling.innerText.slice(0,-1)," musi zawierać minimum ").concat(a," znaki"))},checkPassword=function(e,a){e.value!=a.value&&showErr(a,"Hasła są różne!")},checkErrors=function(){var e=document.querySelectorAll(".mainRegister_container-form-box"),a=0;e.forEach(function(e){e.classList.contains("error")&&a++}),0==a&&registerUser(),console.log(a)},checkEmail=function(e){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1-3}\.[0-9]{1-3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearErr(email):showErr(e,"Email jest niepoprawny")};clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,password,confirmPassword,email].forEach(function(e){e.value="",clearErr(e)})}),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,password,confirmPassword,email]),checkLenght(username,3),checkLenght(password,8),checkPassword(password,confirmPassword),checkEmail(email),checkErrors()}),signout.addEventListener("click",function(e){e.preventDefault(),(0,_firebaseAuth.signOut)(auth).then(function(){sessionStorage.removeItem("user"),location.href="http://localhost:3000/index.html"}).catch(function(e){alert("błąd przy wylogowywaniu")})}),closeBtn.addEventListener("click",function(e){e.preventDefault(),location.href="http://localhost:3000/login.html"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIl9maXJlYmFzZUFwcCIsInJlcXVpcmUiLCJfZmlyZWJhc2VBdXRoIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJhcHBJZCIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInByb2plY3RJZCIsInN0b3JhZ2VCdWNrZXQiLCJkb2N1bWVudCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiY29uZmlybVBhc3N3b3JkIiwiY2xlYXJCdG4iLCJpbml0aWFsaXplQXBwIiwicXVlcnlTZWxlY3RvciIsImNsb3NlQnRuIiwiZ2V0QXV0aCIsInBvcHVwIiwiZ2V0RGF0YWJhc2UiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJwYXNzd29yZCIsInVzZXJDcmVkZW50aWFsIiwidXNlciIsImVtYWlsIiwic2V0IiwicmVmIiwidXNlcm5hbWUiLCJ2YWx1ZSIsImhpZ2hTY29yZSIsImF1dGgiLCJ0aGVuIiwiZGIiLCJlcnJvciIsInVpZCIsImVycm9yQ29kZSIsImFsZXJ0IiwiZXJyb3JNZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZW5jUGFzcyIsIkNyeXB0b0pTIiwiQUVTIiwidG9TdHJpbmciLCJmb3JtQm94IiwicGFyZW50RWxlbWVudCIsImVycm9yTXNnIiwiY29kZSIsImNsZWFyRXJyIiwiaW5wdXQiLCJlbmNyeXB0IiwicGxhY2Vob2xkZXIiLCJzaG93RXJyIiwibXNnIiwiY2hlY2tMZW5naHQiLCJpbnB1dDEiLCJyZW1vdmUiLCJpbnB1dDIiLCJjaGVja0Zvcm0iLCJjaGVja0Vycm9ycyIsImVsIiwiYWxsSW5wdXRzIiwiZXJyb3JDb3VudCIsImVsZW1lbnQiLCJyZWdpc3RlclVzZXIiLCJtaW4iLCJsZW5ndGgiLCJjb25zb2xlIiwiY29uY2F0IiwiY2hlY2tFbWFpbCIsInNsaWNlIiwicmUiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VuZEJ0biIsImNvbnRhaW5zIiwiY2hlY2tQYXNzd29yZCIsInNpZ25vdXQiLCJzaWduT3V0IiwidGVzdCIsImxvY2F0aW9uIiwiZSIsImZvckVhY2giLCJzZXNzaW9uU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJocmVmIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFBQSxhQUFBQyxRQUFBLDJEQUFBLEVBQ0FDLGNBQUFELFFBQUEsNERBQUEsRUFNQUUsa0JBQUFGLFFBQUEsZ0VBQUEsRUFZQ0csZUFBTyxDQUNQQyxPQUFBLDBDQUVEQyxXQUFZLGtDQUNaQyxZQUFhLHNEQUNiQyxVQUFXLGtCQUVYQyxjQUFpQkMsOEJBQ2pCQyxrQkFBaUJELGVBQ2pCTixNQUFNUSwyQ0FDTixFQUVNQyxLQUFRLEVBQUFDLGFBQUFBLGVBQVlDLGNBQWMsRUFDbENDLE1BQVEsRUFBQUMsY0FBQUEsU0FBR1AsRUFDWFEsSUFBSyxFQUFBQyxrQkFBQUEsYUFBWUosR0FBQUEsRUFHdEJLLFNBQUFBLFNBQUFBLGNBQUFBLFdBQThCLEVBRTVCQyxTQUFBWCxTQUFBSyxjQUFBLFdBQUEsRUFDQUgsZ0JBQWFVLFNBQWVDLGNBQUksWUFBQSxFQUNoQ0MsTUFBQUMsU0FBQUEsY0FBSUMsUUFBQUEsRUFDSEMsUUFBVUEsU0FBU0MsY0FBSyxPQUFBLEVBQ3hCSixTQUFPQSxTQUFXVCxjQUFBLFFBQUEsRUFDbEJjLFNBQVduQixTQUFDSyxjQUFBLFFBQUEsRUFDWk0sTUFBUVgsU0FBU0ssY0FBQSxRQUFBLEVBVHJCLFNBWUtHLGdCQVhKLEVBQUFFLGNBQUFBLGdDQVl1QlUsS0FBQU4sTUFBQUksTUFBQVAsU0FBQU8sS0FBQSxFQVhyQkcsS0FZRVAsU0FBQUEsR0FFQVosRUFBQUEsRUFBd0JXLE1BWDFCLEVBQUFFLGtCQUFBQSxNQVlHLEVBQUFDLGtCQUFBQSxLQUFBTSxHQUNJLFNBQUVDLEVBQUtDLEdBQUssRUFBQSxDQVpsQlAsU0FhT0EsU0FBV00sTUFDbEJULE1BQUVBLE1BQUFJLE1BQ0ZDLFVBQ0ssRUFDTlIsU0FBTWMsUUFBWUYsQ0Fi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QUMsTUFDSyxTQUFDckQsR0FDUEcsTUFBTSx5QkFBeUIsQ0FDaEMsQ0FBQyxDQUNILENBQUMsRUFDRHBCLFNBQVN3RCxpQkFBaUIsUUFBUyxTQUFDVSxHQUNuQ0EsRUFBRVQsZUFBYyxFQUNoQlEsU0FBU0ssS0FBTyxrQ0FDakIsQ0FBQyIsImZpbGUiOiJyZWdpc3Rlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXBwLmpzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0QXV0aCxcclxuXHRjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcblx0c2lnbk91dCxcclxuXHRvbkF1dGhTdGF0ZUNoYW5nZWQsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWF1dGguanNcIjtcclxuaW1wb3J0IHtcclxuXHRnZXREYXRhYmFzZSxcclxuXHRzZXQsXHJcblx0cmVmLFxyXG59IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1kYXRhYmFzZS5qc1wiO1xyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuXHRhcGlLZXk6IFwiQUl6YVN5QWhqNmtrYVNfZk12TE93TC1KNFNYSl9EV1N3ZWpCbWxvXCIsXHJcblx0YXV0aERvbWFpbjogXCJsaWNlbmNqYXQtMmEwMTMuZmlyZWJhc2VhcHAuY29tXCIsXHJcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9saWNlbmNqYXQtMmEwMTMtZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tXCIsXHJcblx0cHJvamVjdElkOiBcImxpY2VuY2phdC0yYTAxM1wiLFxyXG5cdHN0b3JhZ2VCdWNrZXQ6IFwibGljZW5jamF0LTJhMDEzLmFwcHNwb3QuY29tXCIsXHJcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiNjc2NjkwMTY0NDA3XCIsXHJcblx0YXBwSWQ6IFwiMTo2NzY2OTAxNjQ0MDc6d2ViOmIyMzRjNzRmNmY3NzFmNTlhMWFiMzJcIixcclxufTtcclxuXHJcbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5jb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xyXG5jb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7XHJcblxyXG5jb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdXNlcm5hbWVcIik7XHJcbmNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYXNzd29yZFwiKTtcclxuY29uc3QgY29uZmlybVBhc3N3b3JkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYXNzd29yZDJcIik7XHJcbmNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbWFpbFwiKTtcclxuY29uc3Qgc2VuZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VuZFwiKTtcclxuY29uc3QgY2xlYXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsZWFyXCIpO1xyXG5jb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2VcIik7XHJcbmNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVXNlcigpIHtcclxuXHRjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwudmFsdWUsIHBhc3N3b3JkLnZhbHVlKVxyXG5cdFx0LnRoZW4oKHVzZXJDcmVkZW50aWFsKSA9PiB7XHJcblx0XHRcdC8vIFNpZ25lZCBpblxyXG5cdFx0XHRjb25zdCB1c2VyID0gdXNlckNyZWRlbnRpYWwudXNlcjtcclxuXHRcdFx0c2V0KHJlZihkYiwgXCJ1c2Vycy9cIiArIHVzZXIudWlkKSwge1xyXG5cdFx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZS52YWx1ZSxcclxuXHRcdFx0XHRlbWFpbDogZW1haWwudmFsdWUsXHJcblx0XHRcdFx0aGlnaFNjb3JlOiAwLFxyXG5cdFx0XHRcdHBhc3N3b3JkOiBlbmNQYXNzKCksXHJcblx0XHRcdH0pXHJcblx0XHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0cG9wdXAuY2xhc3NMaXN0LmFkZChcInNob3ctcG9wdXBcIik7XHJcblx0XHRcdFx0XHR1c2VybmFtZS52YWx1ZSA9IFwiXCI7XHJcblx0XHRcdFx0XHRlbWFpbC52YWx1ZSA9IFwiXCI7XHJcblx0XHRcdFx0XHRwYXNzd29yZC52YWx1ZSA9IFwiXCI7XHJcblx0XHRcdFx0XHRjb25maXJtUGFzc3dvcmQudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRcdFx0YWxlcnQoXCJlcnJvciBcIiArIGVycm9yKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnN0IGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XHJcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblx0XHRcdGFsZXJ0KGVycm9yTWVzc2FnZSk7XHJcblx0XHR9KTtcclxufVxyXG5cclxuY29uc3QgZW5jUGFzcyA9ICgpID0+IHtcclxuXHRjb25zdCBwYXNzID0gQ3J5cHRvSlMuQUVTLmVuY3J5cHQocGFzc3dvcmQudmFsdWUsIHBhc3N3b3JkLnZhbHVlKTtcclxuXHRyZXR1cm4gcGFzcy50b1N0cmluZygpO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0VyciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcblx0Y29uc3QgZXJyb3JNc2cgPSBmb3JtQm94LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItdGV4dFwiKTtcclxuXHRmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcclxuXHRlcnJvck1zZy50ZXh0Q29udGVudCA9IG1zZztcclxufTtcclxuXHJcbmNvbnN0IGNsZWFyRXJyID0gKGlucHV0KSA9PiB7XHJcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcblx0Zm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0Zvcm0gPSAoaW5wdXQpID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0aWYgKGVsLnZhbHVlID09PSBcIlwiKSB7XHJcblx0XHRcdHNob3dFcnIoZWwsIGVsLnBsYWNlaG9sZGVyICsgXCIhXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnIoZWwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tMZW5naHQgPSAoaW5wdXQsIG1pbikgPT4ge1xyXG5cdGlmIChpbnB1dC52YWx1ZS5sZW5ndGggPCBtaW4pIHtcclxuXHRcdHNob3dFcnIoXHJcblx0XHRcdGlucHV0LFxyXG5cdFx0XHRgJHtpbnB1dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5zbGljZShcclxuXHRcdFx0XHQwLFxyXG5cdFx0XHRcdC0xXHJcblx0XHRcdCl9IG11c2kgemF3aWVyYcSHIG1pbmltdW0gJHttaW59IHpuYWtpYFxyXG5cdFx0KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja1Bhc3N3b3JkID0gKGlucHV0MSwgaW5wdXQyKSA9PiB7XHJcblx0aWYgKGlucHV0MS52YWx1ZSAhPSBpbnB1dDIudmFsdWUpIHtcclxuXHRcdHNob3dFcnIoaW5wdXQyLCBcIkhhc8WCYSBzxIUgcsOzxbxuZSFcIik7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFcnJvcnMgPSAoKSA9PiB7XHJcblx0Y29uc3QgYWxsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFwiLm1haW5SZWdpc3Rlcl9jb250YWluZXItZm9ybS1ib3hcIlxyXG5cdCk7XHJcblx0bGV0IGVycm9yQ291bnQgPSAwO1xyXG5cdGFsbElucHV0cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJlcnJvclwiKSkge1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0aWYgKGVycm9yQ291bnQgPT0gMCkge1xyXG5cdFx0cmVnaXN0ZXJVc2VyKCk7XHJcblx0fVxyXG5cdGNvbnNvbGUubG9nKGVycm9yQ291bnQpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFbWFpbCA9IChpbnB1dCkgPT4ge1xyXG5cdGNvbnN0IHJlID1cclxuXHRcdC9eKChbXjw+KClbXFxdXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLTN9XFwuWzAtOV17MS0zfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsM30pKSQvO1xyXG5cdGlmIChyZS50ZXN0KGlucHV0LnZhbHVlKSkge1xyXG5cdFx0Y2xlYXJFcnIoZW1haWwpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyKGlucHV0LCBcIkVtYWlsIGplc3QgbmllcG9wcmF3bnlcIik7XHJcblx0fVxyXG59O1xyXG5cclxuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IGFyciA9IFt1c2VybmFtZSwgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCwgZW1haWxdO1xyXG5cdGFyci5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcblx0XHRlbGVtZW50LnZhbHVlID0gXCJcIjtcclxuXHRcdGNsZWFyRXJyKGVsZW1lbnQpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbnNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNoZWNrRm9ybShbdXNlcm5hbWUsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGVtYWlsXSk7XHJcblx0Y2hlY2tMZW5naHQodXNlcm5hbWUsIDMpO1xyXG5cdGNoZWNrTGVuZ2h0KHBhc3N3b3JkLCA4KTtcclxuXHRjaGVja1Bhc3N3b3JkKHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQpO1xyXG5cdGNoZWNrRW1haWwoZW1haWwpO1xyXG5cdGNoZWNrRXJyb3JzKCk7XHJcbn0pO1xyXG5cclxuc2lnbm91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0c2lnbk91dChhdXRoKVxyXG5cdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwidXNlclwiKTtcclxuXHRcdFx0bG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2luZGV4Lmh0bWxcIjtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGFsZXJ0KFwiYsWCxIVkIHByenkgd3lsb2dvd3l3YW5pdVwiKTtcclxuXHRcdH0pO1xyXG59KTtcclxuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sb2dpbi5odG1sXCI7XHJcbn0pO1xyXG4iXX0=
