"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseAuth=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),firebaseConfig={apiKey:"AIzaSyAhj6kkaS_fMvLOwL-J4SXJ_DWSwejBmlo",authDomain:"licencjat-2a013.firebaseapp.com",databaseURL:"https://licencjat-2a013-default-rtdb.firebaseio.com",projectId:"licencjat-2a013",storageBucket:"licencjat-2a013.appspot.com",messagingSenderId:"676690164407",appId:"1:676690164407:web:b234c74f6f771f59a1ab32"},app=(0,_firebaseApp.initializeApp)(firebaseConfig),auth=(0,_firebaseAuth.getAuth)(),db=(0,_firebaseDatabase.getDatabase)(app),username=document.querySelector("#username"),password=document.querySelector("#password"),confirmPassword=document.querySelector("#password2"),email=document.querySelector("#email"),sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeBtn=document.querySelector(".close"),popup=document.querySelector(".popup");function registerUser(){(0,_firebaseAuth.createUserWithEmailAndPassword)(auth,email.value,password.value).then(function(e){e=e.user;(0,_firebaseDatabase.set)((0,_firebaseDatabase.ref)(db,"users/"+e.uid),{username:username.value,email:email.value,password:encPass()}).then(function(){popup.classList.add("show-popup"),username.value="",email.value="",password.value="",confirmPassword.value=""}).catch(function(e){alert("error "+e)})}).catch(function(e){e.code;e=e.message;alert(e)})}var encPass=function(){return CryptoJS.AES.encrypt(password.value,password.value).toString()},showErr=function(e,a){var e=e.parentElement,r=e.querySelector(".error-text");e.classList.add("error"),r.textContent=a},clearErr=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showErr(e,e.placeholder+"!"):clearErr(e)})},checkLenght=function(e,a){e.value.length<a&&showErr(e,"".concat(e.previousElementSibling.innerText.slice(0,-1)," musi zawierać minimum ").concat(a," znaki"))},checkPassword=function(e,a){e.value!=a.value&&showErr(a,"Hasła są różne!")},checkErrors=function(){var e=document.querySelectorAll(".mainRegister_container-form-box"),a=0;e.forEach(function(e){e.classList.contains("error")&&a++}),0==a&&registerUser(),console.log(a)},checkEmail=function(e){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1-3}\.[0-9]{1-3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearErr(email):showErr(e,"Email jest niepoprawny")};clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,password,confirmPassword,email].forEach(function(e){e.value="",clearErr(e)})}),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,password,confirmPassword,email]),checkLenght(username,3),checkLenght(password,8),checkPassword(password,confirmPassword),checkEmail(email),checkErrors()}),signout.addEventListener("click",function(e){e.preventDefault(),(0,_firebaseAuth.signOut)(auth).then(function(){sessionStorage.removeItem("user"),location.href="http://localhost:3000/index.html"}).catch(function(e){alert("błąd przy wylogowywaniu")})}),closeBtn.addEventListener("click",function(e){e.preventDefault(),location.href="http://localhost:3000/login.html"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIl9maXJlYmFzZUFwcCIsInJlcXVpcmUiLCJfZmlyZWJhc2VBdXRoIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJhcHBJZCIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInByb2plY3RJZCIsInN0b3JhZ2VCdWNrZXQiLCJkb2N1bWVudCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiY29uZmlybVBhc3N3b3JkIiwiY2xlYXJCdG4iLCJpbml0aWFsaXplQXBwIiwicXVlcnlTZWxlY3RvciIsImNsb3NlQnRuIiwiZ2V0QXV0aCIsInBvcHVwIiwiZ2V0RGF0YWJhc2UiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJwYXNzd29yZCIsInVzZXJDcmVkZW50aWFsIiwidXNlciIsImVtYWlsIiwic2V0IiwicmVmIiwidXNlcm5hbWUiLCJ2YWx1ZSIsImVuY1Bhc3MiLCJhdXRoIiwidGhlbiIsImFsZXJ0IiwiZGIiLCJlcnJvciIsInVpZCIsImVycm9yQ29kZSIsImVycm9yTWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsIkNyeXB0b0pTIiwiQUVTIiwidG9TdHJpbmciLCJmb3JtQm94IiwicGFyZW50RWxlbWVudCIsImVycm9yTXNnIiwiY29kZSIsImNsZWFyRXJyIiwiaW5wdXQiLCJlbmNyeXB0IiwicGxhY2Vob2xkZXIiLCJzaG93RXJyIiwibXNnIiwiY2hlY2tMZW5naHQiLCJpbnB1dDEiLCJyZW1vdmUiLCJpbnB1dDIiLCJjaGVja0Zvcm0iLCJjaGVja0Vycm9ycyIsImVsIiwiYWxsSW5wdXRzIiwiZXJyb3JDb3VudCIsImVsZW1lbnQiLCJyZWdpc3RlclVzZXIiLCJtaW4iLCJsZW5ndGgiLCJjb25zb2xlIiwiY29uY2F0IiwiY2hlY2tFbWFpbCIsInNsaWNlIiwicmUiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VuZEJ0biIsImNvbnRhaW5zIiwiY2hlY2tQYXNzd29yZCIsInNpZ25vdXQiLCJzaWduT3V0IiwidGVzdCIsImxvY2F0aW9uIiwiZSIsImZvckVhY2giLCJzZXNzaW9uU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJocmVmIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFBQSxhQUFBQyxRQUFBLDJEQUFBLEVBQ0FDLGNBQUFELFFBQUEsNERBQUEsRUFNQUUsa0JBQUFGLFFBQUEsZ0VBQUEsRUFZQ0csZUFBTyxDQUNQQyxPQUFBLDBDQUVEQyxXQUFZLGtDQUNaQyxZQUFhLHNEQUNiQyxVQUFXLGtCQUVYQyxjQUFpQkMsOEJBQ2pCQyxrQkFBaUJELGVBQ2pCTixNQUFNUSwyQ0FDTixFQUVNQyxLQUFRLEVBQUFDLGFBQUFBLGVBQVlDLGNBQWMsRUFDbENDLE1BQVEsRUFBQUMsY0FBQUEsU0FBR1AsRUFDWFEsSUFBSyxFQUFBQyxrQkFBQUEsYUFBWUosR0FBQUEsRUFHdEJLLFNBQUFBLFNBQUFBLGNBQUFBLFdBQThCLEVBRTVCQyxTQUFBWCxTQUFBSyxjQUFBLFdBQUEsRUFDQUgsZ0JBQWFVLFNBQWVDLGNBQUksWUFBQSxFQUNoQ0MsTUFBQUMsU0FBQUEsY0FBSUMsUUFBQUEsRUFDSEMsUUFBVUEsU0FBU0MsY0FBSyxPQUFBLEVBQ3hCSixTQUFPQSxTQUFXVCxjQUFBLFFBQUEsRUFDbEJNLFNBQVVRLFNBQU9kLGNBQUEsUUFBQSxFQUNoQkcsTUFDS1IsU0FBQUssY0FBTSxRQUFBLEVBVmhCLFNBWUtZLGdCQVhKLEVBQUFQLGNBQUFBLGdDQVlvQlUsS0FBQU4sTUFBQUksTUFBQVAsU0FBQU8sS0FBQSxFQVhsQkcsS0FZRVYsU0FBQUEsR0FFQ0UsRUFDS0QsRUFBTUMsTUFaZCxFQUFBRSxrQkFBQUEsTUFhRU8sRUFBQUEsa0JBQUFBLEtBQUtDLEdBQUMsU0FBV0MsRUFBTUMsR0FBQSxFQUFBLENBQ3hCUixTQUFFQSxTQUFBQyxNQUNGSixNQUFBQSxNQUNLSSxNQUNOUCxTQUFNZSxRQUFZRixDQWJsQixDQWNBLEVBQ0FGLEtBQU1LLFdBQ0xuQixNQUFBb0IsVUFBQUMsSUFBQSxZQUFBLEVBQ0paLFNBQUFDLE1BQUEsR0FFTUMsTUFBT0QsTUFBRyxHQUNmUCxTQUFhbUIsTUFBU0MsR0FDdEI3QixnQkFBWThCLE1BQVUsRUFDdEIsQ0FBQSxFQUFBLE1BRVksU0FBQVIsR0FDWkYsTUFBTVcsU0FBZ0JDLENBQUFBLENBQ3RCLENBQUEsQ0FDQUQsQ0FBQUEsRUFBQUEsTUFDQUUsU0FBUVgsR0FDUkEsRUFBQVksS0FFS0MsRUFBQUEsRUFBQUEsUUFDTGYsTUFBTVcsQ0FBZSxDQUNyQkEsQ0FBQUEsQ0FDRCxDQWZBLElBa0JDSyxRQUFjLFdBaEJkLE9BaUJRcEIsU0FBWWEsSUFBRVEsUUFBQTVCLFNBQUFPLE1BQUFQLFNBQUFPLEtBQUEsRUFDYmMsU0FBUVEsQ0FqQmxCLEVBb0JFQyxRQUFBLFNBQUFILEVBQUFJLEdBakJELElBa0JFVCxFQUFBSyxFQUFBSixjQUNGQyxFQUFBRixFQUFBNUIsY0FBQSxhQUFBLEVBRUQ0QixFQUFNVSxVQUFjZCxJQUFBLE9BQWRjLEVBbEJMUixFQW1CSUcsWUFBa0JJLENBbEJ2QixFQTJCQ0wsU0FBQSxTQUFBQyxHQUVrQkEsRUFBR0osY0FDakJVLFVBQVlDLE9BQUlDLE9BQU81QixDQXpCNUIsRUE0QkM2QixVQUFBLFNBQUFULEdBRURBLEVBQU1VLFFBQVcsU0FBQUMsR0FDRWpELEtBQVprRCxFQUFBQSxNQUdOVCxRQUFJVSxFQUFBQSxFQUFVWCxZQUFJLEdBQUEsRUEzQmhCSCxTQTZCR2UsQ0FBQUEsQ0EzQkwsQ0FBQyxDQUNGLEVBK0JFQyxZQUFjLFNBQUFmLEVBQUFnQixHQUNmaEIsRUFBQXBCLE1BQUFxQyxPQUFBRCxHQUNBRSxRQUNBbEIsRUFBQSxHQUFBbUIsT0FFS0MsRUFBQUEsdUJBQUFBLFVBQXdCQyxNQUM3QixFQUVBLENBQUEsQ0FBSUMsRUFDSHZCLHlCQUFBQSxFQUFBQSxPQUFlaUIsRUFBQSxRQUFBLENBQUEsQ0E1QmpCLEVBa0NBbkQsY0FBUzBELFNBQUFBLEVBQWlCZixHQUN2QmdCLEVBQUFBLE9BQWdCaEIsRUFBQTVCLE9BQ2xCdUIsUUFBU0ssRUFBSTdCLGlCQUFvQmYsQ0E5QmxDLEVBa0NHOEMsWUFBQSxXQUNGLElBQUNFLEVBQUFsRCxTQUFBK0QsaUJBRUZDLGtDQUFrQyxFQUVqQ2pCLEVBQVc5QixFQWhDWGlDLEVBaUNBUCxRQUFZMUIsU0FBQUEsR0FDWjBCLEVBQVloQyxVQUFVc0QsU0FBRSxPQUFBLEdBQ3hCQyxDQUFBQSxFQS9CQSxDQWlDQWxCLEVBQ0MsR0FBQUcsR0FFRmdCLGFBQVFOLEVBaENQTCxRQWtDQVksSUFBQUEsQ0FBQUEsQ0FqQ0QsRUFxQ0lWLFdBQ0ssU0FBQXBCLEdBRVAseUpBQ0ErQixLQUFBL0IsRUFBQXBCLEtBQUEsRUFDRlosU0FBU3VELEtBQUFBLEVBRVJTLFFBQVFoQyxFQUFLLHdCQUFHLENBbENqQixFQUVBbkMsU0FBUzBELGlCQUFpQixRQUFTLFNBQUNVLEdBQ25DQSxFQUFFVCxlQUFjLEVBQ0osQ0FBQzdDLFNBQVVOLFNBQVVULGdCQUFpQlksT0FDOUMwRCxRQUFRLFNBQUNwQixHQUNaQSxFQUFRbEMsTUFBUSxHQUNoQm1CLFNBQVNlLENBQU8sQ0FDakIsQ0FBQyxDQUNGLENBQUMsRUFFRFksUUFBUUgsaUJBQWlCLFFBQVMsU0FBQ1UsR0FDbENBLEVBQUVULGVBQWMsRUFDaEJmLFVBQVUsQ0FBQzlCLFNBQVVOLFNBQVVULGdCQUFpQlksTUFBTSxFQUN0RDZCLFlBQVkxQixTQUFVLENBQUMsRUFDdkIwQixZQUFZaEMsU0FBVSxDQUFDLEVBQ3ZCdUQsY0FBY3ZELFNBQVVULGVBQWUsRUFDdkN3RCxXQUFXNUMsS0FBSyxFQUNoQmtDLFlBQVcsQ0FDWixDQUFDLEVBRURtQixRQUFRTixpQkFBaUIsUUFBUyxTQUFDVSxHQUNsQ0EsRUFBRVQsZUFBYyxHQUNoQixFQUFBTSxjQUFBQSxTQUFRaEQsSUFBSSxFQUNWQyxLQUFLLFdBQ0xvRCxlQUFlQyxXQUFXLE1BQU0sRUFDaENKLFNBQVNLLEtBQU8sa0NBQ2pCLENBQUMsRUFBQyxNQUNLLFNBQUNuRCxHQUNQRixNQUFNLHlCQUF5QixDQUNoQyxDQUFDLENBQ0gsQ0FBQyxFQUNEaEIsU0FBU3VELGlCQUFpQixRQUFTLFNBQUNVLEdBQ25DQSxFQUFFVCxlQUFjLEVBQ2hCUSxTQUFTSyxLQUFPLGtDQUNqQixDQUFDIiwiZmlsZSI6InJlZ2lzdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1hcHAuanNcIjtcclxuaW1wb3J0IHtcclxuXHRnZXRBdXRoLFxyXG5cdGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCxcclxuXHRzaWduT3V0LFxyXG5cdG9uQXV0aFN0YXRlQ2hhbmdlZCxcclxufSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXV0aC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldERhdGFiYXNlLFxyXG5cdHNldCxcclxuXHRyZWYsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWRhdGFiYXNlLmpzXCI7XHJcbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xyXG5cdGFwaUtleTogXCJBSXphU3lBaGo2a2thU19mTXZMT3dMLUo0U1hKX0RXU3dlakJtbG9cIixcclxuXHRhdXRoRG9tYWluOiBcImxpY2VuY2phdC0yYTAxMy5maXJlYmFzZWFwcC5jb21cIixcclxuXHRkYXRhYmFzZVVSTDogXCJodHRwczovL2xpY2VuY2phdC0yYTAxMy1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcclxuXHRwcm9qZWN0SWQ6IFwibGljZW5jamF0LTJhMDEzXCIsXHJcblx0c3RvcmFnZUJ1Y2tldDogXCJsaWNlbmNqYXQtMmEwMTMuYXBwc3BvdC5jb21cIixcclxuXHRtZXNzYWdpbmdTZW5kZXJJZDogXCI2NzY2OTAxNjQ0MDdcIixcclxuXHRhcHBJZDogXCIxOjY3NjY5MDE2NDQwNzp3ZWI6YjIzNGM3NGY2Zjc3MWY1OWExYWIzMlwiLFxyXG59O1xyXG5cclxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcbmNvbnN0IGF1dGggPSBnZXRBdXRoKCk7XHJcbmNvbnN0IGRiID0gZ2V0RGF0YWJhc2UoYXBwKTtcclxuXHJcbmNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VybmFtZVwiKTtcclxuY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bhc3N3b3JkXCIpO1xyXG5jb25zdCBjb25maXJtUGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bhc3N3b3JkMlwiKTtcclxuY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VtYWlsXCIpO1xyXG5jb25zdCBzZW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZW5kXCIpO1xyXG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXJcIik7XHJcbmNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpO1xyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJVc2VyKCkge1xyXG5cdGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbC52YWx1ZSwgcGFzc3dvcmQudmFsdWUpXHJcblx0XHQudGhlbigodXNlckNyZWRlbnRpYWwpID0+IHtcclxuXHRcdFx0Ly8gU2lnbmVkIGluXHJcblx0XHRcdGNvbnN0IHVzZXIgPSB1c2VyQ3JlZGVudGlhbC51c2VyO1xyXG5cdFx0XHRzZXQocmVmKGRiLCBcInVzZXJzL1wiICsgdXNlci51aWQpLCB7XHJcblx0XHRcdFx0dXNlcm5hbWU6IHVzZXJuYW1lLnZhbHVlLFxyXG5cdFx0XHRcdGVtYWlsOiBlbWFpbC52YWx1ZSxcclxuXHRcdFx0XHRwYXNzd29yZDogZW5jUGFzcygpLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHRcdC50aGVuKCgpID0+IHtcclxuXHRcdFx0XHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJzaG93LXBvcHVwXCIpO1xyXG5cdFx0XHRcdFx0dXNlcm5hbWUudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0ZW1haWwudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0cGFzc3dvcmQudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0Y29uZmlybVBhc3N3b3JkLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdGFsZXJ0KFwiZXJyb3IgXCIgKyBlcnJvcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRjb25zdCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xyXG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG5cdFx0XHRhbGVydChlcnJvck1lc3NhZ2UpO1xyXG5cdFx0fSk7XHJcbn1cclxuXHJcbmNvbnN0IGVuY1Bhc3MgPSAoKSA9PiB7XHJcblx0Y29uc3QgcGFzcyA9IENyeXB0b0pTLkFFUy5lbmNyeXB0KHBhc3N3b3JkLnZhbHVlLCBwYXNzd29yZC52YWx1ZSk7XHJcblx0cmV0dXJuIHBhc3MudG9TdHJpbmcoKTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dFcnIgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGNvbnN0IGVycm9yTXNnID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLXRleHRcIik7XHJcblx0Zm9ybUJveC5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XHJcblx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSBtc2c7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVyciA9IChpbnB1dCkgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tGb3JtID0gKGlucHV0KSA9PiB7XHJcblx0aW5wdXQuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdGlmIChlbC52YWx1ZSA9PT0gXCJcIikge1xyXG5cdFx0XHRzaG93RXJyKGVsLCBlbC5wbGFjZWhvbGRlciArIFwiIVwiKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNsZWFyRXJyKGVsKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrTGVuZ2h0ID0gKGlucHV0LCBtaW4pID0+IHtcclxuXHRpZiAoaW5wdXQudmFsdWUubGVuZ3RoIDwgbWluKSB7XHJcblx0XHRzaG93RXJyKFxyXG5cdFx0XHRpbnB1dCxcclxuXHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lclRleHQuc2xpY2UoXHJcblx0XHRcdFx0MCxcclxuXHRcdFx0XHQtMVxyXG5cdFx0XHQpfSBtdXNpIHphd2llcmHEhyBtaW5pbXVtICR7bWlufSB6bmFraWBcclxuXHRcdCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tQYXNzd29yZCA9IChpbnB1dDEsIGlucHV0MikgPT4ge1xyXG5cdGlmIChpbnB1dDEudmFsdWUgIT0gaW5wdXQyLnZhbHVlKSB7XHJcblx0XHRzaG93RXJyKGlucHV0MiwgXCJIYXPFgmEgc8SFIHLDs8W8bmUhXCIpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRXJyb3JzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHRcIi5tYWluUmVnaXN0ZXJfY29udGFpbmVyLWZvcm0tYm94XCJcclxuXHQpO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHRhbGxJbnB1dHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0aWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXJyb3JcIikpIHtcclxuXHRcdFx0ZXJyb3JDb3VudCsrO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGlmIChlcnJvckNvdW50ID09IDApIHtcclxuXHRcdHJlZ2lzdGVyVXNlcigpO1xyXG5cdH1cclxuXHRjb25zb2xlLmxvZyhlcnJvckNvdW50KTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRW1haWwgPSAoaW5wdXQpID0+IHtcclxuXHRjb25zdCByZSA9XHJcblx0XHQvXigoW148PigpW1xcXVxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MS0zfVxcLlswLTldezEtM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLDN9KSkkLztcclxuXHRpZiAocmUudGVzdChpbnB1dC52YWx1ZSkpIHtcclxuXHRcdGNsZWFyRXJyKGVtYWlsKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c2hvd0VycihpbnB1dCwgXCJFbWFpbCBqZXN0IG5pZXBvcHJhd255XCIpO1xyXG5cdH1cclxufTtcclxuXHJcbmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBhcnIgPSBbdXNlcm5hbWUsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGVtYWlsXTtcclxuXHRhcnIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0ZWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcblx0XHRjbGVhckVycihlbGVtZW50KTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5zZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjaGVja0Zvcm0oW3VzZXJuYW1lLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkLCBlbWFpbF0pO1xyXG5cdGNoZWNrTGVuZ2h0KHVzZXJuYW1lLCAzKTtcclxuXHRjaGVja0xlbmdodChwYXNzd29yZCwgOCk7XHJcblx0Y2hlY2tQYXNzd29yZChwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkKTtcclxuXHRjaGVja0VtYWlsKGVtYWlsKTtcclxuXHRjaGVja0Vycm9ycygpO1xyXG59KTtcclxuXHJcbnNpZ25vdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdHNpZ25PdXQoYXV0aClcclxuXHRcdC50aGVuKCgpID0+IHtcclxuXHRcdFx0c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcInVzZXJcIik7XHJcblx0XHRcdGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9pbmRleC5odG1sXCI7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRhbGVydChcImLFgsSFZCBwcnp5IHd5bG9nb3d5d2FuaXVcIik7XHJcblx0XHR9KTtcclxufSk7XHJcbmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvbG9naW4uaHRtbFwiO1xyXG59KTtcclxuIl19
