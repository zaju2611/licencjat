"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseAuth=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),app=(0,_firebaseApp.initializeApp)(firebaseConfig),auth=(0,_firebaseAuth.getAuth)(),db=(0,_firebaseDatabase.getDatabase)(app),username=document.querySelector("#username"),password=document.querySelector("#password"),confirmPassword=document.querySelector("#password2"),email=document.querySelector("#email"),sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeBtn=document.querySelector(".close"),popup=document.querySelector(".popup"),popupText=document.querySelector(".popup p");function registerUser(){(0,_firebaseAuth.createUserWithEmailAndPassword)(auth,email.value,password.value).then(function(e){e=e.user;(0,_firebaseDatabase.set)((0,_firebaseDatabase.ref)(db,"users/"+e.uid),{username:username.value,email:email.value,highScoreFlat:"",highScoreSpatial:"",highScoreMix:"",password:encPass()}).then(function(){popup.classList.add("show-popup"),username.value="",email.value="",password.value="",confirmPassword.value=""}).catch(function(e){alert("error "+e)})}).catch(function(e){popupText.textContent="Użytkownik o tym adresie email już istnieje",popup.classList.add("show-popup")})}var encPass=function(){return CryptoJS.AES.encrypt(password.value,password.value).toString()},showErr=function(e,r){var e=e.parentElement,a=e.querySelector(".error-text");e.classList.add("error"),a.textContent=r},clearErr=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value.trim()?showErr(e,e.placeholder.toLowerCase()+" !"):(clearErr(e),e===username?checkLenght(username,3):e===password?checkLenght(password,8):e===confirmPassword?(checkPassword(password,confirmPassword),checkLenght(password,8)):e===email&&checkEmail(email))})},checkLenght=function(e,r){e.value.length<r&&showErr(e,"".concat(e.previousElementSibling.innerText.slice(0,-1)," musi zawierać minimum ").concat(r," znaki"))},checkPassword=function(e,r){e.value!=r.value&&showErr(r,"Hasła są różne!")},checkErrors=function(){var e=document.querySelectorAll(".mainRegister_container-form-box"),r=0;e.forEach(function(e){e.classList.contains("error")&&r++}),0==r&&registerUser(),console.log(r)},checkEmail=function(e){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1-3}\.[0-9]{1-3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearErr(email):showErr(e,"Email jest niepoprawny")};clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,password,confirmPassword,email].forEach(function(e){e.value="",clearErr(e)})}),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,password,confirmPassword,email]),checkErrors()}),signout.addEventListener("click",function(e){e.preventDefault(),(0,_firebaseAuth.signOut)(auth).then(function(){sessionStorage.removeItem("user"),location.href="http://localhost:3000/index.html"}).catch(function(e){alert("błąd przy wylogowywaniu")})}),closeBtn.addEventListener("click",function(e){e.preventDefault(),location.href="http://localhost:3000/login.html"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIl9maXJlYmFzZUFwcCIsInJlcXVpcmUiLCJfZmlyZWJhc2VBdXRoIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJzZW5kQnRuIiwiaW5pdGlhbGl6ZUFwcCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGVhckJ0biIsImdldEF1dGgiLCJkb2N1bWVudCIsImNsb3NlQnRuIiwiYXBwIiwicG9wdXBUZXh0IiwicGFzc3dvcmQiLCJyZWdpc3RlclVzZXIiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJlbWFpbCIsInVzZXJDcmVkZW50aWFsIiwic2V0IiwicmVmIiwidXNlcm5hbWUiLCJ2YWx1ZSIsImhpZ2hTY29yZUZsYXQiLCJoaWdoU2NvcmVNaXgiLCJhdXRoIiwidGhlbiIsInVzZXIiLCJkYiIsInVpZCIsImNvbmZpcm1QYXNzd29yZCIsImhpZ2hTY29yZVNwYXRpYWwiLCJlbmNQYXNzIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJDcnlwdG9KUyIsIkFFUyIsInRvU3RyaW5nIiwiZXJyb3IiLCJhbGVydCIsImZvcm1Cb3giLCJwYXJlbnRFbGVtZW50IiwiZXJyb3JNc2ciLCJ0ZXh0Q29udGVudCIsImNsZWFyRXJyIiwiaW5wdXQiLCJjaGVja0Zvcm0iLCJmb3JFYWNoIiwiZWwiLCJtc2ciLCJjaGVja0xlbmdodCIsImNoZWNrRW1haWwiLCJ0cmltIiwic2hvd0VyciIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiY2hlY2tQYXNzd29yZCIsImlucHV0MiIsImNoZWNrRXJyb3JzIiwiYWxsSW5wdXRzIiwiZXJyb3JDb3VudCIsIm1pbiIsImNvbnNvbGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiaW5uZXJUZXh0Iiwic2xpY2UiLCJyZSIsImNvbmNhdCIsImlucHV0MSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29udGFpbnMiLCJzaWduT3V0Iiwic2Vzc2lvblN0b3JhZ2UiLCJsb2ciLCJsb2NhdGlvbiIsImhyZWYiLCJlbGVtZW50Iiwic2lnbm91dCIsInJlbW92ZUl0ZW0iXSwibWFwcGluZ3MiOiJhQUFBLElBQUFBLGFBQUFDLFFBQUEsMkRBQUEsRUFDQUMsY0FBQUQsUUFBQSw0REFBQSxFQVlBRSxrQkFBQUYsUUFBQSxnRUFBQSxFQU9NRyxLQUFPLEVBQUFDLGFBQUFBLGVBQVlDLGNBQWMsRUFDakNDLE1BQVEsRUFBQUMsY0FBQUEsU0FBR0MsRUFDWEMsSUFBQUEsRUFBQUEsa0JBQUFBLGFBQW1CQyxHQUFDTCxFQUVwQk0sU0FBWUgsU0FBU0gsY0FBYyxXQUFXLEVBRXBETyxTQUFTQyxTQUFlUixjQUFBLFdBQUEsRUFDdkJTLGdCQUFBQSxTQUFBQSxjQUFBQSxZQUFxQ0MsRUFFbkNBLE1BQUFQLFNBQUFILGNBQUEsUUFBQSxFQUNBRixRQUFhYSxTQUFBQSxjQUFtQixPQUFBLEVBQ2hDVixTQUFBVyxTQUFBQSxjQUFJQyxRQUFBQSxFQUNIQyxTQUFVQSxTQUFTQyxjQUFLLFFBQUEsRUFDeEJMLE1BQU9BLFNBQU1LLGNBQUssUUFBQSxFQUNsQkMsVUFBQUEsU0FBaUJoQixjQUFBLFVBQUEsRUFSckIsU0FVSWlCLGdCQVRILEVBQUFSLGNBQUFBLGdDQVVvQlMsS0FBQVIsTUFBQUssTUFBQVIsU0FBQVEsS0FBQSxFQVRsQkksS0FXRUEsU0FBQUEsR0FFQUwsRUFBU0MsRUFBVUssTUFWckIsRUFBQVIsa0JBQUFBLE1BV0VGLEVBQUFBLGtCQUFBQSxLQUFLVyxHQUFDTixTQUFVSyxFQUFBRSxHQUFBLEVBQUEsQ0FWakJSLFNBV1NBLFNBQVNDLE1BVmxCTCxNQVdDYSxNQUFBQSxNQUNEUCxjQUNPLEdBWFBRLGlCQVllLEdBQ2ZQLGFBQUUsR0FDRlYsU0FDS2tCLFFBQUEsQ0FaTixDQWFBbkIsRUFDQW9CLEtBQU1DLFdBQ0xELE1BQUFDLFVBQUFDLElBQUEsWUFBQSxFQUNKZCxTQUFBQyxNQUFBLEdBRU1VLE1BQU9WLE1BQUcsR0FDZlIsU0FB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LEVBQUMsTUFDSyxTQUFDeEMsR0FDUEMsTUFBTSx5QkFBeUIsQ0FDaEMsQ0FBQyxDQUNILENBQUMsRUFDRDdCLFNBQVMyRCxpQkFBaUIsUUFBUyxTQUFDQyxHQUNuQ0EsRUFBRUMsZUFBYyxFQUNoQk0sU0FBU0MsS0FBTyxrQ0FDakIsQ0FBQyIsImZpbGUiOiJyZWdpc3Rlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXBwLmpzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0QXV0aCxcclxuXHRjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXHJcblx0c2lnbk91dCxcclxufSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXV0aC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldERhdGFiYXNlLFxyXG5cdHNldCxcclxuXHRyZWYsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWRhdGFiYXNlLmpzXCI7XHJcblxyXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuY29uc3QgYXV0aCA9IGdldEF1dGgoKTtcclxuY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApO1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3VzZXJuYW1lXCIpO1xyXG5jb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFzc3dvcmRcIik7XHJcbmNvbnN0IGNvbmZpcm1QYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFzc3dvcmQyXCIpO1xyXG5jb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWxcIik7XHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbmRcIik7XHJcbmNvbnN0IGNsZWFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbGVhclwiKTtcclxuY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpO1xyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbmNvbnN0IHBvcHVwVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAgcFwiKTtcclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVXNlcigpIHtcclxuXHRjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwudmFsdWUsIHBhc3N3b3JkLnZhbHVlKVxyXG5cdFx0LnRoZW4oKHVzZXJDcmVkZW50aWFsKSA9PiB7XHJcblx0XHRcdC8vIFNpZ25lZCBpblxyXG5cdFx0XHRjb25zdCB1c2VyID0gdXNlckNyZWRlbnRpYWwudXNlcjtcclxuXHRcdFx0c2V0KHJlZihkYiwgXCJ1c2Vycy9cIiArIHVzZXIudWlkKSwge1xyXG5cdFx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZS52YWx1ZSxcclxuXHRcdFx0XHRlbWFpbDogZW1haWwudmFsdWUsXHJcblx0XHRcdFx0aGlnaFNjb3JlRmxhdDogXCJcIixcclxuXHRcdFx0XHRoaWdoU2NvcmVTcGF0aWFsOiBcIlwiLFxyXG5cdFx0XHRcdGhpZ2hTY29yZU1peDogXCJcIixcclxuXHRcdFx0XHRwYXNzd29yZDogZW5jUGFzcygpLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHRcdC50aGVuKCgpID0+IHtcclxuXHRcdFx0XHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoXCJzaG93LXBvcHVwXCIpO1xyXG5cdFx0XHRcdFx0dXNlcm5hbWUudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0ZW1haWwudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0cGFzc3dvcmQudmFsdWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0Y29uZmlybVBhc3N3b3JkLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdGFsZXJ0KFwiZXJyb3IgXCIgKyBlcnJvcik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRwb3B1cFRleHQudGV4dENvbnRlbnQgPSBcIlXFvHl0a293bmlrIG8gdHltIGFkcmVzaWUgZW1haWwganXFvCBpc3RuaWVqZVwiO1xyXG5cdFx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKFwic2hvdy1wb3B1cFwiKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5jb25zdCBlbmNQYXNzID0gKCkgPT4ge1xyXG5cdGNvbnN0IHBhc3MgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChwYXNzd29yZC52YWx1ZSwgcGFzc3dvcmQudmFsdWUpO1xyXG5cdHJldHVybiBwYXNzLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyID0gKGlucHV0LCBtc2cpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBlcnJvck1zZyA9IGZvcm1Cb3gucXVlcnlTZWxlY3RvcihcIi5lcnJvci10ZXh0XCIpO1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG5cdGVycm9yTXNnLnRleHRDb250ZW50ID0gbXNnO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFcnIgPSAoaW5wdXQpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IChpbnB1dCkgPT4ge1xyXG5cdGlucHV0LmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRpZiAoZWwudmFsdWUudHJpbSgpID09PSBcIlwiKSB7XHJcblx0XHRcdHNob3dFcnIoZWwsIGVsLnBsYWNlaG9sZGVyLnRvTG93ZXJDYXNlKCkgKyBcIiAhXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnIoZWwpO1xyXG5cdFx0XHRpZiAoZWwgPT09IHVzZXJuYW1lKSB7XHJcblx0XHRcdFx0Y2hlY2tMZW5naHQodXNlcm5hbWUsIDMpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGVsID09PSBwYXNzd29yZCkge1xyXG5cdFx0XHRcdGNoZWNrTGVuZ2h0KHBhc3N3b3JkLCA4KTtcclxuXHRcdFx0fSBlbHNlIGlmIChlbCA9PT0gY29uZmlybVBhc3N3b3JkKSB7XHJcblx0XHRcdFx0Y2hlY2tQYXNzd29yZChwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkKTtcclxuXHRcdFx0XHRjaGVja0xlbmdodChwYXNzd29yZCwgOCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZWwgPT09IGVtYWlsKSB7XHJcblx0XHRcdFx0Y2hlY2tFbWFpbChlbWFpbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrTGVuZ2h0ID0gKGlucHV0LCBtaW4pID0+IHtcclxuXHRpZiAoaW5wdXQudmFsdWUubGVuZ3RoIDwgbWluKSB7XHJcblx0XHRzaG93RXJyKFxyXG5cdFx0XHRpbnB1dCxcclxuXHRcdFx0YCR7aW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lclRleHQuc2xpY2UoXHJcblx0XHRcdFx0MCxcclxuXHRcdFx0XHQtMVxyXG5cdFx0XHQpfSBtdXNpIHphd2llcmHEhyBtaW5pbXVtICR7bWlufSB6bmFraWBcclxuXHRcdCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tQYXNzd29yZCA9IChpbnB1dDEsIGlucHV0MikgPT4ge1xyXG5cdGlmIChpbnB1dDEudmFsdWUgIT0gaW5wdXQyLnZhbHVlKSB7XHJcblx0XHRzaG93RXJyKGlucHV0MiwgXCJIYXPFgmEgc8SFIHLDs8W8bmUhXCIpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRXJyb3JzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcblx0XHRcIi5tYWluUmVnaXN0ZXJfY29udGFpbmVyLWZvcm0tYm94XCJcclxuXHQpO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHRhbGxJbnB1dHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0aWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXJyb3JcIikpIHtcclxuXHRcdFx0ZXJyb3JDb3VudCsrO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGlmIChlcnJvckNvdW50ID09IDApIHtcclxuXHRcdHJlZ2lzdGVyVXNlcigpO1xyXG5cdH1cclxuXHRjb25zb2xlLmxvZyhlcnJvckNvdW50KTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRW1haWwgPSAoaW5wdXQpID0+IHtcclxuXHRjb25zdCByZSA9XHJcblx0XHQvXigoW148PigpW1xcXVxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MS0zfVxcLlswLTldezEtM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLDN9KSkkLztcclxuXHRpZiAocmUudGVzdChpbnB1dC52YWx1ZSkpIHtcclxuXHRcdGNsZWFyRXJyKGVtYWlsKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c2hvd0VycihpbnB1dCwgXCJFbWFpbCBqZXN0IG5pZXBvcHJhd255XCIpO1xyXG5cdH1cclxufTtcclxuXHJcbmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBhcnIgPSBbdXNlcm5hbWUsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGVtYWlsXTtcclxuXHRhcnIuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0ZWxlbWVudC52YWx1ZSA9IFwiXCI7XHJcblx0XHRjbGVhckVycihlbGVtZW50KTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5zZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjaGVja0Zvcm0oW3VzZXJuYW1lLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkLCBlbWFpbF0pO1xyXG5cdGNoZWNrRXJyb3JzKCk7XHJcbn0pO1xyXG5cclxuc2lnbm91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0c2lnbk91dChhdXRoKVxyXG5cdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwidXNlclwiKTtcclxuXHRcdFx0bG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2luZGV4Lmh0bWxcIjtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGFsZXJ0KFwiYsWCxIVkIHByenkgd3lsb2dvd3l3YW5pdVwiKTtcclxuXHRcdH0pO1xyXG59KTtcclxuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sb2dpbi5odG1sXCI7XHJcbn0pO1xyXG4iXX0=
