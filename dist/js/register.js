"use strict";var _firebaseApp=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"),_firebaseAuth=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"),_firebaseDatabase=require("https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js"),app=(0,_firebaseApp.initializeApp)(firebaseConfig),auth=(0,_firebaseAuth.getAuth)(),db=(0,_firebaseDatabase.getDatabase)(app),username=document.querySelector("#username"),password=document.querySelector("#password"),confirmPassword=document.querySelector("#password2"),email=document.querySelector("#email"),sendBtn=document.querySelector(".send"),clearBtn=document.querySelector(".clear"),closeBtn=document.querySelector(".close"),popup=document.querySelector(".popup");function registerUser(){(0,_firebaseAuth.createUserWithEmailAndPassword)(auth,email.value,password.value).then(function(e){e=e.user;(0,_firebaseDatabase.set)((0,_firebaseDatabase.ref)(db,"users/"+e.uid),{username:username.value,email:email.value,highScoreFlat:"",highScoreSpatial:"",highScoreMix:"",password:encPass()}).then(function(){popup.classList.add("show-popup"),username.value="",email.value="",password.value="",confirmPassword.value=""}).catch(function(e){alert("error "+e)})}).catch(function(e){e.code;e=e.message;alert(e)})}var encPass=function(){return CryptoJS.AES.encrypt(password.value,password.value).toString()},showErr=function(e,r){var e=e.parentElement,a=e.querySelector(".error-text");e.classList.add("error"),a.textContent=r},clearErr=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showErr(e,e.placeholder+"!"):clearErr(e)})},checkLenght=function(e,r){e.value.length<r&&showErr(e,"".concat(e.previousElementSibling.innerText.slice(0,-1)," musi zawierać minimum ").concat(r," znaki"))},checkPassword=function(e,r){e.value!=r.value&&showErr(r,"Hasła są różne!")},checkErrors=function(){var e=document.querySelectorAll(".mainRegister_container-form-box"),r=0;e.forEach(function(e){e.classList.contains("error")&&r++}),0==r&&registerUser(),console.log(r)},checkEmail=function(e){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1-3}\.[0-9]{1-3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/.test(e.value)?clearErr(email):showErr(e,"Email jest niepoprawny")};clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,password,confirmPassword,email].forEach(function(e){e.value="",clearErr(e)})}),sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,password,confirmPassword,email]),checkLenght(username,3),checkLenght(password,8),checkPassword(password,confirmPassword),checkEmail(email),checkErrors()}),signout.addEventListener("click",function(e){e.preventDefault(),(0,_firebaseAuth.signOut)(auth).then(function(){sessionStorage.removeItem("user"),location.href="http://localhost:3000/index.html"}).catch(function(e){alert("błąd przy wylogowywaniu")})}),closeBtn.addEventListener("click",function(e){e.preventDefault(),location.href="http://localhost:3000/login.html"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIl9maXJlYmFzZUFwcCIsInJlcXVpcmUiLCJfZmlyZWJhc2VBdXRoIiwiX2ZpcmViYXNlRGF0YWJhc2UiLCJjbGVhckJ0biIsImluaXRpYWxpemVBcHAiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VCdG4iLCJnZXRBdXRoIiwiZG9jdW1lbnQiLCJwb3B1cCIsImdldERhdGFiYXNlIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJ1c2VyQ3JlZGVudGlhbCIsInVzZXIiLCJlbWFpbCIsInNldCIsInJlZiIsInVzZXJuYW1lIiwidmFsdWUiLCJoaWdoU2NvcmVGbGF0IiwiaGlnaFNjb3JlU3BhdGlhbCIsImF1dGgiLCJ0aGVuIiwidWlkIiwiaGlnaFNjb3JlTWl4IiwiZXJyb3JDb2RlIiwiZXJyb3IiLCJhbGVydCIsImVycm9yTWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsImVuY1Bhc3MiLCJDcnlwdG9KUyIsIkFFUyIsInRvU3RyaW5nIiwiZm9ybUJveCIsInBhcmVudEVsZW1lbnQiLCJlcnJvck1zZyIsImNvZGUiLCJjbGVhckVyciIsImlucHV0IiwiZW5jcnlwdCIsInBsYWNlaG9sZGVyIiwic2hvd0VyciIsIm1zZyIsImNoZWNrTGVuZ2h0IiwiaW5wdXQxIiwicmVtb3ZlIiwiaW5wdXQyIiwiY2hlY2tGb3JtIiwiY2hlY2tFcnJvcnMiLCJlbCIsImFsbElucHV0cyIsImVycm9yQ291bnQiLCJlbGVtZW50IiwicmVnaXN0ZXJVc2VyIiwibWluIiwibGVuZ3RoIiwiY29uc29sZSIsImNvbmNhdCIsImNoZWNrRW1haWwiLCJzbGljZSIsInJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwicXVlcnlTZWxlY3RvckFsbCIsInNlbmRCdG4iLCJjb250YWlucyIsImNoZWNrUGFzc3dvcmQiLCJzaWdub3V0Iiwic2lnbk91dCIsInRlc3QiLCJsb2NhdGlvbiIsImUiLCJmb3JFYWNoIiwic2Vzc2lvblN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiaHJlZiJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBQUEsYUFBQUMsUUFBQSwyREFBQSxFQUNBQyxjQUFBRCxRQUFBLDREQUFBLEVBY0FFLGtCQUFBRixRQUFBLGdFQUFBLEVBT01HLEtBQVEsRUFBQUMsYUFBQUEsZUFBWUMsY0FBYyxFQUNsQ0MsTUFBUSxFQUFBQyxjQUFBQSxTQUFHQyxFQUNYQyxJQUFLLEVBQUFDLGtCQUFBQSxhQUFZTCxHQUFBQSxFQUd0Qk0sU0FBQUEsU0FBQUEsY0FBQUEsV0FBOEIsRUFFNUJDLFNBQUFKLFNBQUFILGNBQUEsV0FBQSxFQUNBUSxnQkFBYUMsU0FBZUMsY0FBSSxZQUFBLEVBQ2hDQyxNQUFBQyxTQUFBQSxjQUFJQyxRQUFBQSxFQUNIQyxRQUFVQSxTQUFTQyxjQUFLLE9BQUEsRUFDeEJKLFNBQU9BLFNBQVdYLGNBQUEsUUFBQSxFQUNsQmdCLFNBQUFBLFNBQWlCaEIsY0FBQSxRQUFBLEVBQ2pCaUIsTUFBQUEsU0FBZ0JqQixjQUFJLFFBQUEsRUFUeEIsU0FXSU8sZ0JBVkgsRUFBQUQsY0FBQUEsZ0NBWWVZLEtBQUFQLE1BQUFJLE1BQUFSLFNBQUFRLEtBQUEsRUFYYkksS0FZRWYsU0FBQUEsR0FFQU8sRUFBTUksRUFBVUwsTUFYbEIsRUFBQUUsa0JBQUFBLE1BWUVMLEVBQUFBLGtCQUFBQSxLQUFBQSxHQUFTUSxTQUFVTCxFQUFBVSxHQUFBLEVBQUEsQ0FYcEJOLFNBWUNOLFNBQWdCTyxNQUNqQkosTUFBRUEsTUFDS0ksTUFaUEMsY0FhTyxHQUNQQyxpQkFBRSxHQUNGSSxhQUNLLEdBQ05kLFNBQU1lLFFBQVlDLENBYmxCLENBY0EsRUFDQUMsS0FBTUMsV0FDTHJCLE1BQUFzQixVQUFBQyxJQUFBLFlBQUEsRUFDSmIsU0FBQUMsTUFBQSxHQUVNYSxNQUFPYixNQUFHLEdBQ2ZSLFNBQWFzQixNQUFTQyxHQUN0QnRCLGdCQUFZdUIsTUFBVSxFQUN0QixDQUFBLEVB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ZmlsZSI6InJlZ2lzdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMTcuMS9maXJlYmFzZS1hcHAuanNcIjtcclxuaW1wb3J0IHtcclxuXHRnZXRBdXRoLFxyXG5cdGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCxcclxuXHRzaWduT3V0LFxyXG5cdG9uQXV0aFN0YXRlQ2hhbmdlZCxcclxufSBmcm9tIFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjE3LjEvZmlyZWJhc2UtYXV0aC5qc1wiO1xyXG5pbXBvcnQge1xyXG5cdGdldERhdGFiYXNlLFxyXG5cdHNldCxcclxuXHRyZWYsXHJcbn0gZnJvbSBcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOS4xNy4xL2ZpcmViYXNlLWRhdGFiYXNlLmpzXCI7XHJcblxyXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuY29uc3QgYXV0aCA9IGdldEF1dGgoKTtcclxuY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApO1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3VzZXJuYW1lXCIpO1xyXG5jb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFzc3dvcmRcIik7XHJcbmNvbnN0IGNvbmZpcm1QYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFzc3dvcmQyXCIpO1xyXG5jb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWxcIik7XHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbmRcIik7XHJcbmNvbnN0IGNsZWFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbGVhclwiKTtcclxuY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpO1xyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcblxyXG5mdW5jdGlvbiByZWdpc3RlclVzZXIoKSB7XHJcblx0Y3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLnZhbHVlLCBwYXNzd29yZC52YWx1ZSlcclxuXHRcdC50aGVuKCh1c2VyQ3JlZGVudGlhbCkgPT4ge1xyXG5cdFx0XHQvLyBTaWduZWQgaW5cclxuXHRcdFx0Y29uc3QgdXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XHJcblx0XHRcdHNldChyZWYoZGIsIFwidXNlcnMvXCIgKyB1c2VyLnVpZCksIHtcclxuXHRcdFx0XHR1c2VybmFtZTogdXNlcm5hbWUudmFsdWUsXHJcblx0XHRcdFx0ZW1haWw6IGVtYWlsLnZhbHVlLFxyXG5cdFx0XHRcdGhpZ2hTY29yZUZsYXQ6IFwiXCIsXHJcblx0XHRcdFx0aGlnaFNjb3JlU3BhdGlhbDogXCJcIixcclxuXHRcdFx0XHRoaWdoU2NvcmVNaXg6IFwiXCIsXHJcblx0XHRcdFx0cGFzc3dvcmQ6IGVuY1Bhc3MoKSxcclxuXHRcdFx0fSlcclxuXHRcdFx0XHQudGhlbigoKSA9PiB7XHJcblx0XHRcdFx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKFwic2hvdy1wb3B1cFwiKTtcclxuXHRcdFx0XHRcdHVzZXJuYW1lLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHRcdGVtYWlsLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHRcdHBhc3N3b3JkLnZhbHVlID0gXCJcIjtcclxuXHRcdFx0XHRcdGNvbmZpcm1QYXNzd29yZC52YWx1ZSA9IFwiXCI7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdFx0XHRhbGVydChcImVycm9yIFwiICsgZXJyb3IpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0Y29uc3QgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcclxuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuXHRcdFx0YWxlcnQoZXJyb3JNZXNzYWdlKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5jb25zdCBlbmNQYXNzID0gKCkgPT4ge1xyXG5cdGNvbnN0IHBhc3MgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChwYXNzd29yZC52YWx1ZSwgcGFzc3dvcmQudmFsdWUpO1xyXG5cdHJldHVybiBwYXNzLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyID0gKGlucHV0LCBtc2cpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRjb25zdCBlcnJvck1zZyA9IGZvcm1Cb3gucXVlcnlTZWxlY3RvcihcIi5lcnJvci10ZXh0XCIpO1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG5cdGVycm9yTXNnLnRleHRDb250ZW50ID0gbXNnO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFcnIgPSAoaW5wdXQpID0+IHtcclxuXHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRmb3JtQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IChpbnB1dCkgPT4ge1xyXG5cdGlucHV0LmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRpZiAoZWwudmFsdWUgPT09IFwiXCIpIHtcclxuXHRcdFx0c2hvd0VycihlbCwgZWwucGxhY2Vob2xkZXIgKyBcIiFcIik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjbGVhckVycihlbCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0xlbmdodCA9IChpbnB1dCwgbWluKSA9PiB7XHJcblx0aWYgKGlucHV0LnZhbHVlLmxlbmd0aCA8IG1pbikge1xyXG5cdFx0c2hvd0VycihcclxuXHRcdFx0aW5wdXQsXHJcblx0XHRcdGAke2lucHV0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LnNsaWNlKFxyXG5cdFx0XHRcdDAsXHJcblx0XHRcdFx0LTFcclxuXHRcdFx0KX0gbXVzaSB6YXdpZXJhxIcgbWluaW11bSAke21pbn0gem5ha2lgXHJcblx0XHQpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrUGFzc3dvcmQgPSAoaW5wdXQxLCBpbnB1dDIpID0+IHtcclxuXHRpZiAoaW5wdXQxLnZhbHVlICE9IGlucHV0Mi52YWx1ZSkge1xyXG5cdFx0c2hvd0VycihpbnB1dDIsIFwiSGFzxYJhIHPEhSByw7PFvG5lIVwiKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0Vycm9ycyA9ICgpID0+IHtcclxuXHRjb25zdCBhbGxJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0XCIubWFpblJlZ2lzdGVyX2NvbnRhaW5lci1mb3JtLWJveFwiXHJcblx0KTtcclxuXHRsZXQgZXJyb3JDb3VudCA9IDA7XHJcblx0YWxsSW5wdXRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImVycm9yXCIpKSB7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9KTtcclxuXHRpZiAoZXJyb3JDb3VudCA9PSAwKSB7XHJcblx0XHRyZWdpc3RlclVzZXIoKTtcclxuXHR9XHJcblx0Y29uc29sZS5sb2coZXJyb3JDb3VudCk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0VtYWlsID0gKGlucHV0KSA9PiB7XHJcblx0Y29uc3QgcmUgPVxyXG5cdFx0L14oKFtePD4oKVtcXF1cXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEtM31cXC5bMC05XXsxLTN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17MiwzfSkpJC87XHJcblx0aWYgKHJlLnRlc3QoaW5wdXQudmFsdWUpKSB7XHJcblx0XHRjbGVhckVycihlbWFpbCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHNob3dFcnIoaW5wdXQsIFwiRW1haWwgamVzdCBuaWVwb3ByYXdueVwiKTtcclxuXHR9XHJcbn07XHJcblxyXG5jbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0Y29uc3QgYXJyID0gW3VzZXJuYW1lLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkLCBlbWFpbF07XHJcblx0YXJyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuXHRcdGVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG5cdFx0Y2xlYXJFcnIoZWxlbWVudCk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuc2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0Y2hlY2tGb3JtKFt1c2VybmFtZSwgcGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCwgZW1haWxdKTtcclxuXHRjaGVja0xlbmdodCh1c2VybmFtZSwgMyk7XHJcblx0Y2hlY2tMZW5naHQocGFzc3dvcmQsIDgpO1xyXG5cdGNoZWNrUGFzc3dvcmQocGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCk7XHJcblx0Y2hlY2tFbWFpbChlbWFpbCk7XHJcblx0Y2hlY2tFcnJvcnMoKTtcclxufSk7XHJcblxyXG5zaWdub3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRzaWduT3V0KGF1dGgpXHJcblx0XHQudGhlbigoKSA9PiB7XHJcblx0XHRcdHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJ1c2VyXCIpO1xyXG5cdFx0XHRsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvaW5kZXguaHRtbFwiO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0YWxlcnQoXCJixYLEhWQgcHJ6eSB3eWxvZ293eXdhbml1XCIpO1xyXG5cdFx0fSk7XHJcbn0pO1xyXG5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0bG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2xvZ2luLmh0bWxcIjtcclxufSk7XHJcbiJdfQ==
